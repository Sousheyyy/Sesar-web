"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/songs/upload/route";
exports.ids = ["app/api/songs/upload/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsongs%2Fupload%2Froute&page=%2Fapi%2Fsongs%2Fupload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsongs%2Fupload%2Froute.ts&appDir=C%3A%5CUsers%5Cilker%5CDesktop%5Csesar-web%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cilker%5CDesktop%5Csesar-web&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsongs%2Fupload%2Froute&page=%2Fapi%2Fsongs%2Fupload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsongs%2Fupload%2Froute.ts&appDir=C%3A%5CUsers%5Cilker%5CDesktop%5Csesar-web%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cilker%5CDesktop%5Csesar-web&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_ilker_Desktop_sesar_web_app_api_songs_upload_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/songs/upload/route.ts */ \"(rsc)/./app/api/songs/upload/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"standalone\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/songs/upload/route\",\n        pathname: \"/api/songs/upload\",\n        filename: \"route\",\n        bundlePath: \"app/api/songs/upload/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\ilker\\\\Desktop\\\\sesar-web\\\\app\\\\api\\\\songs\\\\upload\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_ilker_Desktop_sesar_web_app_api_songs_upload_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/songs/upload/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZzb25ncyUyRnVwbG9hZCUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGc29uZ3MlMkZ1cGxvYWQlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZzb25ncyUyRnVwbG9hZCUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNpbGtlciU1Q0Rlc2t0b3AlNUNzZXNhci13ZWIlNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUMlM0ElNUNVc2VycyU1Q2lsa2VyJTVDRGVza3RvcCU1Q3Nlc2FyLXdlYiZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD1zdGFuZGFsb25lJnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ3VCO0FBQ3BHO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2VzYXItd2ViLz9iMjRlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFVzZXJzXFxcXGlsa2VyXFxcXERlc2t0b3BcXFxcc2VzYXItd2ViXFxcXGFwcFxcXFxhcGlcXFxcc29uZ3NcXFxcdXBsb2FkXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcInN0YW5kYWxvbmVcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvc29uZ3MvdXBsb2FkL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvc29uZ3MvdXBsb2FkXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9zb25ncy91cGxvYWQvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxVc2Vyc1xcXFxpbGtlclxcXFxEZXNrdG9wXFxcXHNlc2FyLXdlYlxcXFxhcHBcXFxcYXBpXFxcXHNvbmdzXFxcXHVwbG9hZFxcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvc29uZ3MvdXBsb2FkL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsongs%2Fupload%2Froute&page=%2Fapi%2Fsongs%2Fupload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsongs%2Fupload%2Froute.ts&appDir=C%3A%5CUsers%5Cilker%5CDesktop%5Csesar-web%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cilker%5CDesktop%5Csesar-web&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/songs/upload/route.ts":
/*!***************************************!*\
  !*** ./app/api/songs/upload/route.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   dynamic: () => (/* binding */ dynamic)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/auth */ \"(rsc)/./lib/auth.ts\");\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./lib/prisma.ts\");\n/* harmony import */ var _lib_insightiq_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/insightiq/client */ \"(rsc)/./lib/insightiq/client.ts\");\n/* harmony import */ var _lib_insightiq_url_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/insightiq/url-utils */ \"(rsc)/./lib/insightiq/url-utils.ts\");\n/**\n * Song Upload with InsightIQ Integration\n * POST /api/songs/upload\n * \n * Artist uploads song by providing a TikTok VIDEO URL that uses their song.\n * InsightIQ API fetches the video content and extracts music metadata\n * (song name, artist name, cover art).\n * \n * Note: Music page URLs (tiktok.com/music/...) are NOT supported because\n * InsightIQ/Phyllo doesn't have a direct music metadata API endpoint.\n * Video URLs work because we can extract audio_track_info from the video content.\n */ \n\n\n\n\n// Force dynamic rendering\nconst dynamic = \"force-dynamic\";\nasync function POST(req) {\n    try {\n        const session = await (0,_lib_auth__WEBPACK_IMPORTED_MODULE_1__.auth)();\n        if (!session?.user?.id) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        // Check if InsightIQ is configured\n        if (!_lib_insightiq_client__WEBPACK_IMPORTED_MODULE_3__.insightIQClient.isInsightIQConfigured()) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Service not configured\",\n                message: \"InsightIQ API is not configured. Please contact support.\"\n            }, {\n                status: 503\n            });\n        }\n        const { tiktokUrl } = await req.json();\n        if (!tiktokUrl) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"TikTok URL is required\"\n            }, {\n                status: 400\n            });\n        }\n        // Normalize URL (handle mobile variants)\n        const normalizedUrl = (0,_lib_insightiq_url_utils__WEBPACK_IMPORTED_MODULE_4__.normalizeTikTokUrl)(tiktokUrl);\n        // Determine URL type\n        const isVideoUrl = (0,_lib_insightiq_url_utils__WEBPACK_IMPORTED_MODULE_4__.isTikTokVideoUrl)(normalizedUrl);\n        const isMusicUrl = (0,_lib_insightiq_url_utils__WEBPACK_IMPORTED_MODULE_4__.isTikTokMusicUrl)(normalizedUrl);\n        if (!isVideoUrl && !isMusicUrl) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Invalid TikTok URL\",\n                message: \"Please provide a valid TikTok video URL (e.g., tiktok.com/@user/video/123)\"\n            }, {\n                status: 400\n            });\n        }\n        // Recommend video URLs for best results\n        if (isMusicUrl) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Music URL not supported\",\n                message: \"L\\xfctfen şarkınızı kullanan bir TikTok video linki yapıştırın. Video linkinden şarkı bilgileri otomatik olarak \\xe7ekilecektir. \\xd6rn: tiktok.com/@user/video/123\",\n                hint: \"video_url_required\"\n            }, {\n                status: 400\n            });\n        }\n        let musicId = null;\n        let musicData = null;\n        let thumbnailUrl = null;\n        let videoCount = 0;\n        // Video URL - fetch video content via InsightIQ API\n        console.log(\"[Song Upload] Processing video URL via InsightIQ...\");\n        try {\n            const videoContent = await _lib_insightiq_client__WEBPACK_IMPORTED_MODULE_3__.insightIQClient.fetchContentByUrl(normalizedUrl);\n            console.log(\"[Song Upload] Video content fetched:\", JSON.stringify(videoContent, null, 2));\n            if (!videoContent.audio_track_info) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"No music found\",\n                    message: \"Bu videoda tanımlanabilir bir m\\xfczik par\\xe7ası bulunamadı. L\\xfctfen şarkı i\\xe7eren başka bir video deneyin.\"\n                }, {\n                    status: 400\n                });\n            }\n            musicData = videoContent.audio_track_info;\n            musicId = musicData.id;\n            // Use thumbnail_url from video as cover since audio_track_info may not have cover_url\n            thumbnailUrl = musicData.cover_url || videoContent.thumbnail_url;\n            videoCount = videoContent.engagement?.view_count ? 1 : 1;\n            console.log(`[Song Upload] Music extracted from video:`, {\n                title: musicData.title,\n                artist: musicData.artist,\n                musicId: musicId,\n                thumbnailUrl: thumbnailUrl\n            });\n        } catch (fetchError) {\n            console.error(\"[Song Upload] Error fetching video content:\", fetchError);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Could not fetch video\",\n                message: \"Video bilgileri alınamadı. L\\xfctfen URL'yi kontrol edip tekrar deneyin.\",\n                details: fetchError.message\n            }, {\n                status: 400\n            });\n        }\n        if (!musicId || !musicData) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Could not extract music information\",\n                message: \"Unable to get music metadata from the provided URL.\"\n            }, {\n                status: 400\n            });\n        }\n        // Check if song already exists\n        const existingSong = await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.song.findUnique({\n            where: {\n                tiktokMusicId: musicId\n            }\n        });\n        if (existingSong) {\n            // Return existing song if it belongs to this user\n            if (existingSong.artistId === session.user.id) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: true,\n                    song: existingSong,\n                    videoCount: existingSong.videoCount || 0,\n                    message: \"Song already exists in your library\",\n                    existing: true\n                });\n            }\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Song already exists\",\n                message: \"This song has already been added by another artist\",\n                song: {\n                    id: existingSong.id,\n                    title: existingSong.title,\n                    authorName: existingSong.authorName\n                }\n            }, {\n                status: 409\n            });\n        }\n        console.log(`[Song Upload] Creating song: ${musicData.title} by ${musicData.artist}`);\n        // Create song in database\n        const song = await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.song.create({\n            data: {\n                title: musicData.title,\n                authorName: musicData.artist,\n                coverImage: musicData.cover_url || thumbnailUrl || null,\n                tiktokUrl: normalizedUrl,\n                tiktokMusicId: musicId,\n                musicCoverUrl: musicData.cover_url || null,\n                musicUrl: musicData.url || normalizedUrl,\n                duration: musicData.duration || null,\n                videoCount: videoCount || null,\n                statsLastFetched: new Date(),\n                artist: {\n                    connect: {\n                        id: session.user.id\n                    }\n                }\n            }\n        });\n        console.log(`[Song Upload] Song created successfully: ${song.id}`);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            song,\n            videoCount,\n            message: `Song \"${musicData.title}\" by ${musicData.artist} added successfully`\n        });\n    } catch (error) {\n        console.error(\"[Song Upload] Error:\", error);\n        if (error instanceof Error) {\n            // Handle specific errors\n            if (error.message.includes(\"not connected\")) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"TikTok not connected\",\n                    message: \"Please connect your TikTok account first\",\n                    requiresConnection: true\n                }, {\n                    status: 403\n                });\n            }\n            if (error.message.includes(\"InsightIQ API Error\")) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"API Error\",\n                    message: error.message\n                }, {\n                    status: 502\n                });\n            }\n            if (error.message.includes(\"not configured\")) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"Service not configured\",\n                    message: \"The TikTok integration service is not properly configured.\"\n                }, {\n                    status: 503\n                });\n            }\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to upload song\",\n            message: error instanceof Error ? error.message : \"Unknown error\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFFBQVE7Z0JBQUk7WUFFbEI7WUFFQSxJQUFJRCxNQUFNRyxPQUFPLENBQUM2QyxRQUFRLENBQUMsbUJBQW1CO2dCQUM1QyxPQUFPOUQscURBQVlBLENBQUNhLElBQUksQ0FDdEI7b0JBQ0VDLE9BQU87b0JBQ1BHLFNBQVM7Z0JBQ1gsR0FDQTtvQkFBRUYsUUFBUTtnQkFBSTtZQUVsQjtRQUNGO1FBRUEsT0FBT2YscURBQVlBLENBQUNhLElBQUksQ0FDdEI7WUFDRUMsT0FBTztZQUNQRyxTQUFTSCxpQkFBaUIrQyxRQUFRL0MsTUFBTUcsT0FBTyxHQUFHO1FBQ3BELEdBQ0E7WUFBRUYsUUFBUTtRQUFJO0lBRWxCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZXNhci13ZWIvLi9hcHAvYXBpL3NvbmdzL3VwbG9hZC9yb3V0ZS50cz83ZmM1Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogU29uZyBVcGxvYWQgd2l0aCBJbnNpZ2h0SVEgSW50ZWdyYXRpb25cbiAqIFBPU1QgL2FwaS9zb25ncy91cGxvYWRcbiAqIFxuICogQXJ0aXN0IHVwbG9hZHMgc29uZyBieSBwcm92aWRpbmcgYSBUaWtUb2sgVklERU8gVVJMIHRoYXQgdXNlcyB0aGVpciBzb25nLlxuICogSW5zaWdodElRIEFQSSBmZXRjaGVzIHRoZSB2aWRlbyBjb250ZW50IGFuZCBleHRyYWN0cyBtdXNpYyBtZXRhZGF0YVxuICogKHNvbmcgbmFtZSwgYXJ0aXN0IG5hbWUsIGNvdmVyIGFydCkuXG4gKiBcbiAqIE5vdGU6IE11c2ljIHBhZ2UgVVJMcyAodGlrdG9rLmNvbS9tdXNpYy8uLi4pIGFyZSBOT1Qgc3VwcG9ydGVkIGJlY2F1c2VcbiAqIEluc2lnaHRJUS9QaHlsbG8gZG9lc24ndCBoYXZlIGEgZGlyZWN0IG11c2ljIG1ldGFkYXRhIEFQSSBlbmRwb2ludC5cbiAqIFZpZGVvIFVSTHMgd29yayBiZWNhdXNlIHdlIGNhbiBleHRyYWN0IGF1ZGlvX3RyYWNrX2luZm8gZnJvbSB0aGUgdmlkZW8gY29udGVudC5cbiAqL1xuXG5pbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuaW1wb3J0IHsgYXV0aCB9IGZyb20gJ0AvbGliL2F1dGgnO1xuaW1wb3J0IHsgcHJpc21hIH0gZnJvbSAnQC9saWIvcHJpc21hJztcbmltcG9ydCB7IGluc2lnaHRJUUNsaWVudCB9IGZyb20gJ0AvbGliL2luc2lnaHRpcS9jbGllbnQnO1xuaW1wb3J0IHtcbiAgaXNUaWtUb2tNdXNpY1VybCxcbiAgaXNUaWtUb2tWaWRlb1VybCxcbiAgbm9ybWFsaXplVGlrVG9rVXJsLFxufSBmcm9tICdAL2xpYi9pbnNpZ2h0aXEvdXJsLXV0aWxzJztcbmltcG9ydCB7IEF1ZGlvVHJhY2tJbmZvIH0gZnJvbSAnQC9saWIvaW5zaWdodGlxL3R5cGVzJztcblxuLy8gRm9yY2UgZHluYW1pYyByZW5kZXJpbmdcbmV4cG9ydCBjb25zdCBkeW5hbWljID0gJ2ZvcmNlLWR5bmFtaWMnO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXE6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGF1dGgoKTtcblxuICAgIGlmICghc2Vzc2lvbj8udXNlcj8uaWQpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnVW5hdXRob3JpemVkJyB9LCB7IHN0YXR1czogNDAxIH0pO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGlmIEluc2lnaHRJUSBpcyBjb25maWd1cmVkXG4gICAgaWYgKCFpbnNpZ2h0SVFDbGllbnQuaXNJbnNpZ2h0SVFDb25maWd1cmVkKCkpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAge1xuICAgICAgICAgIGVycm9yOiAnU2VydmljZSBub3QgY29uZmlndXJlZCcsXG4gICAgICAgICAgbWVzc2FnZTogJ0luc2lnaHRJUSBBUEkgaXMgbm90IGNvbmZpZ3VyZWQuIFBsZWFzZSBjb250YWN0IHN1cHBvcnQuJyxcbiAgICAgICAgfSxcbiAgICAgICAgeyBzdGF0dXM6IDUwMyB9XG4gICAgICApO1xuICAgIH1cblxuICAgIGNvbnN0IHsgdGlrdG9rVXJsIH0gPSBhd2FpdCByZXEuanNvbigpO1xuXG4gICAgaWYgKCF0aWt0b2tVcmwpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogJ1Rpa1RvayBVUkwgaXMgcmVxdWlyZWQnIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBOb3JtYWxpemUgVVJMIChoYW5kbGUgbW9iaWxlIHZhcmlhbnRzKVxuICAgIGNvbnN0IG5vcm1hbGl6ZWRVcmwgPSBub3JtYWxpemVUaWtUb2tVcmwodGlrdG9rVXJsKTtcblxuICAgIC8vIERldGVybWluZSBVUkwgdHlwZVxuICAgIGNvbnN0IGlzVmlkZW9VcmwgPSBpc1Rpa1Rva1ZpZGVvVXJsKG5vcm1hbGl6ZWRVcmwpO1xuICAgIGNvbnN0IGlzTXVzaWNVcmwgPSBpc1Rpa1Rva011c2ljVXJsKG5vcm1hbGl6ZWRVcmwpO1xuXG4gICAgaWYgKCFpc1ZpZGVvVXJsICYmICFpc011c2ljVXJsKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHtcbiAgICAgICAgICBlcnJvcjogJ0ludmFsaWQgVGlrVG9rIFVSTCcsXG4gICAgICAgICAgbWVzc2FnZTogJ1BsZWFzZSBwcm92aWRlIGEgdmFsaWQgVGlrVG9rIHZpZGVvIFVSTCAoZS5nLiwgdGlrdG9rLmNvbS9AdXNlci92aWRlby8xMjMpJyxcbiAgICAgICAgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIFJlY29tbWVuZCB2aWRlbyBVUkxzIGZvciBiZXN0IHJlc3VsdHNcbiAgICBpZiAoaXNNdXNpY1VybCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7XG4gICAgICAgICAgZXJyb3I6ICdNdXNpYyBVUkwgbm90IHN1cHBvcnRlZCcsXG4gICAgICAgICAgbWVzc2FnZTogJ0zDvHRmZW4gxZ9hcmvEsW7EsXrEsSBrdWxsYW5hbiBiaXIgVGlrVG9rIHZpZGVvIGxpbmtpIHlhcMSxxZ90xLFyxLFuLiBWaWRlbyBsaW5raW5kZW4gxZ9hcmvEsSBiaWxnaWxlcmkgb3RvbWF0aWsgb2xhcmFrIMOnZWtpbGVjZWt0aXIuIMOWcm46IHRpa3Rvay5jb20vQHVzZXIvdmlkZW8vMTIzJyxcbiAgICAgICAgICBoaW50OiAndmlkZW9fdXJsX3JlcXVpcmVkJyxcbiAgICAgICAgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApO1xuICAgIH1cblxuICAgIGxldCBtdXNpY0lkOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgICBsZXQgbXVzaWNEYXRhOiBBdWRpb1RyYWNrSW5mbyB8IG51bGwgPSBudWxsO1xuICAgIGxldCB0aHVtYm5haWxVcmw6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICAgIGxldCB2aWRlb0NvdW50ID0gMDtcblxuICAgIC8vIFZpZGVvIFVSTCAtIGZldGNoIHZpZGVvIGNvbnRlbnQgdmlhIEluc2lnaHRJUSBBUElcbiAgICBjb25zb2xlLmxvZygnW1NvbmcgVXBsb2FkXSBQcm9jZXNzaW5nIHZpZGVvIFVSTCB2aWEgSW5zaWdodElRLi4uJyk7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgdmlkZW9Db250ZW50ID0gYXdhaXQgaW5zaWdodElRQ2xpZW50LmZldGNoQ29udGVudEJ5VXJsKG5vcm1hbGl6ZWRVcmwpO1xuXG4gICAgICBjb25zb2xlLmxvZygnW1NvbmcgVXBsb2FkXSBWaWRlbyBjb250ZW50IGZldGNoZWQ6JywgSlNPTi5zdHJpbmdpZnkodmlkZW9Db250ZW50LCBudWxsLCAyKSk7XG5cbiAgICAgIGlmICghdmlkZW9Db250ZW50LmF1ZGlvX3RyYWNrX2luZm8pIHtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGVycm9yOiAnTm8gbXVzaWMgZm91bmQnLFxuICAgICAgICAgICAgbWVzc2FnZTogJ0J1IHZpZGVvZGEgdGFuxLFtbGFuYWJpbGlyIGJpciBtw7x6aWsgcGFyw6dhc8SxIGJ1bHVuYW1hZMSxLiBMw7x0ZmVuIMWfYXJrxLEgacOnZXJlbiBiYcWfa2EgYmlyIHZpZGVvIGRlbmV5aW4uJyxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICBtdXNpY0RhdGEgPSB2aWRlb0NvbnRlbnQuYXVkaW9fdHJhY2tfaW5mbztcbiAgICAgIG11c2ljSWQgPSBtdXNpY0RhdGEuaWQ7XG4gICAgICAvLyBVc2UgdGh1bWJuYWlsX3VybCBmcm9tIHZpZGVvIGFzIGNvdmVyIHNpbmNlIGF1ZGlvX3RyYWNrX2luZm8gbWF5IG5vdCBoYXZlIGNvdmVyX3VybFxuICAgICAgdGh1bWJuYWlsVXJsID0gbXVzaWNEYXRhLmNvdmVyX3VybCB8fCB2aWRlb0NvbnRlbnQudGh1bWJuYWlsX3VybDtcbiAgICAgIHZpZGVvQ291bnQgPSB2aWRlb0NvbnRlbnQuZW5nYWdlbWVudD8udmlld19jb3VudCA/IDEgOiAxO1xuXG4gICAgICBjb25zb2xlLmxvZyhgW1NvbmcgVXBsb2FkXSBNdXNpYyBleHRyYWN0ZWQgZnJvbSB2aWRlbzpgLCB7XG4gICAgICAgIHRpdGxlOiBtdXNpY0RhdGEudGl0bGUsXG4gICAgICAgIGFydGlzdDogbXVzaWNEYXRhLmFydGlzdCxcbiAgICAgICAgbXVzaWNJZDogbXVzaWNJZCxcbiAgICAgICAgdGh1bWJuYWlsVXJsOiB0aHVtYm5haWxVcmwsXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChmZXRjaEVycm9yOiBhbnkpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tTb25nIFVwbG9hZF0gRXJyb3IgZmV0Y2hpbmcgdmlkZW8gY29udGVudDonLCBmZXRjaEVycm9yKTtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAge1xuICAgICAgICAgIGVycm9yOiAnQ291bGQgbm90IGZldGNoIHZpZGVvJyxcbiAgICAgICAgICBtZXNzYWdlOiAnVmlkZW8gYmlsZ2lsZXJpIGFsxLFuYW1hZMSxLiBMw7x0ZmVuIFVSTFxcJ3lpIGtvbnRyb2wgZWRpcCB0ZWtyYXIgZGVuZXlpbi4nLFxuICAgICAgICAgIGRldGFpbHM6IGZldGNoRXJyb3IubWVzc2FnZSxcbiAgICAgICAgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApO1xuICAgIH1cblxuICAgIGlmICghbXVzaWNJZCB8fCAhbXVzaWNEYXRhKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHtcbiAgICAgICAgICBlcnJvcjogJ0NvdWxkIG5vdCBleHRyYWN0IG11c2ljIGluZm9ybWF0aW9uJyxcbiAgICAgICAgICBtZXNzYWdlOiAnVW5hYmxlIHRvIGdldCBtdXNpYyBtZXRhZGF0YSBmcm9tIHRoZSBwcm92aWRlZCBVUkwuJyxcbiAgICAgICAgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGlmIHNvbmcgYWxyZWFkeSBleGlzdHNcbiAgICBjb25zdCBleGlzdGluZ1NvbmcgPSBhd2FpdCBwcmlzbWEuc29uZy5maW5kVW5pcXVlKHtcbiAgICAgIHdoZXJlOiB7IHRpa3Rva011c2ljSWQ6IG11c2ljSWQgfSxcbiAgICB9KTtcblxuICAgIGlmIChleGlzdGluZ1NvbmcpIHtcbiAgICAgIC8vIFJldHVybiBleGlzdGluZyBzb25nIGlmIGl0IGJlbG9uZ3MgdG8gdGhpcyB1c2VyXG4gICAgICBpZiAoZXhpc3RpbmdTb25nLmFydGlzdElkID09PSBzZXNzaW9uLnVzZXIuaWQpIHtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIHNvbmc6IGV4aXN0aW5nU29uZyxcbiAgICAgICAgICB2aWRlb0NvdW50OiBleGlzdGluZ1NvbmcudmlkZW9Db3VudCB8fCAwLFxuICAgICAgICAgIG1lc3NhZ2U6ICdTb25nIGFscmVhZHkgZXhpc3RzIGluIHlvdXIgbGlicmFyeScsXG4gICAgICAgICAgZXhpc3Rpbmc6IHRydWUsXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHtcbiAgICAgICAgICBlcnJvcjogJ1NvbmcgYWxyZWFkeSBleGlzdHMnLFxuICAgICAgICAgIG1lc3NhZ2U6ICdUaGlzIHNvbmcgaGFzIGFscmVhZHkgYmVlbiBhZGRlZCBieSBhbm90aGVyIGFydGlzdCcsXG4gICAgICAgICAgc29uZzoge1xuICAgICAgICAgICAgaWQ6IGV4aXN0aW5nU29uZy5pZCxcbiAgICAgICAgICAgIHRpdGxlOiBleGlzdGluZ1NvbmcudGl0bGUsXG4gICAgICAgICAgICBhdXRob3JOYW1lOiBleGlzdGluZ1NvbmcuYXV0aG9yTmFtZSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICB7IHN0YXR1czogNDA5IH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coYFtTb25nIFVwbG9hZF0gQ3JlYXRpbmcgc29uZzogJHttdXNpY0RhdGEudGl0bGV9IGJ5ICR7bXVzaWNEYXRhLmFydGlzdH1gKTtcblxuICAgIC8vIENyZWF0ZSBzb25nIGluIGRhdGFiYXNlXG4gICAgY29uc3Qgc29uZyA9IGF3YWl0IHByaXNtYS5zb25nLmNyZWF0ZSh7XG4gICAgICBkYXRhOiB7XG4gICAgICAgIHRpdGxlOiBtdXNpY0RhdGEudGl0bGUsXG4gICAgICAgIGF1dGhvck5hbWU6IG11c2ljRGF0YS5hcnRpc3QsXG4gICAgICAgIGNvdmVySW1hZ2U6IG11c2ljRGF0YS5jb3Zlcl91cmwgfHwgdGh1bWJuYWlsVXJsIHx8IG51bGwsXG4gICAgICAgIHRpa3Rva1VybDogbm9ybWFsaXplZFVybCxcbiAgICAgICAgdGlrdG9rTXVzaWNJZDogbXVzaWNJZCxcbiAgICAgICAgbXVzaWNDb3ZlclVybDogbXVzaWNEYXRhLmNvdmVyX3VybCB8fCBudWxsLFxuICAgICAgICBtdXNpY1VybDogbXVzaWNEYXRhLnVybCB8fCBub3JtYWxpemVkVXJsLFxuICAgICAgICBkdXJhdGlvbjogbXVzaWNEYXRhLmR1cmF0aW9uIHx8IG51bGwsXG4gICAgICAgIHZpZGVvQ291bnQ6IHZpZGVvQ291bnQgfHwgbnVsbCxcbiAgICAgICAgc3RhdHNMYXN0RmV0Y2hlZDogbmV3IERhdGUoKSxcbiAgICAgICAgYXJ0aXN0OiB7XG4gICAgICAgICAgY29ubmVjdDogeyBpZDogc2Vzc2lvbi51c2VyLmlkIH0sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgY29uc29sZS5sb2coYFtTb25nIFVwbG9hZF0gU29uZyBjcmVhdGVkIHN1Y2Nlc3NmdWxseTogJHtzb25nLmlkfWApO1xuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBzb25nLFxuICAgICAgdmlkZW9Db3VudCxcbiAgICAgIG1lc3NhZ2U6IGBTb25nIFwiJHttdXNpY0RhdGEudGl0bGV9XCIgYnkgJHttdXNpY0RhdGEuYXJ0aXN0fSBhZGRlZCBzdWNjZXNzZnVsbHlgLFxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1tTb25nIFVwbG9hZF0gRXJyb3I6JywgZXJyb3IpO1xuXG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIC8vIEhhbmRsZSBzcGVjaWZpYyBlcnJvcnNcbiAgICAgIGlmIChlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdub3QgY29ubmVjdGVkJykpIHtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGVycm9yOiAnVGlrVG9rIG5vdCBjb25uZWN0ZWQnLFxuICAgICAgICAgICAgbWVzc2FnZTogJ1BsZWFzZSBjb25uZWN0IHlvdXIgVGlrVG9rIGFjY291bnQgZmlyc3QnLFxuICAgICAgICAgICAgcmVxdWlyZXNDb25uZWN0aW9uOiB0cnVlLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgeyBzdGF0dXM6IDQwMyB9XG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIGlmIChlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdJbnNpZ2h0SVEgQVBJIEVycm9yJykpIHtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGVycm9yOiAnQVBJIEVycm9yJyxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7IHN0YXR1czogNTAyIH1cbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ25vdCBjb25maWd1cmVkJykpIHtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGVycm9yOiAnU2VydmljZSBub3QgY29uZmlndXJlZCcsXG4gICAgICAgICAgICBtZXNzYWdlOiAnVGhlIFRpa1RvayBpbnRlZ3JhdGlvbiBzZXJ2aWNlIGlzIG5vdCBwcm9wZXJseSBjb25maWd1cmVkLicsXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7IHN0YXR1czogNTAzIH1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7XG4gICAgICAgIGVycm9yOiAnRmFpbGVkIHRvIHVwbG9hZCBzb25nJyxcbiAgICAgICAgbWVzc2FnZTogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicsXG4gICAgICB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImF1dGgiLCJwcmlzbWEiLCJpbnNpZ2h0SVFDbGllbnQiLCJpc1Rpa1Rva011c2ljVXJsIiwiaXNUaWtUb2tWaWRlb1VybCIsIm5vcm1hbGl6ZVRpa1Rva1VybCIsImR5bmFtaWMiLCJQT1NUIiwicmVxIiwic2Vzc2lvbiIsInVzZXIiLCJpZCIsImpzb24iLCJlcnJvciIsInN0YXR1cyIsImlzSW5zaWdodElRQ29uZmlndXJlZCIsIm1lc3NhZ2UiLCJ0aWt0b2tVcmwiLCJub3JtYWxpemVkVXJsIiwiaXNWaWRlb1VybCIsImlzTXVzaWNVcmwiLCJoaW50IiwibXVzaWNJZCIsIm11c2ljRGF0YSIsInRodW1ibmFpbFVybCIsInZpZGVvQ291bnQiLCJjb25zb2xlIiwibG9nIiwidmlkZW9Db250ZW50IiwiZmV0Y2hDb250ZW50QnlVcmwiLCJKU09OIiwic3RyaW5naWZ5IiwiYXVkaW9fdHJhY2tfaW5mbyIsImNvdmVyX3VybCIsInRodW1ibmFpbF91cmwiLCJlbmdhZ2VtZW50Iiwidmlld19jb3VudCIsInRpdGxlIiwiYXJ0aXN0IiwiZmV0Y2hFcnJvciIsImRldGFpbHMiLCJleGlzdGluZ1NvbmciLCJzb25nIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwidGlrdG9rTXVzaWNJZCIsImFydGlzdElkIiwic3VjY2VzcyIsImV4aXN0aW5nIiwiYXV0aG9yTmFtZSIsImNyZWF0ZSIsImRhdGEiLCJjb3ZlckltYWdlIiwibXVzaWNDb3ZlclVybCIsIm11c2ljVXJsIiwidXJsIiwiZHVyYXRpb24iLCJzdGF0c0xhc3RGZXRjaGVkIiwiRGF0ZSIsImNvbm5lY3QiLCJFcnJvciIsImluY2x1ZGVzIiwicmVxdWlyZXNDb25uZWN0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/songs/upload/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/auth.ts":
/*!*********************!*\
  !*** ./lib/auth.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   auth: () => (/* binding */ auth)\n/* harmony export */ });\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./lib/prisma.ts\");\n/* harmony import */ var _lib_supabase_server__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/supabase/server */ \"(rsc)/./lib/supabase/server.ts\");\n\n\n/**\n * Unified auth function that works in Server Components and Route Handlers.\n * Bridges the gap between Supabase Auth and our Prisma User profiles.\n */ async function auth() {\n    const supabase = (0,_lib_supabase_server__WEBPACK_IMPORTED_MODULE_1__.createClient)();\n    try {\n        // Use getUser() to validate the auth token on the server\n        const { data: { user }, error } = await supabase.auth.getUser();\n        if (error || !user) {\n            return null;\n        }\n        const dbUser = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.user.findUnique({\n            where: {\n                id: user.id\n            }\n        });\n        if (!dbUser) {\n            // If user exists in Auth but not in Prisma, they might be being created by the trigger\n            // but we return null here to be safe, or we could return partial data.\n            return null;\n        }\n        return {\n            user: {\n                id: dbUser.id,\n                email: dbUser.email,\n                name: dbUser.name,\n                role: dbUser.role,\n                plan: dbUser.plan,\n                balance: Number(dbUser.balance),\n                tiktokHandle: dbUser.tiktokHandle\n            },\n            // Check session expiry if needed, or null if we rely on the token validity check we just did\n            expires: null\n        };\n    } catch (err) {\n        console.error(\"Auth helper error:\", err);\n        return null;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvYXV0aC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBc0M7QUFDZTtBQUdyRDs7O0NBR0MsR0FDTSxlQUFlRTtJQUNwQixNQUFNQyxXQUFXRixrRUFBWUE7SUFFN0IsSUFBSTtRQUNGLHlEQUF5RDtRQUN6RCxNQUFNLEVBQUVHLE1BQU0sRUFBRUMsSUFBSSxFQUFFLEVBQUVDLEtBQUssRUFBRSxHQUFHLE1BQU1ILFNBQVNELElBQUksQ0FBQ0ssT0FBTztRQUU3RCxJQUFJRCxTQUFTLENBQUNELE1BQU07WUFDbEIsT0FBTztRQUNUO1FBRUEsTUFBTUcsU0FBUyxNQUFNUiwrQ0FBTUEsQ0FBQ0ssSUFBSSxDQUFDSSxVQUFVLENBQUM7WUFDMUNDLE9BQU87Z0JBQUVDLElBQUlOLEtBQUtNLEVBQUU7WUFBQztRQUN2QjtRQUVBLElBQUksQ0FBQ0gsUUFBUTtZQUNYLHVGQUF1RjtZQUN2Rix1RUFBdUU7WUFDdkUsT0FBTztRQUNUO1FBRUEsT0FBTztZQUNMSCxNQUFNO2dCQUNKTSxJQUFJSCxPQUFPRyxFQUFFO2dCQUNiQyxPQUFPSixPQUFPSSxLQUFLO2dCQUNuQkMsTUFBTUwsT0FBT0ssSUFBSTtnQkFDakJDLE1BQU1OLE9BQU9NLElBQUk7Z0JBQ2pCQyxNQUFNUCxPQUFPTyxJQUFJO2dCQUNqQkMsU0FBU0MsT0FBT1QsT0FBT1EsT0FBTztnQkFDOUJFLGNBQWNWLE9BQU9VLFlBQVk7WUFDbkM7WUFDQSw2RkFBNkY7WUFDN0ZDLFNBQVM7UUFDWDtJQUNGLEVBQUUsT0FBT0MsS0FBSztRQUNaQyxRQUFRZixLQUFLLENBQUMsc0JBQXNCYztRQUNwQyxPQUFPO0lBQ1Q7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3Nlc2FyLXdlYi8uL2xpYi9hdXRoLnRzP2JmN2UiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcHJpc21hIH0gZnJvbSBcIkAvbGliL3ByaXNtYVwiO1xuaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSBcIkAvbGliL3N1cGFiYXNlL3NlcnZlclwiO1xuaW1wb3J0IHsgVXNlclJvbGUgfSBmcm9tIFwiQHByaXNtYS9jbGllbnRcIjtcblxuLyoqXG4gKiBVbmlmaWVkIGF1dGggZnVuY3Rpb24gdGhhdCB3b3JrcyBpbiBTZXJ2ZXIgQ29tcG9uZW50cyBhbmQgUm91dGUgSGFuZGxlcnMuXG4gKiBCcmlkZ2VzIHRoZSBnYXAgYmV0d2VlbiBTdXBhYmFzZSBBdXRoIGFuZCBvdXIgUHJpc21hIFVzZXIgcHJvZmlsZXMuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhdXRoKCkge1xuICBjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudCgpO1xuXG4gIHRyeSB7XG4gICAgLy8gVXNlIGdldFVzZXIoKSB0byB2YWxpZGF0ZSB0aGUgYXV0aCB0b2tlbiBvbiB0aGUgc2VydmVyXG4gICAgY29uc3QgeyBkYXRhOiB7IHVzZXIgfSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLmF1dGguZ2V0VXNlcigpO1xuXG4gICAgaWYgKGVycm9yIHx8ICF1c2VyKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCBkYlVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcbiAgICAgIHdoZXJlOiB7IGlkOiB1c2VyLmlkIH0sXG4gICAgfSk7XG5cbiAgICBpZiAoIWRiVXNlcikge1xuICAgICAgLy8gSWYgdXNlciBleGlzdHMgaW4gQXV0aCBidXQgbm90IGluIFByaXNtYSwgdGhleSBtaWdodCBiZSBiZWluZyBjcmVhdGVkIGJ5IHRoZSB0cmlnZ2VyXG4gICAgICAvLyBidXQgd2UgcmV0dXJuIG51bGwgaGVyZSB0byBiZSBzYWZlLCBvciB3ZSBjb3VsZCByZXR1cm4gcGFydGlhbCBkYXRhLlxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHVzZXI6IHtcbiAgICAgICAgaWQ6IGRiVXNlci5pZCxcbiAgICAgICAgZW1haWw6IGRiVXNlci5lbWFpbCxcbiAgICAgICAgbmFtZTogZGJVc2VyLm5hbWUsXG4gICAgICAgIHJvbGU6IGRiVXNlci5yb2xlIGFzIFVzZXJSb2xlLFxuICAgICAgICBwbGFuOiBkYlVzZXIucGxhbixcbiAgICAgICAgYmFsYW5jZTogTnVtYmVyKGRiVXNlci5iYWxhbmNlKSxcbiAgICAgICAgdGlrdG9rSGFuZGxlOiBkYlVzZXIudGlrdG9rSGFuZGxlLFxuICAgICAgfSxcbiAgICAgIC8vIENoZWNrIHNlc3Npb24gZXhwaXJ5IGlmIG5lZWRlZCwgb3IgbnVsbCBpZiB3ZSByZWx5IG9uIHRoZSB0b2tlbiB2YWxpZGl0eSBjaGVjayB3ZSBqdXN0IGRpZFxuICAgICAgZXhwaXJlczogbnVsbCxcbiAgICB9O1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiQXV0aCBoZWxwZXIgZXJyb3I6XCIsIGVycik7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuXG5cblxuIl0sIm5hbWVzIjpbInByaXNtYSIsImNyZWF0ZUNsaWVudCIsImF1dGgiLCJzdXBhYmFzZSIsImRhdGEiLCJ1c2VyIiwiZXJyb3IiLCJnZXRVc2VyIiwiZGJVc2VyIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwiaWQiLCJlbWFpbCIsIm5hbWUiLCJyb2xlIiwicGxhbiIsImJhbGFuY2UiLCJOdW1iZXIiLCJ0aWt0b2tIYW5kbGUiLCJleHBpcmVzIiwiZXJyIiwiY29uc29sZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/auth.ts\n");

/***/ }),

/***/ "(rsc)/./lib/insightiq/client.ts":
/*!*********************************!*\
  !*** ./lib/insightiq/client.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   InsightIQClient: () => (/* binding */ InsightIQClient),\n/* harmony export */   insightIQClient: () => (/* binding */ insightIQClient)\n/* harmony export */ });\n/**\r\n * InsightIQ API Client\r\n * Handles all interactions with InsightIQ API for TikTok creator data\r\n * \r\n * Authentication: Basic Auth with Base64(Client_ID:Secret)\r\n * Documentation: https://docs.insightiq.ai\r\n * \r\n * IMPORTANT: All API calls must be made from server-side only (never from frontend)\r\n * \r\n * Environments:\r\n * - Sandbox: https://api.sandbox.insightiq.ai (mock data)\r\n * - Staging: https://api.staging.insightiq.ai (testing with limitations)\r\n * - Production: https://api.insightiq.ai (live data)\r\n */ // Maximum retry attempts for transient errors\nconst MAX_RETRIES = 3;\nconst RETRY_DELAY_MS = 1000;\nclass InsightIQClient {\n    constructor(config){\n        this.config = config;\n        this.isConfigured = !!(config.clientId && config.clientSecret && config.baseUrl);\n        // Pre-compute Basic Auth header\n        if (config.clientId && config.clientSecret) {\n            const credentials = `${config.clientId}:${config.clientSecret}`;\n            this.basicAuthHeader = `Basic ${Buffer.from(credentials).toString(\"base64\")}`;\n        } else {\n            this.basicAuthHeader = \"\";\n        }\n    }\n    /**\r\n     * Check if the client is properly configured\r\n     */ checkConfiguration() {\n        if (!this.isConfigured) {\n            throw new Error(\"InsightIQ is not configured. Please set INSIGHTIQ_CLIENT_ID, \" + \"INSIGHTIQ_CLIENT_SECRET, and INSIGHTIQ_BASE_URL environment variables.\");\n        }\n    }\n    /**\r\n     * Check if InsightIQ is configured (without throwing)\r\n     */ isInsightIQConfigured() {\n        return this.isConfigured;\n    }\n    /**\r\n     * Helper: Sleep for a given duration\r\n     */ sleep(ms) {\n        return new Promise((resolve)=>setTimeout(resolve, ms));\n    }\n    /**\r\n     * Helper: Make authenticated API request with retry logic\r\n     * \r\n     * Authentication: Basic Auth with Client_ID:Secret\r\n     * Rate Limit: Max 2 requests per second\r\n     * On 429 error, respects Retry-After header\r\n     */ async request(endpoint, options = {}, useUserToken = false, userToken, retryCount = 0) {\n        this.checkConfiguration();\n        const url = `${this.config.baseUrl}${endpoint}`;\n        const method = options.method || \"GET\";\n        const body = options.body;\n        // Build headers with Basic Auth\n        const headers = {\n            \"Content-Type\": \"application/json\",\n            \"Authorization\": this.basicAuthHeader\n        };\n        // For user-authenticated requests, also include Bearer token\n        if (useUserToken && userToken) {\n            headers[\"X-User-Token\"] = userToken;\n            console.log(\"[InsightIQ] Auth: Basic + User Token\");\n        } else {\n            console.log(\"[InsightIQ] Auth: Basic Auth\");\n        }\n        console.log(\"[InsightIQ] Request URL:\", url);\n        console.log(\"[InsightIQ] Method:\", method);\n        try {\n            const response = await fetch(url, {\n                method,\n                headers,\n                body: body || undefined\n            });\n            if (!response.ok) {\n                const errorText = await response.text();\n                let errorMessage = errorText;\n                let errorCode = `HTTP_${response.status}`;\n                try {\n                    // Try parsing JSON error\n                    const errorJson = JSON.parse(errorText);\n                    errorMessage = errorJson.error?.message || errorJson.message || errorJson.error || errorText;\n                    errorCode = errorJson.error?.code || errorJson.code || errorCode;\n                } catch (e) {\n                // Not JSON, use text\n                }\n                console.error(\"[InsightIQ] API Error:\", response.status, errorMessage);\n                // Handle rate limiting (429)\n                if (response.status === 429) {\n                    const retryAfter = response.headers.get(\"Retry-After\");\n                    const delay = retryAfter ? parseInt(retryAfter, 10) * 1000 : RETRY_DELAY_MS * Math.pow(2, retryCount);\n                    if (retryCount < MAX_RETRIES) {\n                        console.log(`[InsightIQ] Rate limited. Retrying in ${delay}ms (attempt ${retryCount + 1}/${MAX_RETRIES})`);\n                        await this.sleep(delay);\n                        return this.request(endpoint, options, useUserToken, userToken, retryCount + 1);\n                    }\n                }\n                // Retry on server errors (5xx)\n                if (retryCount < MAX_RETRIES && response.status >= 500) {\n                    const delay = RETRY_DELAY_MS * Math.pow(2, retryCount);\n                    console.log(`[InsightIQ] Server error. Retrying in ${delay}ms (attempt ${retryCount + 1}/${MAX_RETRIES})`);\n                    await this.sleep(delay);\n                    return this.request(endpoint, options, useUserToken, userToken, retryCount + 1);\n                }\n                throw new Error(`InsightIQ API Error (${response.status}): ${errorMessage}`);\n            }\n            return response.json();\n        } catch (error) {\n            // Handle network errors with retry\n            if (retryCount < MAX_RETRIES && error instanceof TypeError // Network errors\n            ) {\n                const delay = RETRY_DELAY_MS * Math.pow(2, retryCount);\n                console.log(`[InsightIQ] Network error, retrying in ${delay}ms (attempt ${retryCount + 1}/${MAX_RETRIES})`);\n                await this.sleep(delay);\n                return this.request(endpoint, options, useUserToken, userToken, retryCount + 1);\n            }\n            throw error;\n        }\n    }\n    /**\r\n     * USER API: Create a user in InsightIQ\r\n     * \r\n     * Must be called before creating SDK tokens.\r\n     * The external_id is your internal user ID that maps to InsightIQ's user.\r\n     * \r\n     * @param externalId - Your internal user ID\r\n     * @param name - Optional display name\r\n     */ async createUser(externalId, name) {\n        return this.request(\"/v1/users\", {\n            method: \"POST\",\n            body: JSON.stringify({\n                external_id: externalId,\n                name: name || externalId\n            })\n        });\n    }\n    /**\r\n     * USER API: Get or create a user in InsightIQ\r\n     * \r\n     * Tries to get existing user first, creates if not found.\r\n     * \r\n     * @param externalId - Your internal user ID\r\n     * @param name - Optional display name\r\n     */ async getOrCreateUser(externalId, name) {\n        try {\n            // Try to get existing user\n            const user = await this.request(`/v1/users/external_id/${externalId}`, {\n                method: \"GET\"\n            });\n            console.log(\"[InsightIQ] Found existing user:\", user.id);\n            return user;\n        } catch (error) {\n            // If user doesn't exist (404), create them\n            if (error.message?.includes(\"404\") || error.message?.includes(\"not found\")) {\n                console.log(\"[InsightIQ] User not found, creating new user...\");\n                const newUser = await this.createUser(externalId, name);\n                console.log(\"[InsightIQ] Created new user:\", newUser.id);\n                return newUser;\n            }\n            throw error;\n        }\n    }\n    /**\r\n     * SDK TOKEN API: Create a short-lived SDK token for Connect SDK\r\n     * \r\n     * This token is used to initialize the frontend Connect SDK or redirect flow.\r\n     * Valid for 1 week but should be refreshed before expiry.\r\n     * \r\n     * Note: User must exist in InsightIQ first (use getOrCreateUser)\r\n     * \r\n     * @param insightiqUserId - InsightIQ's user ID (not your internal ID)\r\n     * @param products - Array of products to request access to\r\n     * @param redirectUrl - Optional redirect URL for redirect flow (no SDK needed)\r\n     */ async createSdkToken(insightiqUserId, products = [\n        \"IDENTITY\",\n        \"ENGAGEMENT\"\n    ], redirectUrl) {\n        const body = {\n            user_id: insightiqUserId,\n            products\n        };\n        // Add redirect URL for redirect flow (no frontend SDK needed)\n        if (redirectUrl) {\n            body.redirect_url = redirectUrl;\n        }\n        const response = await this.request(\"/v1/sdk-tokens\", {\n            method: \"POST\",\n            body: JSON.stringify(body)\n        });\n        console.log(\"[InsightIQ] SDK Token Response:\", JSON.stringify(response, null, 2));\n        // Handle different response formats\n        return {\n            sdk_token: response.sdk_token || response.token,\n            sdk_token_id: response.sdk_token_id || response.id,\n            expires_at: response.expires_at,\n            user_id: response.user_id,\n            connect_url: response.connect_url || response.url\n        };\n    }\n    /**\r\n     * Get the Connect URL for redirect flow\r\n     * \r\n     * Use InsightIQ's hosted connect page.\r\n     * \r\n     * @param sdkToken - The SDK token from createSdkToken\r\n     * @param workPlatformId - Optional: skip platform selection (e.g., TikTok ID)\r\n     * @param environment - sandbox, staging, or production\r\n     */ getConnectUrl(sdkToken, workPlatformId, environment) {\n        // InsightIQ/Phyllo Connect URL format\n        // Based on environment\n        let baseConnectUrl;\n        if (environment === \"sandbox\" || this.config.baseUrl.includes(\"sandbox\")) {\n            baseConnectUrl = \"https://connect.sandbox.insightiq.ai\";\n        } else if (environment === \"staging\" || this.config.baseUrl.includes(\"staging\")) {\n            baseConnectUrl = \"https://connect.staging.insightiq.ai\";\n        } else {\n            baseConnectUrl = \"https://connect.insightiq.ai\";\n        }\n        // Build URL with required parameters\n        const params = new URLSearchParams();\n        params.set(\"sdk_token\", sdkToken);\n        if (workPlatformId) {\n            params.set(\"work_platform_id\", workPlatformId);\n        }\n        const url = `${baseConnectUrl}?${params.toString()}`;\n        console.log(\"[InsightIQ] Connect URL:\", url);\n        return url;\n    }\n    /**\r\n     * ACCOUNTS API: Get account details by account ID\r\n     * \r\n     * Returns account information including username, profile picture, etc.\r\n     * \r\n     * @param accountId - The Phyllo/InsightIQ account ID\r\n     */ async getAccount(accountId) {\n        const response = await this.request(`/v1/accounts/${accountId}`, {\n            method: \"GET\"\n        });\n        console.log(\"[InsightIQ] Account details:\", JSON.stringify(response, null, 2));\n        return {\n            id: response.id,\n            user_id: response.user_id,\n            work_platform_id: response.work_platform_id,\n            username: response.username || response.platform_username,\n            platform_username: response.platform_username,\n            platform_profile_name: response.platform_profile_name,\n            platform_profile_picture_url: response.platform_profile_picture_url,\n            status: response.status,\n            created_at: response.created_at,\n            updated_at: response.updated_at\n        };\n    }\n    /**\r\n     * WORK PLATFORMS API: Get all available work platforms\r\n     * \r\n     * Use this to find the correct work_platform_id for TikTok or other platforms.\r\n     */ async getWorkPlatforms() {\n        const response = await this.request(\"/v1/work-platforms\", {\n            method: \"GET\"\n        });\n        console.log(\"[InsightIQ] Work platforms:\", JSON.stringify(response, null, 2));\n        return response;\n    }\n    /**\r\n     * Find TikTok work platform ID\r\n     */ async getTikTokPlatformId() {\n        try {\n            const platforms = await this.getWorkPlatforms();\n            const tiktok = platforms.data?.find((p)=>p.name.toLowerCase().includes(\"tiktok\"));\n            if (tiktok) {\n                console.log(\"[InsightIQ] Found TikTok platform:\", tiktok);\n                return tiktok.id;\n            }\n            return null;\n        } catch (error) {\n            console.error(\"[InsightIQ] Failed to get TikTok platform ID:\", error);\n            return null;\n        }\n    }\n    /**\r\n     * @deprecated Use createSdkToken() instead - this endpoint doesn't exist\r\n     * The Connect SDK handles the OAuth flow on the frontend\r\n     */ async initiateConnection(userId) {\n        // Redirect to using SDK token flow\n        throw new Error(\"initiateConnection is deprecated. Use createSdkToken() to get an SDK token, \" + \"then initialize the Connect SDK on the frontend.\");\n    }\n    /**\r\n     * CONNECT API: Exchange user_token for access_token\r\n     */ async exchangeToken(userToken) {\n        return this.request(\"/v1/connect/token\", {\n            method: \"POST\",\n            body: JSON.stringify({\n                user_token: userToken\n            })\n        });\n    }\n    /**\r\n     * CONNECT API: Refresh access token\r\n     */ async refreshToken(refreshToken) {\n        return this.request(\"/v1/connect/refresh\", {\n            method: \"POST\",\n            body: JSON.stringify({\n                refresh_token: refreshToken\n            })\n        });\n    }\n    /**\r\n     * SOCIAL CONTENT API: Get user's TikTok videos\r\n     */ async getUserContents(accessToken, params) {\n        const queryParams = new URLSearchParams({\n            platform: \"tiktok\",\n            limit: String(params?.limit || 50),\n            offset: String(params?.offset || 0)\n        });\n        if (params?.from_date) {\n            queryParams.set(\"from_date\", params.from_date);\n        }\n        if (params?.to_date) {\n            queryParams.set(\"to_date\", params.to_date);\n        }\n        return this.request(`/v1/social/contents?${queryParams}`, {}, true, accessToken);\n    }\n    /**\r\n     * SOCIAL CONTENT API: Fetch specific content by URL\r\n     * Uses server-side Basic Auth - no user token needed\r\n     * \r\n     * Note: This works for VIDEO URLs, not music/sound page URLs\r\n     * \r\n     * @param url - TikTok video URL (e.g., tiktok.com/@user/video/123)\r\n     * @param workPlatformId - Work platform ID (TikTok = fetched dynamically)\r\n     */ async fetchContentByUrl(url, workPlatformId) {\n        // Get TikTok platform ID if not provided\n        const platformId = workPlatformId || await this.getTikTokPlatformId();\n        if (!platformId) {\n            throw new Error(\"Could not determine TikTok work platform ID\");\n        }\n        const response = await this.request(\"/v1/social/creators/contents/fetch\", {\n            method: \"POST\",\n            body: JSON.stringify({\n                content_url: url,\n                work_platform_id: platformId\n            })\n        });\n        // Handle both array and single object responses\n        const content = Array.isArray(response) ? response[0] : response.data || response;\n        if (!content) {\n            throw new Error(\"No content returned from API\");\n        }\n        return content;\n    }\n    /**\r\n     * CONTENT API: Get content/videos by account ID\r\n     * Uses server-side Basic Auth with account_id (from SDK connection)\r\n     * \r\n     * @param accountId - The Phyllo account ID from SDK connection\r\n     * @param params - Optional pagination and filtering params\r\n     */ async getContentByAccountId(accountId, params) {\n        const queryParams = new URLSearchParams({\n            account_id: accountId,\n            limit: String(params?.limit || 50),\n            offset: String(params?.offset || 0)\n        });\n        if (params?.from_date) {\n            queryParams.set(\"from_date\", params.from_date);\n        }\n        if (params?.to_date) {\n            queryParams.set(\"to_date\", params.to_date);\n        }\n        return this.request(`/v1/social/contents?${queryParams}`, {\n            method: \"GET\"\n        });\n    }\n    /**\r\n     * IDENTITY API: Get profile by account ID\r\n     * Uses server-side Basic Auth\r\n     * \r\n     * @param accountId - The Phyllo account ID\r\n     */ async getProfileByAccountId(accountId) {\n        return this.request(`/v1/profiles?account_id=${accountId}`, {\n            method: \"GET\"\n        });\n    }\n    /**\r\n     * HELPER: Find videos using a specific music track (by account ID)\r\n     * Uses the account_id from SDK connection flow\r\n     */ async findVideosByMusicIdForAccount(accountId, musicId, limit = 100) {\n        const contents = await this.getContentByAccountId(accountId, {\n            limit\n        });\n        return contents.data.filter((content)=>content.audio_track_info?.id === musicId);\n    }\n    /**\r\n     * IDENTITY API: Get user's TikTok profile\r\n     * @deprecated Use getProfileByAccountId instead for SDK flow\r\n     */ async getUserIdentity(accessToken) {\n        return this.request(\"/v1/social/identity?platform=tiktok\", {}, true, accessToken);\n    }\n    /**\r\n     * HELPER: Find videos using a specific music track\r\n     * @deprecated Use findVideosByMusicIdForAccount instead for SDK flow\r\n     */ async findVideosByMusicId(accessToken, musicId, limit = 100) {\n        const contents = await this.getUserContents(accessToken, {\n            limit\n        });\n        return contents.data.filter((content)=>content.audio_track_info?.id === musicId);\n    }\n    /**\r\n     * HELPER: Get all videos (paginated)\r\n     */ async getAllUserContents(accessToken) {\n        const allVideos = [];\n        let offset = 0;\n        const limit = 100;\n        let hasMore = true;\n        while(hasMore){\n            const response = await this.getUserContents(accessToken, {\n                limit,\n                offset\n            });\n            allVideos.push(...response.data);\n            hasMore = response.pagination.has_more;\n            offset += limit;\n            // Safety limit to prevent infinite loops\n            if (offset > 1000) {\n                console.warn(\"Reached safety limit of 1000 videos\");\n                break;\n            }\n        }\n        return allVideos;\n    }\n}\n/**\r\n * Singleton instance for use throughout the application\r\n * Note: Configuration is validated at runtime, not at import time\r\n */ const insightIQClient = new InsightIQClient({\n    clientId: process.env.INSIGHTIQ_CLIENT_ID || \"\",\n    clientSecret: process.env.INSIGHTIQ_CLIENT_SECRET || \"\",\n    baseUrl: process.env.INSIGHTIQ_BASE_URL || \"\",\n    redirectUri: process.env.INSIGHTIQ_REDIRECT_URI || \"\"\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvaW5zaWdodGlxL2NsaWVudC50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBOzs7Ozs7Ozs7Ozs7O0NBYUMsR0FjRCw4Q0FBOEM7QUFDOUMsTUFBTUEsY0FBYztBQUNwQixNQUFNQyxpQkFBaUI7QUFFaEIsTUFBTUM7SUFLVEMsWUFBWUMsTUFBdUIsQ0FBRTtRQUNqQyxJQUFJLENBQUNBLE1BQU0sR0FBR0E7UUFDZCxJQUFJLENBQUNDLFlBQVksR0FBRyxDQUFDLENBQ2pCRCxDQUFBQSxPQUFPRSxRQUFRLElBQ2ZGLE9BQU9HLFlBQVksSUFDbkJILE9BQU9JLE9BQU87UUFHbEIsZ0NBQWdDO1FBQ2hDLElBQUlKLE9BQU9FLFFBQVEsSUFBSUYsT0FBT0csWUFBWSxFQUFFO1lBQ3hDLE1BQU1FLGNBQWMsQ0FBQyxFQUFFTCxPQUFPRSxRQUFRLENBQUMsQ0FBQyxFQUFFRixPQUFPRyxZQUFZLENBQUMsQ0FBQztZQUMvRCxJQUFJLENBQUNHLGVBQWUsR0FBRyxDQUFDLE1BQU0sRUFBRUMsT0FBT0MsSUFBSSxDQUFDSCxhQUFhSSxRQUFRLENBQUMsVUFBVSxDQUFDO1FBQ2pGLE9BQU87WUFDSCxJQUFJLENBQUNILGVBQWUsR0FBRztRQUMzQjtJQUNKO0lBRUE7O0tBRUMsR0FDRCxxQkFBa0M7UUFDOUIsSUFBSSxDQUFDLElBQUksQ0FBQ0wsWUFBWSxFQUFFO1lBQ3BCLE1BQU0sSUFBSVUsTUFDTixrRUFDQTtRQUVSO0lBQ0o7SUFFQTs7S0FFQyxHQUNELHdCQUF3QztRQUNwQyxPQUFPLElBQUksQ0FBQ1YsWUFBWTtJQUM1QjtJQUVBOztLQUVDLEdBQ0QsTUFBY2EsRUFBVSxFQUFpQjtRQUNyQyxPQUFPLElBQUlDLFFBQVFDLENBQUFBLFVBQVdDLFdBQVdELFNBQVNGO0lBQ3REO0lBRUE7Ozs7OztLQU1DLEdBQ0QsTUFBY0ksUUFDVkMsUUFBZ0IsRUFDaEJDLFVBQXVCLENBQUMsQ0FBQyxFQUN6QkMsZUFBZSxLQUFLLEVBQ3BCQyxTQUFrQixFQUNsQkMsYUFBYSxDQUFDLEVBQ0o7UUFDVixJQUFJLENBQUNiLGtCQUFrQjtRQUV2QixNQUFNYyxNQUFNLENBQUMsRUFBRSxJQUFJLENBQUN4QixNQUFNLENBQUNJLE9BQU8sQ0FBQyxFQUFFZSxTQUFTLENBQUM7UUFDL0MsTUFBTU0sU0FBU0wsUUFBUUssTUFBTSxJQUFJO1FBQ2pDLE1BQU1DLE9BQU9OLFFBQVFNLElBQUk7UUFFekIsZ0NBQWdDO1FBQ2hDLE1BQU1DLFVBQWtDO1lBQ3BDLGdCQUFnQjtZQUNoQixpQkFBaUIsSUFBSSxDQUFDckIsZUFBZTtRQUN6QztRQUVBLDZEQUE2RDtRQUM3RCxJQUFJZSxnQkFBZ0JDLFdBQVc7WUFDM0JLLE9BQU8sQ0FBQyxlQUFlLEdBQUdMO1lBQzFCTSxRQUFRQyxHQUFHLENBQUM7UUFDaEIsT0FBTztZQUNIRCxRQUFRQyxHQUFHLENBQUM7UUFDaEI7UUFFQUQsUUFBUUMsR0FBRyxDQUFDLDRCQUE0Qkw7UUFDeENJLFFBQVFDLEdBQUcsQ0FBQyx1QkFBdUJKO1FBRW5DLElBQUk7WUFDQSxNQUFNSyxXQUFXLE1BQU1DLE1BQU1QLEtBQUs7Z0JBQzlCQztnQkFDQUU7Z0JBQ0FELE1BQU1BLFFBQVFNO1lBQ2xCO1lBRUEsSUFBSSxDQUFDRixTQUFTRyxFQUFFLEVBQUU7Z0JBQ2QsTUFBTUMsWUFBWSxNQUFNSixTQUFTSyxJQUFJO2dCQUNyQyxJQUFJQyxlQUFlRjtnQkFDbkIsSUFBSUcsWUFBWSxDQUFDLEtBQUssRUFBRVAsU0FBU1EsTUFBTSxDQUFDLENBQUM7Z0JBRXpDLElBQUk7b0JBQ0EseUJBQXlCO29CQUN6QixNQUFNQyxZQUFZQyxLQUFLQyxLQUFLLENBQUNQO29CQUM3QkUsZUFBZUcsVUFBVUcsS0FBSyxFQUFFQyxXQUFXSixVQUFVSSxPQUFPLElBQUlKLFVBQVVHLEtBQUssSUFBSVI7b0JBQ25GRyxZQUFZRSxVQUFVRyxLQUFLLEVBQUVFLFFBQVFMLFVBQVVLLElBQUksSUFBSVA7Z0JBQzNELEVBQUUsT0FBT1EsR0FBRztnQkFDUixxQkFBcUI7Z0JBQ3pCO2dCQUVBakIsUUFBUWMsS0FBSyxDQUFDLDBCQUEwQlosU0FBU1EsTUFBTSxFQUFFRjtnQkFFekQsNkJBQTZCO2dCQUM3QixJQUFJTixTQUFTUSxNQUFNLEtBQUssS0FBSztvQkFDekIsTUFBTVEsYUFBYWhCLFNBQVNILE9BQU8sQ0FBQ29CLEdBQUcsQ0FBQztvQkFDeEMsTUFBTUMsUUFBUUYsYUFBYUcsU0FBU0gsWUFBWSxNQUFNLE9BQU9qRCxpQkFBaUJxRCxLQUFLQyxHQUFHLENBQUMsR0FBRzVCO29CQUUxRixJQUFJQSxhQUFhM0IsYUFBYTt3QkFDMUJnQyxRQUFRQyxHQUFHLENBQUMsQ0FBQyxzQ0FBc0MsRUFBRW1CLE1BQU0sWUFBWSxFQUFFekIsYUFBYSxFQUFFLENBQUMsRUFBRTNCLFlBQVksQ0FBQyxDQUFDO3dCQUN6RyxNQUFNLElBQUksQ0FBQ2lCLEtBQUssQ0FBQ21DO3dCQUNqQixPQUFPLElBQUksQ0FBQzlCLE9BQU8sQ0FBSUMsVUFBVUMsU0FBU0MsY0FBY0MsV0FBV0MsYUFBYTtvQkFDcEY7Z0JBQ0o7Z0JBRUEsK0JBQStCO2dCQUMvQixJQUFJQSxhQUFhM0IsZUFBZWtDLFNBQVNRLE1BQU0sSUFBSSxLQUFLO29CQUNwRCxNQUFNVSxRQUFRbkQsaUJBQWlCcUQsS0FBS0MsR0FBRyxDQUFDLEdBQUc1QjtvQkFDM0NLLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLHNDQUFzQyxFQUFFbUIsTUFBTSxZQUFZLEVBQUV6QixhQUFhLEVBQUUsQ0FBQyxFQUFFM0IsWUFBWSxDQUFDLENBQUM7b0JBQ3pHLE1BQU0sSUFBSSxDQUFDaUIsS0FBSyxDQUFDbUM7b0JBQ2pCLE9BQU8sSUFBSSxDQUFDOUIsT0FBTyxDQUFJQyxVQUFVQyxTQUFTQyxjQUFjQyxXQUFXQyxhQUFhO2dCQUNwRjtnQkFFQSxNQUFNLElBQUlaLE1BQU0sQ0FBQyxxQkFBcUIsRUFBRW1CLFNBQVNRLE1BQU0sQ0FBQyxHQUFHLEVBQUVGLGFBQWEsQ0FBQztZQUMvRTtZQUVBLE9BQU9OLFNBQVNzQixJQUFJO1FBQ3hCLEVBQUUsT0FBT1YsT0FBTztZQUNaLG1DQUFtQztZQUNuQyxJQUNJbkIsYUFBYTNCLGVBQ2I4QyxpQkFBaUJXLFVBQVUsaUJBQWlCO2NBQzlDO2dCQUNFLE1BQU1MLFFBQVFuRCxpQkFBaUJxRCxLQUFLQyxHQUFHLENBQUMsR0FBRzVCO2dCQUMzQ0ssUUFBUUMsR0FBRyxDQUFDLENBQUMsdUNBQXVDLEVBQUVtQixNQUFNLFlBQVksRUFBRXpCLGFBQWEsRUFBRSxDQUFDLEVBQUUzQixZQUFZLENBQUMsQ0FBQztnQkFDMUcsTUFBTSxJQUFJLENBQUNpQixLQUFLLENBQUNtQztnQkFDakIsT0FBTyxJQUFJLENBQUM5QixPQUFPLENBQUlDLFVBQVVDLFNBQVNDLGNBQWNDLFdBQVdDLGFBQWE7WUFDcEY7WUFDQSxNQUFNbUI7UUFDVjtJQUNKO0lBRUE7Ozs7Ozs7O0tBUUMsR0FDRCxNQUFNWSxXQUNGQyxVQUFrQixFQUNsQkMsSUFBYSxFQUNtRDtRQUNoRSxPQUFPLElBQUksQ0FBQ3RDLE9BQU8sQ0FDZixhQUNBO1lBQ0lPLFFBQVE7WUFDUkMsTUFBTWMsS0FBS2lCLFNBQVMsQ0FBQztnQkFDakJDLGFBQWFIO2dCQUNiQyxNQUFNQSxRQUFRRDtZQUNsQjtRQUNKO0lBRVI7SUFFQTs7Ozs7OztLQU9DLEdBQ0QsTUFBTUksZ0JBQ0ZKLFVBQWtCLEVBQ2xCQyxJQUFhLEVBQytCO1FBQzVDLElBQUk7WUFDQSwyQkFBMkI7WUFDM0IsTUFBTUksT0FBTyxNQUFNLElBQUksQ0FBQzFDLE9BQU8sQ0FDM0IsQ0FBQyxzQkFBc0IsRUFBRXFDLFdBQVcsQ0FBQyxFQUNyQztnQkFBRTlCLFFBQVE7WUFBTTtZQUVwQkcsUUFBUUMsR0FBRyxDQUFDLG9DQUFvQytCLEtBQUtDLEVBQUU7WUFDdkQsT0FBT0Q7UUFDWCxFQUFFLE9BQU9sQixPQUFZO1lBQ2pCLDJDQUEyQztZQUMzQyxJQUFJQSxNQUFNQyxPQUFPLEVBQUVtQixTQUFTLFVBQVVwQixNQUFNQyxPQUFPLEVBQUVtQixTQUFTLGNBQWM7Z0JBQ3hFbEMsUUFBUUMsR0FBRyxDQUFDO2dCQUNaLE1BQU1rQyxVQUFVLE1BQU0sSUFBSSxDQUFDVCxVQUFVLENBQUNDLFlBQVlDO2dCQUNsRDVCLFFBQVFDLEdBQUcsQ0FBQyxpQ0FBaUNrQyxRQUFRRixFQUFFO2dCQUN2RCxPQUFPRTtZQUNYO1lBQ0EsTUFBTXJCO1FBQ1Y7SUFDSjtJQUVBOzs7Ozs7Ozs7OztLQVdDLEdBQ0QsTUFBTXNCLGVBQ0ZDLGVBQXVCLEVBQ3ZCQyxXQUFxQjtRQUFDO1FBQVk7S0FBYSxFQUMvQ0MsV0FBb0IsRUFPckI7UUFDQyxNQUFNekMsT0FBNEI7WUFDOUIwQyxTQUFTSDtZQUNUQztRQUNKO1FBRUEsOERBQThEO1FBQzlELElBQUlDLGFBQWE7WUFDYnpDLEtBQUsyQyxZQUFZLEdBQUdGO1FBQ3hCO1FBRUEsTUFBTXJDLFdBQVcsTUFBTSxJQUFJLENBQUNaLE9BQU8sQ0FDL0Isa0JBQ0E7WUFDSU8sUUFBUTtZQUNSQyxNQUFNYyxLQUFLaUIsU0FBUyxDQUFDL0I7UUFDekI7UUFHSkUsUUFBUUMsR0FBRyxDQUFDLG1DQUFtQ1csS0FBS2lCLFNBQVMsQ0FBQzNCLFVBQVUsTUFBTTtRQUU5RSxvQ0FBb0M7UUFDcEMsT0FBTztZQUNId0MsV0FBV3hDLFNBQVN3QyxTQUFTLElBQUl4QyxTQUFTeUMsS0FBSztZQUMvQ0MsY0FBYzFDLFNBQVMwQyxZQUFZLElBQUkxQyxTQUFTK0IsRUFBRTtZQUNsRFksWUFBWTNDLFNBQVMyQyxVQUFVO1lBQy9CTCxTQUFTdEMsU0FBU3NDLE9BQU87WUFDekJNLGFBQWE1QyxTQUFTNEMsV0FBVyxJQUFJNUMsU0FBU04sR0FBRztRQUNyRDtJQUNKO0lBRUE7Ozs7Ozs7O0tBUUMsR0FDRG1ELGNBQWNDLFFBQWdCLEVBQUVDLGNBQXVCLEVBQUVDLFdBQW9CLEVBQVU7UUFDbkYsc0NBQXNDO1FBQ3RDLHVCQUF1QjtRQUN2QixJQUFJQztRQUVKLElBQUlELGdCQUFnQixhQUFhLElBQUksQ0FBQzlFLE1BQU0sQ0FBQ0ksT0FBTyxDQUFDMEQsUUFBUSxDQUFDLFlBQVk7WUFDdEVpQixpQkFBaUI7UUFDckIsT0FBTyxJQUFJRCxnQkFBZ0IsYUFBYSxJQUFJLENBQUM5RSxNQUFNLENBQUNJLE9BQU8sQ0FBQzBELFFBQVEsQ0FBQyxZQUFZO1lBQzdFaUIsaUJBQWlCO1FBQ3JCLE9BQU87WUFDSEEsaUJBQWlCO1FBQ3JCO1FBRUEscUNBQXFDO1FBQ3JDLE1BQU1DLFNBQVMsSUFBSUM7UUFDbkJELE9BQU9FLEdBQUcsQ0FBQyxhQUFhTjtRQUV4QixJQUFJQyxnQkFBZ0I7WUFDaEJHLE9BQU9FLEdBQUcsQ0FBQyxvQkFBb0JMO1FBQ25DO1FBRUEsTUFBTXJELE1BQU0sQ0FBQyxFQUFFdUQsZUFBZSxDQUFDLEVBQUVDLE9BQU92RSxRQUFRLEdBQUcsQ0FBQztRQUNwRG1CLFFBQVFDLEdBQUcsQ0FBQyw0QkFBNEJMO1FBRXhDLE9BQU9BO0lBQ1g7SUFFQTs7Ozs7O0tBTUMsR0FDRCxNQUFNMkQsV0FBV0MsU0FBaUIsRUFXL0I7UUFDQyxNQUFNdEQsV0FBVyxNQUFNLElBQUksQ0FBQ1osT0FBTyxDQUMvQixDQUFDLGFBQWEsRUFBRWtFLFVBQVUsQ0FBQyxFQUMzQjtZQUFFM0QsUUFBUTtRQUFNO1FBR3BCRyxRQUFRQyxHQUFHLENBQUMsZ0NBQWdDVyxLQUFLaUIsU0FBUyxDQUFDM0IsVUFBVSxNQUFNO1FBRTNFLE9BQU87WUFDSCtCLElBQUkvQixTQUFTK0IsRUFBRTtZQUNmTyxTQUFTdEMsU0FBU3NDLE9BQU87WUFDekJpQixrQkFBa0J2RCxTQUFTdUQsZ0JBQWdCO1lBQzNDQyxVQUFVeEQsU0FBU3dELFFBQVEsSUFBSXhELFNBQVN5RCxpQkFBaUI7WUFDekRBLG1CQUFtQnpELFNBQVN5RCxpQkFBaUI7WUFDN0NDLHVCQUF1QjFELFNBQVMwRCxxQkFBcUI7WUFDckRDLDhCQUE4QjNELFNBQVMyRCw0QkFBNEI7WUFDbkVuRCxRQUFRUixTQUFTUSxNQUFNO1lBQ3ZCb0QsWUFBWTVELFNBQVM0RCxVQUFVO1lBQy9CQyxZQUFZN0QsU0FBUzZELFVBQVU7UUFDbkM7SUFDSjtJQUVBOzs7O0tBSUMsR0FDRCxNQUFNQyxtQkFRSDtRQUNDLE1BQU05RCxXQUFXLE1BQU0sSUFBSSxDQUFDWixPQUFPLENBQy9CLHNCQUNBO1lBQUVPLFFBQVE7UUFBTTtRQUdwQkcsUUFBUUMsR0FBRyxDQUFDLCtCQUErQlcsS0FBS2lCLFNBQVMsQ0FBQzNCLFVBQVUsTUFBTTtRQUMxRSxPQUFPQTtJQUNYO0lBRUE7O0tBRUMsR0FDRCxNQUFNK0Qsc0JBQThDO1FBQ2hELElBQUk7WUFDQSxNQUFNQyxZQUFZLE1BQU0sSUFBSSxDQUFDRixnQkFBZ0I7WUFDN0MsTUFBTUcsU0FBU0QsVUFBVUUsSUFBSSxFQUFFQyxLQUMzQixDQUFDQyxJQUFNQSxFQUFFMUMsSUFBSSxDQUFDMkMsV0FBVyxHQUFHckMsUUFBUSxDQUFDO1lBRXpDLElBQUlpQyxRQUFRO2dCQUNSbkUsUUFBUUMsR0FBRyxDQUFDLHNDQUFzQ2tFO2dCQUNsRCxPQUFPQSxPQUFPbEMsRUFBRTtZQUNwQjtZQUNBLE9BQU87UUFDWCxFQUFFLE9BQU9uQixPQUFPO1lBQ1pkLFFBQVFjLEtBQUssQ0FBQyxpREFBaURBO1lBQy9ELE9BQU87UUFDWDtJQUNKO0lBRUE7OztLQUdDLEdBQ0QsTUFBTTBELG1CQUFtQkMsTUFBZSxFQUFvQztRQUN4RSxtQ0FBbUM7UUFDbkMsTUFBTSxJQUFJMUYsTUFDTixpRkFDQTtJQUVSO0lBRUE7O0tBRUMsR0FDRCxNQUFNMkYsY0FBY2hGLFNBQWlCLEVBQWtDO1FBQ25FLE9BQU8sSUFBSSxDQUFDSixPQUFPLENBQ2YscUJBQ0E7WUFDSU8sUUFBUTtZQUNSQyxNQUFNYyxLQUFLaUIsU0FBUyxDQUFDO2dCQUNqQjhDLFlBQVlqRjtZQUNoQjtRQUNKO0lBRVI7SUFFQTs7S0FFQyxHQUNELE1BQU1rRixhQUFhQSxZQUFvQixFQUFrQztRQUNyRSxPQUFPLElBQUksQ0FBQ3RGLE9BQU8sQ0FDZix1QkFDQTtZQUNJTyxRQUFRO1lBQ1JDLE1BQU1jLEtBQUtpQixTQUFTLENBQUM7Z0JBQ2pCZ0QsZUFBZUQ7WUFDbkI7UUFDSjtJQUVSO0lBRUE7O0tBRUMsR0FDRCxNQUFNRSxnQkFDRkMsV0FBbUIsRUFDbkIzQixNQUFtQyxFQUNWO1FBQ3pCLE1BQU00QixjQUFjLElBQUkzQixnQkFBZ0I7WUFDcEM0QixVQUFVO1lBQ1ZDLE9BQU9DLE9BQU8vQixRQUFROEIsU0FBUztZQUMvQkUsUUFBUUQsT0FBTy9CLFFBQVFnQyxVQUFVO1FBQ3JDO1FBRUEsSUFBSWhDLFFBQVFpQyxXQUFXO1lBQ25CTCxZQUFZMUIsR0FBRyxDQUFDLGFBQWFGLE9BQU9pQyxTQUFTO1FBQ2pEO1FBQ0EsSUFBSWpDLFFBQVFrQyxTQUFTO1lBQ2pCTixZQUFZMUIsR0FBRyxDQUFDLFdBQVdGLE9BQU9rQyxPQUFPO1FBQzdDO1FBRUEsT0FBTyxJQUFJLENBQUNoRyxPQUFPLENBQ2YsQ0FBQyxvQkFBb0IsRUFBRTBGLFlBQVksQ0FBQyxFQUNwQyxDQUFDLEdBQ0QsTUFDQUQ7SUFFUjtJQUVBOzs7Ozs7OztLQVFDLEdBQ0QsTUFBTVEsa0JBQWtCM0YsR0FBVyxFQUFFcUQsY0FBdUIsRUFBMEI7UUFDbEYseUNBQXlDO1FBQ3pDLE1BQU11QyxhQUFhdkMsa0JBQWtCLE1BQU0sSUFBSSxDQUFDZ0IsbUJBQW1CO1FBRW5FLElBQUksQ0FBQ3VCLFlBQVk7WUFDYixNQUFNLElBQUl6RyxNQUFNO1FBQ3BCO1FBRUEsTUFBTW1CLFdBQVcsTUFBTSxJQUFJLENBQUNaLE9BQU8sQ0FDL0Isc0NBQ0E7WUFDSU8sUUFBUTtZQUNSQyxNQUFNYyxLQUFLaUIsU0FBUyxDQUFDO2dCQUNqQjRELGFBQWE3RjtnQkFDYjZELGtCQUFrQitCO1lBQ3RCO1FBQ0o7UUFHSixnREFBZ0Q7UUFDaEQsTUFBTUUsVUFBVUMsTUFBTUMsT0FBTyxDQUFDMUYsWUFBWUEsUUFBUSxDQUFDLEVBQUUsR0FBSUEsU0FBU2tFLElBQUksSUFBSWxFO1FBRTFFLElBQUksQ0FBQ3dGLFNBQVM7WUFDVixNQUFNLElBQUkzRyxNQUFNO1FBQ3BCO1FBRUEsT0FBTzJHO0lBQ1g7SUFFQTs7Ozs7O0tBTUMsR0FDRCxNQUFNRyxzQkFDRnJDLFNBQWlCLEVBQ2pCSixNQUFrRixFQUN6RDtRQUN6QixNQUFNNEIsY0FBYyxJQUFJM0IsZ0JBQWdCO1lBQ3BDeUMsWUFBWXRDO1lBQ1owQixPQUFPQyxPQUFPL0IsUUFBUThCLFNBQVM7WUFDL0JFLFFBQVFELE9BQU8vQixRQUFRZ0MsVUFBVTtRQUNyQztRQUVBLElBQUloQyxRQUFRaUMsV0FBVztZQUNuQkwsWUFBWTFCLEdBQUcsQ0FBQyxhQUFhRixPQUFPaUMsU0FBUztRQUNqRDtRQUNBLElBQUlqQyxRQUFRa0MsU0FBUztZQUNqQk4sWUFBWTFCLEdBQUcsQ0FBQyxXQUFXRixPQUFPa0MsT0FBTztRQUM3QztRQUVBLE9BQU8sSUFBSSxDQUFDaEcsT0FBTyxDQUNmLENBQUMsb0JBQW9CLEVBQUUwRixZQUFZLENBQUMsRUFDcEM7WUFBRW5GLFFBQVE7UUFBTTtJQUV4QjtJQUVBOzs7OztLQUtDLEdBQ0QsTUFBTWtHLHNCQUFzQnZDLFNBQWlCLEVBQWdCO1FBQ3pELE9BQU8sSUFBSSxDQUFDbEUsT0FBTyxDQUNmLENBQUMsd0JBQXdCLEVBQUVrRSxVQUFVLENBQUMsRUFDdEM7WUFBRTNELFFBQVE7UUFBTTtJQUV4QjtJQUVBOzs7S0FHQyxHQUNELE1BQU1tRyw4QkFDRnhDLFNBQWlCLEVBQ2pCeUMsT0FBZSxFQUNmZixRQUFRLEdBQUcsRUFDYTtRQUN4QixNQUFNZ0IsV0FBVyxNQUFNLElBQUksQ0FBQ0wscUJBQXFCLENBQUNyQyxXQUFXO1lBQUUwQjtRQUFNO1FBRXJFLE9BQU9nQixTQUFTOUIsSUFBSSxDQUFDK0IsTUFBTSxDQUN2QixDQUFDVCxVQUFZQSxRQUFRVSxnQkFBZ0IsRUFBRW5FLE9BQU9nRTtJQUV0RDtJQUVBOzs7S0FHQyxHQUNELE1BQU1JLGdCQUFnQnRCLFdBQW1CLEVBQXlCO1FBQzlELE9BQU8sSUFBSSxDQUFDekYsT0FBTyxDQUNmLHVDQUNBLENBQUMsR0FDRCxNQUNBeUY7SUFFUjtJQUVBOzs7S0FHQyxHQUNELE1BQU11QixvQkFDRnZCLFdBQW1CLEVBQ25Ca0IsT0FBZSxFQUNmZixRQUFRLEdBQUcsRUFDYTtRQUN4QixNQUFNZ0IsV0FBVyxNQUFNLElBQUksQ0FBQ3BCLGVBQWUsQ0FBQ0MsYUFBYTtZQUFFRztRQUFNO1FBRWpFLE9BQU9nQixTQUFTOUIsSUFBSSxDQUFDK0IsTUFBTSxDQUN2QixDQUFDVCxVQUFZQSxRQUFRVSxnQkFBZ0IsRUFBRW5FLE9BQU9nRTtJQUV0RDtJQUVBOztLQUVDLEdBQ0QsTUFBTU0sbUJBQW1CeEIsV0FBbUIsRUFBNEI7UUFDcEUsTUFBTXlCLFlBQTZCLEVBQUU7UUFDckMsSUFBSXBCLFNBQVM7UUFDYixNQUFNRixRQUFRO1FBQ2QsSUFBSXVCLFVBQVU7UUFFZCxNQUFPQSxRQUFTO1lBQ1osTUFBTXZHLFdBQVcsTUFBTSxJQUFJLENBQUM0RSxlQUFlLENBQUNDLGFBQWE7Z0JBQ3JERztnQkFDQUU7WUFDSjtZQUVBb0IsVUFBVUUsSUFBSSxJQUFJeEcsU0FBU2tFLElBQUk7WUFDL0JxQyxVQUFVdkcsU0FBU3lHLFVBQVUsQ0FBQ0MsUUFBUTtZQUN0Q3hCLFVBQVVGO1lBRVYseUNBQXlDO1lBQ3pDLElBQUlFLFNBQVMsTUFBTTtnQkFDZnBGLFFBQVE2RyxJQUFJLENBQUM7Z0JBQ2I7WUFDSjtRQUNKO1FBRUEsT0FBT0w7SUFDWDtBQUNKO0FBRUE7OztDQUdDLEdBQ00sTUFBTU0sa0JBQWtCLElBQUk1SSxnQkFBZ0I7SUFDL0NJLFVBQVV5SSxRQUFRQyxHQUFHLENBQUNDLG1CQUFtQixJQUFJO0lBQzdDMUksY0FBY3dJLFFBQVFDLEdBQUcsQ0FBQ0UsdUJBQXVCLElBQUk7SUFDckQxSSxTQUFTdUksUUFBUUMsR0FBRyxDQUFDRyxrQkFBa0IsSUFBSTtJQUMzQ0MsYUFBYUwsUUFBUUMsR0FBRyxDQUFDSyxzQkFBc0IsSUFBSTtBQUN2RCxHQUFHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2VzYXItd2ViLy4vbGliL2luc2lnaHRpcS9jbGllbnQudHM/ZTMxYiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogSW5zaWdodElRIEFQSSBDbGllbnRcclxuICogSGFuZGxlcyBhbGwgaW50ZXJhY3Rpb25zIHdpdGggSW5zaWdodElRIEFQSSBmb3IgVGlrVG9rIGNyZWF0b3IgZGF0YVxyXG4gKiBcclxuICogQXV0aGVudGljYXRpb246IEJhc2ljIEF1dGggd2l0aCBCYXNlNjQoQ2xpZW50X0lEOlNlY3JldClcclxuICogRG9jdW1lbnRhdGlvbjogaHR0cHM6Ly9kb2NzLmluc2lnaHRpcS5haVxyXG4gKiBcclxuICogSU1QT1JUQU5UOiBBbGwgQVBJIGNhbGxzIG11c3QgYmUgbWFkZSBmcm9tIHNlcnZlci1zaWRlIG9ubHkgKG5ldmVyIGZyb20gZnJvbnRlbmQpXHJcbiAqIFxyXG4gKiBFbnZpcm9ubWVudHM6XHJcbiAqIC0gU2FuZGJveDogaHR0cHM6Ly9hcGkuc2FuZGJveC5pbnNpZ2h0aXEuYWkgKG1vY2sgZGF0YSlcclxuICogLSBTdGFnaW5nOiBodHRwczovL2FwaS5zdGFnaW5nLmluc2lnaHRpcS5haSAodGVzdGluZyB3aXRoIGxpbWl0YXRpb25zKVxyXG4gKiAtIFByb2R1Y3Rpb246IGh0dHBzOi8vYXBpLmluc2lnaHRpcS5haSAobGl2ZSBkYXRhKVxyXG4gKi9cclxuXHJcbmltcG9ydCB7XHJcbiAgICBJbnNpZ2h0SVFDb25maWcsXHJcbiAgICBDb25uZWN0SW5pdGlhdGVSZXNwb25zZSxcclxuICAgIFRva2VuRXhjaGFuZ2VSZXNwb25zZSxcclxuICAgIENvbnRlbnRzUmVzcG9uc2UsXHJcbiAgICBUaWtUb2tDb250ZW50LFxyXG4gICAgR2V0Q29udGVudHNQYXJhbXMsXHJcbiAgICBGZXRjaENvbnRlbnRSZXNwb25zZSxcclxuICAgIFVzZXJJZGVudGl0eSxcclxuICAgIEluc2lnaHRJUUVycm9yLFxyXG59IGZyb20gJy4vdHlwZXMnO1xyXG5cclxuLy8gTWF4aW11bSByZXRyeSBhdHRlbXB0cyBmb3IgdHJhbnNpZW50IGVycm9yc1xyXG5jb25zdCBNQVhfUkVUUklFUyA9IDM7XHJcbmNvbnN0IFJFVFJZX0RFTEFZX01TID0gMTAwMDtcclxuXHJcbmV4cG9ydCBjbGFzcyBJbnNpZ2h0SVFDbGllbnQge1xyXG4gICAgcHJpdmF0ZSBjb25maWc6IEluc2lnaHRJUUNvbmZpZztcclxuICAgIHByaXZhdGUgaXNDb25maWd1cmVkOiBib29sZWFuO1xyXG4gICAgcHJpdmF0ZSBiYXNpY0F1dGhIZWFkZXI6IHN0cmluZztcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihjb25maWc6IEluc2lnaHRJUUNvbmZpZykge1xyXG4gICAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xyXG4gICAgICAgIHRoaXMuaXNDb25maWd1cmVkID0gISEoXHJcbiAgICAgICAgICAgIGNvbmZpZy5jbGllbnRJZCAmJlxyXG4gICAgICAgICAgICBjb25maWcuY2xpZW50U2VjcmV0ICYmXHJcbiAgICAgICAgICAgIGNvbmZpZy5iYXNlVXJsXHJcbiAgICAgICAgKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBQcmUtY29tcHV0ZSBCYXNpYyBBdXRoIGhlYWRlclxyXG4gICAgICAgIGlmIChjb25maWcuY2xpZW50SWQgJiYgY29uZmlnLmNsaWVudFNlY3JldCkge1xyXG4gICAgICAgICAgICBjb25zdCBjcmVkZW50aWFscyA9IGAke2NvbmZpZy5jbGllbnRJZH06JHtjb25maWcuY2xpZW50U2VjcmV0fWA7XHJcbiAgICAgICAgICAgIHRoaXMuYmFzaWNBdXRoSGVhZGVyID0gYEJhc2ljICR7QnVmZmVyLmZyb20oY3JlZGVudGlhbHMpLnRvU3RyaW5nKCdiYXNlNjQnKX1gO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuYmFzaWNBdXRoSGVhZGVyID0gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2hlY2sgaWYgdGhlIGNsaWVudCBpcyBwcm9wZXJseSBjb25maWd1cmVkXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBjaGVja0NvbmZpZ3VyYXRpb24oKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzQ29uZmlndXJlZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAnSW5zaWdodElRIGlzIG5vdCBjb25maWd1cmVkLiBQbGVhc2Ugc2V0IElOU0lHSFRJUV9DTElFTlRfSUQsICcgK1xyXG4gICAgICAgICAgICAgICAgJ0lOU0lHSFRJUV9DTElFTlRfU0VDUkVULCBhbmQgSU5TSUdIVElRX0JBU0VfVVJMIGVudmlyb25tZW50IHZhcmlhYmxlcy4nXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2hlY2sgaWYgSW5zaWdodElRIGlzIGNvbmZpZ3VyZWQgKHdpdGhvdXQgdGhyb3dpbmcpXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBpc0luc2lnaHRJUUNvbmZpZ3VyZWQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNDb25maWd1cmVkO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGVscGVyOiBTbGVlcCBmb3IgYSBnaXZlbiBkdXJhdGlvblxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHNsZWVwKG1zOiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIZWxwZXI6IE1ha2UgYXV0aGVudGljYXRlZCBBUEkgcmVxdWVzdCB3aXRoIHJldHJ5IGxvZ2ljXHJcbiAgICAgKiBcclxuICAgICAqIEF1dGhlbnRpY2F0aW9uOiBCYXNpYyBBdXRoIHdpdGggQ2xpZW50X0lEOlNlY3JldFxyXG4gICAgICogUmF0ZSBMaW1pdDogTWF4IDIgcmVxdWVzdHMgcGVyIHNlY29uZFxyXG4gICAgICogT24gNDI5IGVycm9yLCByZXNwZWN0cyBSZXRyeS1BZnRlciBoZWFkZXJcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBhc3luYyByZXF1ZXN0PFQ+KFxyXG4gICAgICAgIGVuZHBvaW50OiBzdHJpbmcsXHJcbiAgICAgICAgb3B0aW9uczogUmVxdWVzdEluaXQgPSB7fSxcclxuICAgICAgICB1c2VVc2VyVG9rZW4gPSBmYWxzZSxcclxuICAgICAgICB1c2VyVG9rZW4/OiBzdHJpbmcsXHJcbiAgICAgICAgcmV0cnlDb3VudCA9IDBcclxuICAgICk6IFByb21pc2U8VD4ge1xyXG4gICAgICAgIHRoaXMuY2hlY2tDb25maWd1cmF0aW9uKCk7XHJcblxyXG4gICAgICAgIGNvbnN0IHVybCA9IGAke3RoaXMuY29uZmlnLmJhc2VVcmx9JHtlbmRwb2ludH1gO1xyXG4gICAgICAgIGNvbnN0IG1ldGhvZCA9IG9wdGlvbnMubWV0aG9kIHx8ICdHRVQnO1xyXG4gICAgICAgIGNvbnN0IGJvZHkgPSBvcHRpb25zLmJvZHkgYXMgc3RyaW5nIHwgdW5kZWZpbmVkO1xyXG5cclxuICAgICAgICAvLyBCdWlsZCBoZWFkZXJzIHdpdGggQmFzaWMgQXV0aFxyXG4gICAgICAgIGNvbnN0IGhlYWRlcnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XHJcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogdGhpcy5iYXNpY0F1dGhIZWFkZXIsXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gRm9yIHVzZXItYXV0aGVudGljYXRlZCByZXF1ZXN0cywgYWxzbyBpbmNsdWRlIEJlYXJlciB0b2tlblxyXG4gICAgICAgIGlmICh1c2VVc2VyVG9rZW4gJiYgdXNlclRva2VuKSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnNbJ1gtVXNlci1Ub2tlbiddID0gdXNlclRva2VuO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnW0luc2lnaHRJUV0gQXV0aDogQmFzaWMgKyBVc2VyIFRva2VuJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tJbnNpZ2h0SVFdIEF1dGg6IEJhc2ljIEF1dGgnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnNvbGUubG9nKCdbSW5zaWdodElRXSBSZXF1ZXN0IFVSTDonLCB1cmwpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdbSW5zaWdodElRXSBNZXRob2Q6JywgbWV0aG9kKTtcclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHtcclxuICAgICAgICAgICAgICAgIG1ldGhvZCxcclxuICAgICAgICAgICAgICAgIGhlYWRlcnMsXHJcbiAgICAgICAgICAgICAgICBib2R5OiBib2R5IHx8IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvclRleHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XHJcbiAgICAgICAgICAgICAgICBsZXQgZXJyb3JNZXNzYWdlID0gZXJyb3JUZXh0O1xyXG4gICAgICAgICAgICAgICAgbGV0IGVycm9yQ29kZSA9IGBIVFRQXyR7cmVzcG9uc2Uuc3RhdHVzfWA7XHJcblxyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBUcnkgcGFyc2luZyBKU09OIGVycm9yXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXJyb3JKc29uID0gSlNPTi5wYXJzZShlcnJvclRleHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZSA9IGVycm9ySnNvbi5lcnJvcj8ubWVzc2FnZSB8fCBlcnJvckpzb24ubWVzc2FnZSB8fCBlcnJvckpzb24uZXJyb3IgfHwgZXJyb3JUZXh0O1xyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yQ29kZSA9IGVycm9ySnNvbi5lcnJvcj8uY29kZSB8fCBlcnJvckpzb24uY29kZSB8fCBlcnJvckNvZGU7XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gTm90IEpTT04sIHVzZSB0ZXh0XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignW0luc2lnaHRJUV0gQVBJIEVycm9yOicsIHJlc3BvbnNlLnN0YXR1cywgZXJyb3JNZXNzYWdlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBIYW5kbGUgcmF0ZSBsaW1pdGluZyAoNDI5KVxyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDI5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmV0cnlBZnRlciA9IHJlc3BvbnNlLmhlYWRlcnMuZ2V0KCdSZXRyeS1BZnRlcicpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlbGF5ID0gcmV0cnlBZnRlciA/IHBhcnNlSW50KHJldHJ5QWZ0ZXIsIDEwKSAqIDEwMDAgOiBSRVRSWV9ERUxBWV9NUyAqIE1hdGgucG93KDIsIHJldHJ5Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXRyeUNvdW50IDwgTUFYX1JFVFJJRVMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFtJbnNpZ2h0SVFdIFJhdGUgbGltaXRlZC4gUmV0cnlpbmcgaW4gJHtkZWxheX1tcyAoYXR0ZW1wdCAke3JldHJ5Q291bnQgKyAxfS8ke01BWF9SRVRSSUVTfSlgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zbGVlcChkZWxheSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3Q8VD4oZW5kcG9pbnQsIG9wdGlvbnMsIHVzZVVzZXJUb2tlbiwgdXNlclRva2VuLCByZXRyeUNvdW50ICsgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIFJldHJ5IG9uIHNlcnZlciBlcnJvcnMgKDV4eClcclxuICAgICAgICAgICAgICAgIGlmIChyZXRyeUNvdW50IDwgTUFYX1JFVFJJRVMgJiYgcmVzcG9uc2Uuc3RhdHVzID49IDUwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlbGF5ID0gUkVUUllfREVMQVlfTVMgKiBNYXRoLnBvdygyLCByZXRyeUNvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgW0luc2lnaHRJUV0gU2VydmVyIGVycm9yLiBSZXRyeWluZyBpbiAke2RlbGF5fW1zIChhdHRlbXB0ICR7cmV0cnlDb3VudCArIDF9LyR7TUFYX1JFVFJJRVN9KWApO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2xlZXAoZGVsYXkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3Q8VD4oZW5kcG9pbnQsIG9wdGlvbnMsIHVzZVVzZXJUb2tlbiwgdXNlclRva2VuLCByZXRyeUNvdW50ICsgMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnNpZ2h0SVEgQVBJIEVycm9yICgke3Jlc3BvbnNlLnN0YXR1c30pOiAke2Vycm9yTWVzc2FnZX1gKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAvLyBIYW5kbGUgbmV0d29yayBlcnJvcnMgd2l0aCByZXRyeVxyXG4gICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICByZXRyeUNvdW50IDwgTUFYX1JFVFJJRVMgJiZcclxuICAgICAgICAgICAgICAgIGVycm9yIGluc3RhbmNlb2YgVHlwZUVycm9yIC8vIE5ldHdvcmsgZXJyb3JzXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGVsYXkgPSBSRVRSWV9ERUxBWV9NUyAqIE1hdGgucG93KDIsIHJldHJ5Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFtJbnNpZ2h0SVFdIE5ldHdvcmsgZXJyb3IsIHJldHJ5aW5nIGluICR7ZGVsYXl9bXMgKGF0dGVtcHQgJHtyZXRyeUNvdW50ICsgMX0vJHtNQVhfUkVUUklFU30pYCk7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNsZWVwKGRlbGF5KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3Q8VD4oZW5kcG9pbnQsIG9wdGlvbnMsIHVzZVVzZXJUb2tlbiwgdXNlclRva2VuLCByZXRyeUNvdW50ICsgMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVVNFUiBBUEk6IENyZWF0ZSBhIHVzZXIgaW4gSW5zaWdodElRXHJcbiAgICAgKiBcclxuICAgICAqIE11c3QgYmUgY2FsbGVkIGJlZm9yZSBjcmVhdGluZyBTREsgdG9rZW5zLlxyXG4gICAgICogVGhlIGV4dGVybmFsX2lkIGlzIHlvdXIgaW50ZXJuYWwgdXNlciBJRCB0aGF0IG1hcHMgdG8gSW5zaWdodElRJ3MgdXNlci5cclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIGV4dGVybmFsSWQgLSBZb3VyIGludGVybmFsIHVzZXIgSURcclxuICAgICAqIEBwYXJhbSBuYW1lIC0gT3B0aW9uYWwgZGlzcGxheSBuYW1lXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGNyZWF0ZVVzZXIoXHJcbiAgICAgICAgZXh0ZXJuYWxJZDogc3RyaW5nLFxyXG4gICAgICAgIG5hbWU/OiBzdHJpbmdcclxuICAgICk6IFByb21pc2U8eyBpZDogc3RyaW5nOyBleHRlcm5hbF9pZDogc3RyaW5nOyBjcmVhdGVkX2F0OiBzdHJpbmcgfT4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3Q8eyBpZDogc3RyaW5nOyBleHRlcm5hbF9pZDogc3RyaW5nOyBjcmVhdGVkX2F0OiBzdHJpbmcgfT4oXHJcbiAgICAgICAgICAgICcvdjEvdXNlcnMnLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgICAgICAgICBleHRlcm5hbF9pZDogZXh0ZXJuYWxJZCxcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBuYW1lIHx8IGV4dGVybmFsSWQsXHJcbiAgICAgICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVU0VSIEFQSTogR2V0IG9yIGNyZWF0ZSBhIHVzZXIgaW4gSW5zaWdodElRXHJcbiAgICAgKiBcclxuICAgICAqIFRyaWVzIHRvIGdldCBleGlzdGluZyB1c2VyIGZpcnN0LCBjcmVhdGVzIGlmIG5vdCBmb3VuZC5cclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIGV4dGVybmFsSWQgLSBZb3VyIGludGVybmFsIHVzZXIgSURcclxuICAgICAqIEBwYXJhbSBuYW1lIC0gT3B0aW9uYWwgZGlzcGxheSBuYW1lXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGdldE9yQ3JlYXRlVXNlcihcclxuICAgICAgICBleHRlcm5hbElkOiBzdHJpbmcsXHJcbiAgICAgICAgbmFtZT86IHN0cmluZ1xyXG4gICAgKTogUHJvbWlzZTx7IGlkOiBzdHJpbmc7IGV4dGVybmFsX2lkOiBzdHJpbmcgfT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIFRyeSB0byBnZXQgZXhpc3RpbmcgdXNlclxyXG4gICAgICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgdGhpcy5yZXF1ZXN0PHsgaWQ6IHN0cmluZzsgZXh0ZXJuYWxfaWQ6IHN0cmluZyB9PihcclxuICAgICAgICAgICAgICAgIGAvdjEvdXNlcnMvZXh0ZXJuYWxfaWQvJHtleHRlcm5hbElkfWAsXHJcbiAgICAgICAgICAgICAgICB7IG1ldGhvZDogJ0dFVCcgfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnW0luc2lnaHRJUV0gRm91bmQgZXhpc3RpbmcgdXNlcjonLCB1c2VyLmlkKTtcclxuICAgICAgICAgICAgcmV0dXJuIHVzZXI7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgICAgICAvLyBJZiB1c2VyIGRvZXNuJ3QgZXhpc3QgKDQwNCksIGNyZWF0ZSB0aGVtXHJcbiAgICAgICAgICAgIGlmIChlcnJvci5tZXNzYWdlPy5pbmNsdWRlcygnNDA0JykgfHwgZXJyb3IubWVzc2FnZT8uaW5jbHVkZXMoJ25vdCBmb3VuZCcpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW0luc2lnaHRJUV0gVXNlciBub3QgZm91bmQsIGNyZWF0aW5nIG5ldyB1c2VyLi4uJyk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdVc2VyID0gYXdhaXQgdGhpcy5jcmVhdGVVc2VyKGV4dGVybmFsSWQsIG5hbWUpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tJbnNpZ2h0SVFdIENyZWF0ZWQgbmV3IHVzZXI6JywgbmV3VXNlci5pZCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3VXNlcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTREsgVE9LRU4gQVBJOiBDcmVhdGUgYSBzaG9ydC1saXZlZCBTREsgdG9rZW4gZm9yIENvbm5lY3QgU0RLXHJcbiAgICAgKiBcclxuICAgICAqIFRoaXMgdG9rZW4gaXMgdXNlZCB0byBpbml0aWFsaXplIHRoZSBmcm9udGVuZCBDb25uZWN0IFNESyBvciByZWRpcmVjdCBmbG93LlxyXG4gICAgICogVmFsaWQgZm9yIDEgd2VlayBidXQgc2hvdWxkIGJlIHJlZnJlc2hlZCBiZWZvcmUgZXhwaXJ5LlxyXG4gICAgICogXHJcbiAgICAgKiBOb3RlOiBVc2VyIG11c3QgZXhpc3QgaW4gSW5zaWdodElRIGZpcnN0ICh1c2UgZ2V0T3JDcmVhdGVVc2VyKVxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0gaW5zaWdodGlxVXNlcklkIC0gSW5zaWdodElRJ3MgdXNlciBJRCAobm90IHlvdXIgaW50ZXJuYWwgSUQpXHJcbiAgICAgKiBAcGFyYW0gcHJvZHVjdHMgLSBBcnJheSBvZiBwcm9kdWN0cyB0byByZXF1ZXN0IGFjY2VzcyB0b1xyXG4gICAgICogQHBhcmFtIHJlZGlyZWN0VXJsIC0gT3B0aW9uYWwgcmVkaXJlY3QgVVJMIGZvciByZWRpcmVjdCBmbG93IChubyBTREsgbmVlZGVkKVxyXG4gICAgICovXHJcbiAgICBhc3luYyBjcmVhdGVTZGtUb2tlbihcclxuICAgICAgICBpbnNpZ2h0aXFVc2VySWQ6IHN0cmluZyxcclxuICAgICAgICBwcm9kdWN0czogc3RyaW5nW10gPSBbJ0lERU5USVRZJywgJ0VOR0FHRU1FTlQnXSxcclxuICAgICAgICByZWRpcmVjdFVybD86IHN0cmluZ1xyXG4gICAgKTogUHJvbWlzZTx7IFxyXG4gICAgICAgIHNka190b2tlbjogc3RyaW5nOyBcclxuICAgICAgICBzZGtfdG9rZW5faWQ6IHN0cmluZztcclxuICAgICAgICBleHBpcmVzX2F0OiBzdHJpbmc7IFxyXG4gICAgICAgIHVzZXJfaWQ6IHN0cmluZztcclxuICAgICAgICBjb25uZWN0X3VybD86IHN0cmluZzsgIC8vIFNvbWUgQVBJcyByZXR1cm4gdGhpc1xyXG4gICAgfT4ge1xyXG4gICAgICAgIGNvbnN0IGJvZHk6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7XHJcbiAgICAgICAgICAgIHVzZXJfaWQ6IGluc2lnaHRpcVVzZXJJZCxcclxuICAgICAgICAgICAgcHJvZHVjdHMsXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gQWRkIHJlZGlyZWN0IFVSTCBmb3IgcmVkaXJlY3QgZmxvdyAobm8gZnJvbnRlbmQgU0RLIG5lZWRlZClcclxuICAgICAgICBpZiAocmVkaXJlY3RVcmwpIHtcclxuICAgICAgICAgICAgYm9keS5yZWRpcmVjdF91cmwgPSByZWRpcmVjdFVybDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PGFueT4oXHJcbiAgICAgICAgICAgICcvdjEvc2RrLXRva2VucycsXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYm9keSksXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBjb25zb2xlLmxvZygnW0luc2lnaHRJUV0gU0RLIFRva2VuIFJlc3BvbnNlOicsIEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlLCBudWxsLCAyKSk7XHJcblxyXG4gICAgICAgIC8vIEhhbmRsZSBkaWZmZXJlbnQgcmVzcG9uc2UgZm9ybWF0c1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHNka190b2tlbjogcmVzcG9uc2Uuc2RrX3Rva2VuIHx8IHJlc3BvbnNlLnRva2VuLFxyXG4gICAgICAgICAgICBzZGtfdG9rZW5faWQ6IHJlc3BvbnNlLnNka190b2tlbl9pZCB8fCByZXNwb25zZS5pZCxcclxuICAgICAgICAgICAgZXhwaXJlc19hdDogcmVzcG9uc2UuZXhwaXJlc19hdCxcclxuICAgICAgICAgICAgdXNlcl9pZDogcmVzcG9uc2UudXNlcl9pZCxcclxuICAgICAgICAgICAgY29ubmVjdF91cmw6IHJlc3BvbnNlLmNvbm5lY3RfdXJsIHx8IHJlc3BvbnNlLnVybCxcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IHRoZSBDb25uZWN0IFVSTCBmb3IgcmVkaXJlY3QgZmxvd1xyXG4gICAgICogXHJcbiAgICAgKiBVc2UgSW5zaWdodElRJ3MgaG9zdGVkIGNvbm5lY3QgcGFnZS5cclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHNka1Rva2VuIC0gVGhlIFNESyB0b2tlbiBmcm9tIGNyZWF0ZVNka1Rva2VuXHJcbiAgICAgKiBAcGFyYW0gd29ya1BsYXRmb3JtSWQgLSBPcHRpb25hbDogc2tpcCBwbGF0Zm9ybSBzZWxlY3Rpb24gKGUuZy4sIFRpa1RvayBJRClcclxuICAgICAqIEBwYXJhbSBlbnZpcm9ubWVudCAtIHNhbmRib3gsIHN0YWdpbmcsIG9yIHByb2R1Y3Rpb25cclxuICAgICAqL1xyXG4gICAgZ2V0Q29ubmVjdFVybChzZGtUb2tlbjogc3RyaW5nLCB3b3JrUGxhdGZvcm1JZD86IHN0cmluZywgZW52aXJvbm1lbnQ/OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgIC8vIEluc2lnaHRJUS9QaHlsbG8gQ29ubmVjdCBVUkwgZm9ybWF0XHJcbiAgICAgICAgLy8gQmFzZWQgb24gZW52aXJvbm1lbnRcclxuICAgICAgICBsZXQgYmFzZUNvbm5lY3RVcmw6IHN0cmluZztcclxuICAgICAgICBcclxuICAgICAgICBpZiAoZW52aXJvbm1lbnQgPT09ICdzYW5kYm94JyB8fCB0aGlzLmNvbmZpZy5iYXNlVXJsLmluY2x1ZGVzKCdzYW5kYm94JykpIHtcclxuICAgICAgICAgICAgYmFzZUNvbm5lY3RVcmwgPSAnaHR0cHM6Ly9jb25uZWN0LnNhbmRib3guaW5zaWdodGlxLmFpJztcclxuICAgICAgICB9IGVsc2UgaWYgKGVudmlyb25tZW50ID09PSAnc3RhZ2luZycgfHwgdGhpcy5jb25maWcuYmFzZVVybC5pbmNsdWRlcygnc3RhZ2luZycpKSB7XHJcbiAgICAgICAgICAgIGJhc2VDb25uZWN0VXJsID0gJ2h0dHBzOi8vY29ubmVjdC5zdGFnaW5nLmluc2lnaHRpcS5haSc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgYmFzZUNvbm5lY3RVcmwgPSAnaHR0cHM6Ly9jb25uZWN0Lmluc2lnaHRpcS5haSc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBCdWlsZCBVUkwgd2l0aCByZXF1aXJlZCBwYXJhbWV0ZXJzXHJcbiAgICAgICAgY29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpO1xyXG4gICAgICAgIHBhcmFtcy5zZXQoJ3Nka190b2tlbicsIHNka1Rva2VuKTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAod29ya1BsYXRmb3JtSWQpIHtcclxuICAgICAgICAgICAgcGFyYW1zLnNldCgnd29ya19wbGF0Zm9ybV9pZCcsIHdvcmtQbGF0Zm9ybUlkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHVybCA9IGAke2Jhc2VDb25uZWN0VXJsfT8ke3BhcmFtcy50b1N0cmluZygpfWA7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1tJbnNpZ2h0SVFdIENvbm5lY3QgVVJMOicsIHVybCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHVybDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFDQ09VTlRTIEFQSTogR2V0IGFjY291bnQgZGV0YWlscyBieSBhY2NvdW50IElEXHJcbiAgICAgKiBcclxuICAgICAqIFJldHVybnMgYWNjb3VudCBpbmZvcm1hdGlvbiBpbmNsdWRpbmcgdXNlcm5hbWUsIHByb2ZpbGUgcGljdHVyZSwgZXRjLlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0gYWNjb3VudElkIC0gVGhlIFBoeWxsby9JbnNpZ2h0SVEgYWNjb3VudCBJRFxyXG4gICAgICovXHJcbiAgICBhc3luYyBnZXRBY2NvdW50KGFjY291bnRJZDogc3RyaW5nKTogUHJvbWlzZTx7XHJcbiAgICAgICAgaWQ6IHN0cmluZztcclxuICAgICAgICB1c2VyX2lkOiBzdHJpbmc7XHJcbiAgICAgICAgd29ya19wbGF0Zm9ybV9pZDogc3RyaW5nO1xyXG4gICAgICAgIHVzZXJuYW1lPzogc3RyaW5nO1xyXG4gICAgICAgIHBsYXRmb3JtX3VzZXJuYW1lPzogc3RyaW5nO1xyXG4gICAgICAgIHBsYXRmb3JtX3Byb2ZpbGVfbmFtZT86IHN0cmluZztcclxuICAgICAgICBwbGF0Zm9ybV9wcm9maWxlX3BpY3R1cmVfdXJsPzogc3RyaW5nO1xyXG4gICAgICAgIHN0YXR1czogc3RyaW5nO1xyXG4gICAgICAgIGNyZWF0ZWRfYXQ6IHN0cmluZztcclxuICAgICAgICB1cGRhdGVkX2F0OiBzdHJpbmc7XHJcbiAgICB9PiB7XHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8YW55PihcclxuICAgICAgICAgICAgYC92MS9hY2NvdW50cy8ke2FjY291bnRJZH1gLFxyXG4gICAgICAgICAgICB7IG1ldGhvZDogJ0dFVCcgfVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGNvbnNvbGUubG9nKCdbSW5zaWdodElRXSBBY2NvdW50IGRldGFpbHM6JywgSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UsIG51bGwsIDIpKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgaWQ6IHJlc3BvbnNlLmlkLFxyXG4gICAgICAgICAgICB1c2VyX2lkOiByZXNwb25zZS51c2VyX2lkLFxyXG4gICAgICAgICAgICB3b3JrX3BsYXRmb3JtX2lkOiByZXNwb25zZS53b3JrX3BsYXRmb3JtX2lkLFxyXG4gICAgICAgICAgICB1c2VybmFtZTogcmVzcG9uc2UudXNlcm5hbWUgfHwgcmVzcG9uc2UucGxhdGZvcm1fdXNlcm5hbWUsXHJcbiAgICAgICAgICAgIHBsYXRmb3JtX3VzZXJuYW1lOiByZXNwb25zZS5wbGF0Zm9ybV91c2VybmFtZSxcclxuICAgICAgICAgICAgcGxhdGZvcm1fcHJvZmlsZV9uYW1lOiByZXNwb25zZS5wbGF0Zm9ybV9wcm9maWxlX25hbWUsXHJcbiAgICAgICAgICAgIHBsYXRmb3JtX3Byb2ZpbGVfcGljdHVyZV91cmw6IHJlc3BvbnNlLnBsYXRmb3JtX3Byb2ZpbGVfcGljdHVyZV91cmwsXHJcbiAgICAgICAgICAgIHN0YXR1czogcmVzcG9uc2Uuc3RhdHVzLFxyXG4gICAgICAgICAgICBjcmVhdGVkX2F0OiByZXNwb25zZS5jcmVhdGVkX2F0LFxyXG4gICAgICAgICAgICB1cGRhdGVkX2F0OiByZXNwb25zZS51cGRhdGVkX2F0LFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBXT1JLIFBMQVRGT1JNUyBBUEk6IEdldCBhbGwgYXZhaWxhYmxlIHdvcmsgcGxhdGZvcm1zXHJcbiAgICAgKiBcclxuICAgICAqIFVzZSB0aGlzIHRvIGZpbmQgdGhlIGNvcnJlY3Qgd29ya19wbGF0Zm9ybV9pZCBmb3IgVGlrVG9rIG9yIG90aGVyIHBsYXRmb3Jtcy5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgZ2V0V29ya1BsYXRmb3JtcygpOiBQcm9taXNlPHtcclxuICAgICAgICBkYXRhOiBBcnJheTx7XHJcbiAgICAgICAgICAgIGlkOiBzdHJpbmc7XHJcbiAgICAgICAgICAgIG5hbWU6IHN0cmluZztcclxuICAgICAgICAgICAgdXJsOiBzdHJpbmc7XHJcbiAgICAgICAgICAgIGxvZ29fdXJsOiBzdHJpbmc7XHJcbiAgICAgICAgICAgIGNhdGVnb3J5OiBzdHJpbmc7XHJcbiAgICAgICAgfT47XHJcbiAgICB9PiB7XHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8YW55PihcclxuICAgICAgICAgICAgJy92MS93b3JrLXBsYXRmb3JtcycsXHJcbiAgICAgICAgICAgIHsgbWV0aG9kOiAnR0VUJyB9XHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgY29uc29sZS5sb2coJ1tJbnNpZ2h0SVFdIFdvcmsgcGxhdGZvcm1zOicsIEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlLCBudWxsLCAyKSk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRmluZCBUaWtUb2sgd29yayBwbGF0Zm9ybSBJRFxyXG4gICAgICovXHJcbiAgICBhc3luYyBnZXRUaWtUb2tQbGF0Zm9ybUlkKCk6IFByb21pc2U8c3RyaW5nIHwgbnVsbD4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBsYXRmb3JtcyA9IGF3YWl0IHRoaXMuZ2V0V29ya1BsYXRmb3JtcygpO1xyXG4gICAgICAgICAgICBjb25zdCB0aWt0b2sgPSBwbGF0Zm9ybXMuZGF0YT8uZmluZChcclxuICAgICAgICAgICAgICAgIChwKSA9PiBwLm5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygndGlrdG9rJylcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgaWYgKHRpa3Rvaykge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tJbnNpZ2h0SVFdIEZvdW5kIFRpa1RvayBwbGF0Zm9ybTonLCB0aWt0b2spO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRpa3Rvay5pZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbSW5zaWdodElRXSBGYWlsZWQgdG8gZ2V0IFRpa1RvayBwbGF0Zm9ybSBJRDonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBkZXByZWNhdGVkIFVzZSBjcmVhdGVTZGtUb2tlbigpIGluc3RlYWQgLSB0aGlzIGVuZHBvaW50IGRvZXNuJ3QgZXhpc3RcclxuICAgICAqIFRoZSBDb25uZWN0IFNESyBoYW5kbGVzIHRoZSBPQXV0aCBmbG93IG9uIHRoZSBmcm9udGVuZFxyXG4gICAgICovXHJcbiAgICBhc3luYyBpbml0aWF0ZUNvbm5lY3Rpb24odXNlcklkPzogc3RyaW5nKTogUHJvbWlzZTxDb25uZWN0SW5pdGlhdGVSZXNwb25zZT4ge1xyXG4gICAgICAgIC8vIFJlZGlyZWN0IHRvIHVzaW5nIFNESyB0b2tlbiBmbG93XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxyXG4gICAgICAgICAgICAnaW5pdGlhdGVDb25uZWN0aW9uIGlzIGRlcHJlY2F0ZWQuIFVzZSBjcmVhdGVTZGtUb2tlbigpIHRvIGdldCBhbiBTREsgdG9rZW4sICcgK1xyXG4gICAgICAgICAgICAndGhlbiBpbml0aWFsaXplIHRoZSBDb25uZWN0IFNESyBvbiB0aGUgZnJvbnRlbmQuJ1xyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDT05ORUNUIEFQSTogRXhjaGFuZ2UgdXNlcl90b2tlbiBmb3IgYWNjZXNzX3Rva2VuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGV4Y2hhbmdlVG9rZW4odXNlclRva2VuOiBzdHJpbmcpOiBQcm9taXNlPFRva2VuRXhjaGFuZ2VSZXNwb25zZT4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3Q8VG9rZW5FeGNoYW5nZVJlc3BvbnNlPihcclxuICAgICAgICAgICAgJy92MS9jb25uZWN0L3Rva2VuJyxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgICAgICAgICAgdXNlcl90b2tlbjogdXNlclRva2VuLFxyXG4gICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ09OTkVDVCBBUEk6IFJlZnJlc2ggYWNjZXNzIHRva2VuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIHJlZnJlc2hUb2tlbihyZWZyZXNoVG9rZW46IHN0cmluZyk6IFByb21pc2U8VG9rZW5FeGNoYW5nZVJlc3BvbnNlPiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdDxUb2tlbkV4Y2hhbmdlUmVzcG9uc2U+KFxyXG4gICAgICAgICAgICAnL3YxL2Nvbm5lY3QvcmVmcmVzaCcsXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgICAgICAgICAgIHJlZnJlc2hfdG9rZW46IHJlZnJlc2hUb2tlbixcclxuICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNPQ0lBTCBDT05URU5UIEFQSTogR2V0IHVzZXIncyBUaWtUb2sgdmlkZW9zXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGdldFVzZXJDb250ZW50cyhcclxuICAgICAgICBhY2Nlc3NUb2tlbjogc3RyaW5nLFxyXG4gICAgICAgIHBhcmFtcz86IFBhcnRpYWw8R2V0Q29udGVudHNQYXJhbXM+XHJcbiAgICApOiBQcm9taXNlPENvbnRlbnRzUmVzcG9uc2U+IHtcclxuICAgICAgICBjb25zdCBxdWVyeVBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoe1xyXG4gICAgICAgICAgICBwbGF0Zm9ybTogJ3Rpa3RvaycsXHJcbiAgICAgICAgICAgIGxpbWl0OiBTdHJpbmcocGFyYW1zPy5saW1pdCB8fCA1MCksXHJcbiAgICAgICAgICAgIG9mZnNldDogU3RyaW5nKHBhcmFtcz8ub2Zmc2V0IHx8IDApLFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAocGFyYW1zPy5mcm9tX2RhdGUpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbXMuc2V0KCdmcm9tX2RhdGUnLCBwYXJhbXMuZnJvbV9kYXRlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHBhcmFtcz8udG9fZGF0ZSkge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtcy5zZXQoJ3RvX2RhdGUnLCBwYXJhbXMudG9fZGF0ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0PENvbnRlbnRzUmVzcG9uc2U+KFxyXG4gICAgICAgICAgICBgL3YxL3NvY2lhbC9jb250ZW50cz8ke3F1ZXJ5UGFyYW1zfWAsXHJcbiAgICAgICAgICAgIHt9LFxyXG4gICAgICAgICAgICB0cnVlLFxyXG4gICAgICAgICAgICBhY2Nlc3NUb2tlblxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTT0NJQUwgQ09OVEVOVCBBUEk6IEZldGNoIHNwZWNpZmljIGNvbnRlbnQgYnkgVVJMXHJcbiAgICAgKiBVc2VzIHNlcnZlci1zaWRlIEJhc2ljIEF1dGggLSBubyB1c2VyIHRva2VuIG5lZWRlZFxyXG4gICAgICogXHJcbiAgICAgKiBOb3RlOiBUaGlzIHdvcmtzIGZvciBWSURFTyBVUkxzLCBub3QgbXVzaWMvc291bmQgcGFnZSBVUkxzXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB1cmwgLSBUaWtUb2sgdmlkZW8gVVJMIChlLmcuLCB0aWt0b2suY29tL0B1c2VyL3ZpZGVvLzEyMylcclxuICAgICAqIEBwYXJhbSB3b3JrUGxhdGZvcm1JZCAtIFdvcmsgcGxhdGZvcm0gSUQgKFRpa1RvayA9IGZldGNoZWQgZHluYW1pY2FsbHkpXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGZldGNoQ29udGVudEJ5VXJsKHVybDogc3RyaW5nLCB3b3JrUGxhdGZvcm1JZD86IHN0cmluZyk6IFByb21pc2U8VGlrVG9rQ29udGVudD4ge1xyXG4gICAgICAgIC8vIEdldCBUaWtUb2sgcGxhdGZvcm0gSUQgaWYgbm90IHByb3ZpZGVkXHJcbiAgICAgICAgY29uc3QgcGxhdGZvcm1JZCA9IHdvcmtQbGF0Zm9ybUlkIHx8IGF3YWl0IHRoaXMuZ2V0VGlrVG9rUGxhdGZvcm1JZCgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICghcGxhdGZvcm1JZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvdWxkIG5vdCBkZXRlcm1pbmUgVGlrVG9rIHdvcmsgcGxhdGZvcm0gSUQnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXF1ZXN0PGFueT4oXHJcbiAgICAgICAgICAgICcvdjEvc29jaWFsL2NyZWF0b3JzL2NvbnRlbnRzL2ZldGNoJyxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudF91cmw6IHVybCxcclxuICAgICAgICAgICAgICAgICAgICB3b3JrX3BsYXRmb3JtX2lkOiBwbGF0Zm9ybUlkLFxyXG4gICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG5cclxuICAgICAgICAvLyBIYW5kbGUgYm90aCBhcnJheSBhbmQgc2luZ2xlIG9iamVjdCByZXNwb25zZXNcclxuICAgICAgICBjb25zdCBjb250ZW50ID0gQXJyYXkuaXNBcnJheShyZXNwb25zZSkgPyByZXNwb25zZVswXSA6IChyZXNwb25zZS5kYXRhIHx8IHJlc3BvbnNlKTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoIWNvbnRlbnQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBjb250ZW50IHJldHVybmVkIGZyb20gQVBJJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gY29udGVudCBhcyBUaWtUb2tDb250ZW50O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ09OVEVOVCBBUEk6IEdldCBjb250ZW50L3ZpZGVvcyBieSBhY2NvdW50IElEXHJcbiAgICAgKiBVc2VzIHNlcnZlci1zaWRlIEJhc2ljIEF1dGggd2l0aCBhY2NvdW50X2lkIChmcm9tIFNESyBjb25uZWN0aW9uKVxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0gYWNjb3VudElkIC0gVGhlIFBoeWxsbyBhY2NvdW50IElEIGZyb20gU0RLIGNvbm5lY3Rpb25cclxuICAgICAqIEBwYXJhbSBwYXJhbXMgLSBPcHRpb25hbCBwYWdpbmF0aW9uIGFuZCBmaWx0ZXJpbmcgcGFyYW1zXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGdldENvbnRlbnRCeUFjY291bnRJZChcclxuICAgICAgICBhY2NvdW50SWQ6IHN0cmluZyxcclxuICAgICAgICBwYXJhbXM/OiB7IGxpbWl0PzogbnVtYmVyOyBvZmZzZXQ/OiBudW1iZXI7IGZyb21fZGF0ZT86IHN0cmluZzsgdG9fZGF0ZT86IHN0cmluZyB9XHJcbiAgICApOiBQcm9taXNlPENvbnRlbnRzUmVzcG9uc2U+IHtcclxuICAgICAgICBjb25zdCBxdWVyeVBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoe1xyXG4gICAgICAgICAgICBhY2NvdW50X2lkOiBhY2NvdW50SWQsXHJcbiAgICAgICAgICAgIGxpbWl0OiBTdHJpbmcocGFyYW1zPy5saW1pdCB8fCA1MCksXHJcbiAgICAgICAgICAgIG9mZnNldDogU3RyaW5nKHBhcmFtcz8ub2Zmc2V0IHx8IDApLFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAocGFyYW1zPy5mcm9tX2RhdGUpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbXMuc2V0KCdmcm9tX2RhdGUnLCBwYXJhbXMuZnJvbV9kYXRlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHBhcmFtcz8udG9fZGF0ZSkge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtcy5zZXQoJ3RvX2RhdGUnLCBwYXJhbXMudG9fZGF0ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0PENvbnRlbnRzUmVzcG9uc2U+KFxyXG4gICAgICAgICAgICBgL3YxL3NvY2lhbC9jb250ZW50cz8ke3F1ZXJ5UGFyYW1zfWAsXHJcbiAgICAgICAgICAgIHsgbWV0aG9kOiAnR0VUJyB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIElERU5USVRZIEFQSTogR2V0IHByb2ZpbGUgYnkgYWNjb3VudCBJRFxyXG4gICAgICogVXNlcyBzZXJ2ZXItc2lkZSBCYXNpYyBBdXRoXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSBhY2NvdW50SWQgLSBUaGUgUGh5bGxvIGFjY291bnQgSURcclxuICAgICAqL1xyXG4gICAgYXN5bmMgZ2V0UHJvZmlsZUJ5QWNjb3VudElkKGFjY291bnRJZDogc3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0PGFueT4oXHJcbiAgICAgICAgICAgIGAvdjEvcHJvZmlsZXM/YWNjb3VudF9pZD0ke2FjY291bnRJZH1gLFxyXG4gICAgICAgICAgICB7IG1ldGhvZDogJ0dFVCcgfVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIRUxQRVI6IEZpbmQgdmlkZW9zIHVzaW5nIGEgc3BlY2lmaWMgbXVzaWMgdHJhY2sgKGJ5IGFjY291bnQgSUQpXHJcbiAgICAgKiBVc2VzIHRoZSBhY2NvdW50X2lkIGZyb20gU0RLIGNvbm5lY3Rpb24gZmxvd1xyXG4gICAgICovXHJcbiAgICBhc3luYyBmaW5kVmlkZW9zQnlNdXNpY0lkRm9yQWNjb3VudChcclxuICAgICAgICBhY2NvdW50SWQ6IHN0cmluZyxcclxuICAgICAgICBtdXNpY0lkOiBzdHJpbmcsXHJcbiAgICAgICAgbGltaXQgPSAxMDBcclxuICAgICk6IFByb21pc2U8VGlrVG9rQ29udGVudFtdPiB7XHJcbiAgICAgICAgY29uc3QgY29udGVudHMgPSBhd2FpdCB0aGlzLmdldENvbnRlbnRCeUFjY291bnRJZChhY2NvdW50SWQsIHsgbGltaXQgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBjb250ZW50cy5kYXRhLmZpbHRlcihcclxuICAgICAgICAgICAgKGNvbnRlbnQpID0+IGNvbnRlbnQuYXVkaW9fdHJhY2tfaW5mbz8uaWQgPT09IG11c2ljSWRcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSURFTlRJVFkgQVBJOiBHZXQgdXNlcidzIFRpa1RvayBwcm9maWxlXHJcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgZ2V0UHJvZmlsZUJ5QWNjb3VudElkIGluc3RlYWQgZm9yIFNESyBmbG93XHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGdldFVzZXJJZGVudGl0eShhY2Nlc3NUb2tlbjogc3RyaW5nKTogUHJvbWlzZTxVc2VySWRlbnRpdHk+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0PFVzZXJJZGVudGl0eT4oXHJcbiAgICAgICAgICAgICcvdjEvc29jaWFsL2lkZW50aXR5P3BsYXRmb3JtPXRpa3RvaycsXHJcbiAgICAgICAgICAgIHt9LFxyXG4gICAgICAgICAgICB0cnVlLFxyXG4gICAgICAgICAgICBhY2Nlc3NUb2tlblxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIRUxQRVI6IEZpbmQgdmlkZW9zIHVzaW5nIGEgc3BlY2lmaWMgbXVzaWMgdHJhY2tcclxuICAgICAqIEBkZXByZWNhdGVkIFVzZSBmaW5kVmlkZW9zQnlNdXNpY0lkRm9yQWNjb3VudCBpbnN0ZWFkIGZvciBTREsgZmxvd1xyXG4gICAgICovXHJcbiAgICBhc3luYyBmaW5kVmlkZW9zQnlNdXNpY0lkKFxyXG4gICAgICAgIGFjY2Vzc1Rva2VuOiBzdHJpbmcsXHJcbiAgICAgICAgbXVzaWNJZDogc3RyaW5nLFxyXG4gICAgICAgIGxpbWl0ID0gMTAwXHJcbiAgICApOiBQcm9taXNlPFRpa1Rva0NvbnRlbnRbXT4ge1xyXG4gICAgICAgIGNvbnN0IGNvbnRlbnRzID0gYXdhaXQgdGhpcy5nZXRVc2VyQ29udGVudHMoYWNjZXNzVG9rZW4sIHsgbGltaXQgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBjb250ZW50cy5kYXRhLmZpbHRlcihcclxuICAgICAgICAgICAgKGNvbnRlbnQpID0+IGNvbnRlbnQuYXVkaW9fdHJhY2tfaW5mbz8uaWQgPT09IG11c2ljSWRcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSEVMUEVSOiBHZXQgYWxsIHZpZGVvcyAocGFnaW5hdGVkKVxyXG4gICAgICovXHJcbiAgICBhc3luYyBnZXRBbGxVc2VyQ29udGVudHMoYWNjZXNzVG9rZW46IHN0cmluZyk6IFByb21pc2U8VGlrVG9rQ29udGVudFtdPiB7XHJcbiAgICAgICAgY29uc3QgYWxsVmlkZW9zOiBUaWtUb2tDb250ZW50W10gPSBbXTtcclxuICAgICAgICBsZXQgb2Zmc2V0ID0gMDtcclxuICAgICAgICBjb25zdCBsaW1pdCA9IDEwMDtcclxuICAgICAgICBsZXQgaGFzTW9yZSA9IHRydWU7XHJcblxyXG4gICAgICAgIHdoaWxlIChoYXNNb3JlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5nZXRVc2VyQ29udGVudHMoYWNjZXNzVG9rZW4sIHtcclxuICAgICAgICAgICAgICAgIGxpbWl0LFxyXG4gICAgICAgICAgICAgICAgb2Zmc2V0LFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGFsbFZpZGVvcy5wdXNoKC4uLnJlc3BvbnNlLmRhdGEpO1xyXG4gICAgICAgICAgICBoYXNNb3JlID0gcmVzcG9uc2UucGFnaW5hdGlvbi5oYXNfbW9yZTtcclxuICAgICAgICAgICAgb2Zmc2V0ICs9IGxpbWl0O1xyXG5cclxuICAgICAgICAgICAgLy8gU2FmZXR5IGxpbWl0IHRvIHByZXZlbnQgaW5maW5pdGUgbG9vcHNcclxuICAgICAgICAgICAgaWYgKG9mZnNldCA+IDEwMDApIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignUmVhY2hlZCBzYWZldHkgbGltaXQgb2YgMTAwMCB2aWRlb3MnKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gYWxsVmlkZW9zO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogU2luZ2xldG9uIGluc3RhbmNlIGZvciB1c2UgdGhyb3VnaG91dCB0aGUgYXBwbGljYXRpb25cclxuICogTm90ZTogQ29uZmlndXJhdGlvbiBpcyB2YWxpZGF0ZWQgYXQgcnVudGltZSwgbm90IGF0IGltcG9ydCB0aW1lXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgaW5zaWdodElRQ2xpZW50ID0gbmV3IEluc2lnaHRJUUNsaWVudCh7XHJcbiAgICBjbGllbnRJZDogcHJvY2Vzcy5lbnYuSU5TSUdIVElRX0NMSUVOVF9JRCB8fCAnJyxcclxuICAgIGNsaWVudFNlY3JldDogcHJvY2Vzcy5lbnYuSU5TSUdIVElRX0NMSUVOVF9TRUNSRVQgfHwgJycsXHJcbiAgICBiYXNlVXJsOiBwcm9jZXNzLmVudi5JTlNJR0hUSVFfQkFTRV9VUkwgfHwgJycsXHJcbiAgICByZWRpcmVjdFVyaTogcHJvY2Vzcy5lbnYuSU5TSUdIVElRX1JFRElSRUNUX1VSSSB8fCAnJyxcclxufSk7XHJcbiJdLCJuYW1lcyI6WyJNQVhfUkVUUklFUyIsIlJFVFJZX0RFTEFZX01TIiwiSW5zaWdodElRQ2xpZW50IiwiY29uc3RydWN0b3IiLCJjb25maWciLCJpc0NvbmZpZ3VyZWQiLCJjbGllbnRJZCIsImNsaWVudFNlY3JldCIsImJhc2VVcmwiLCJjcmVkZW50aWFscyIsImJhc2ljQXV0aEhlYWRlciIsIkJ1ZmZlciIsImZyb20iLCJ0b1N0cmluZyIsImNoZWNrQ29uZmlndXJhdGlvbiIsIkVycm9yIiwiaXNJbnNpZ2h0SVFDb25maWd1cmVkIiwic2xlZXAiLCJtcyIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsInJlcXVlc3QiLCJlbmRwb2ludCIsIm9wdGlvbnMiLCJ1c2VVc2VyVG9rZW4iLCJ1c2VyVG9rZW4iLCJyZXRyeUNvdW50IiwidXJsIiwibWV0aG9kIiwiYm9keSIsImhlYWRlcnMiLCJjb25zb2xlIiwibG9nIiwicmVzcG9uc2UiLCJmZXRjaCIsInVuZGVmaW5lZCIsIm9rIiwiZXJyb3JUZXh0IiwidGV4dCIsImVycm9yTWVzc2FnZSIsImVycm9yQ29kZSIsInN0YXR1cyIsImVycm9ySnNvbiIsIkpTT04iLCJwYXJzZSIsImVycm9yIiwibWVzc2FnZSIsImNvZGUiLCJlIiwicmV0cnlBZnRlciIsImdldCIsImRlbGF5IiwicGFyc2VJbnQiLCJNYXRoIiwicG93IiwianNvbiIsIlR5cGVFcnJvciIsImNyZWF0ZVVzZXIiLCJleHRlcm5hbElkIiwibmFtZSIsInN0cmluZ2lmeSIsImV4dGVybmFsX2lkIiwiZ2V0T3JDcmVhdGVVc2VyIiwidXNlciIsImlkIiwiaW5jbHVkZXMiLCJuZXdVc2VyIiwiY3JlYXRlU2RrVG9rZW4iLCJpbnNpZ2h0aXFVc2VySWQiLCJwcm9kdWN0cyIsInJlZGlyZWN0VXJsIiwidXNlcl9pZCIsInJlZGlyZWN0X3VybCIsInNka190b2tlbiIsInRva2VuIiwic2RrX3Rva2VuX2lkIiwiZXhwaXJlc19hdCIsImNvbm5lY3RfdXJsIiwiZ2V0Q29ubmVjdFVybCIsInNka1Rva2VuIiwid29ya1BsYXRmb3JtSWQiLCJlbnZpcm9ubWVudCIsImJhc2VDb25uZWN0VXJsIiwicGFyYW1zIiwiVVJMU2VhcmNoUGFyYW1zIiwic2V0IiwiZ2V0QWNjb3VudCIsImFjY291bnRJZCIsIndvcmtfcGxhdGZvcm1faWQiLCJ1c2VybmFtZSIsInBsYXRmb3JtX3VzZXJuYW1lIiwicGxhdGZvcm1fcHJvZmlsZV9uYW1lIiwicGxhdGZvcm1fcHJvZmlsZV9waWN0dXJlX3VybCIsImNyZWF0ZWRfYXQiLCJ1cGRhdGVkX2F0IiwiZ2V0V29ya1BsYXRmb3JtcyIsImdldFRpa1Rva1BsYXRmb3JtSWQiLCJwbGF0Zm9ybXMiLCJ0aWt0b2siLCJkYXRhIiwiZmluZCIsInAiLCJ0b0xvd2VyQ2FzZSIsImluaXRpYXRlQ29ubmVjdGlvbiIsInVzZXJJZCIsImV4Y2hhbmdlVG9rZW4iLCJ1c2VyX3Rva2VuIiwicmVmcmVzaFRva2VuIiwicmVmcmVzaF90b2tlbiIsImdldFVzZXJDb250ZW50cyIsImFjY2Vzc1Rva2VuIiwicXVlcnlQYXJhbXMiLCJwbGF0Zm9ybSIsImxpbWl0IiwiU3RyaW5nIiwib2Zmc2V0IiwiZnJvbV9kYXRlIiwidG9fZGF0ZSIsImZldGNoQ29udGVudEJ5VXJsIiwicGxhdGZvcm1JZCIsImNvbnRlbnRfdXJsIiwiY29udGVudCIsIkFycmF5IiwiaXNBcnJheSIsImdldENvbnRlbnRCeUFjY291bnRJZCIsImFjY291bnRfaWQiLCJnZXRQcm9maWxlQnlBY2NvdW50SWQiLCJmaW5kVmlkZW9zQnlNdXNpY0lkRm9yQWNjb3VudCIsIm11c2ljSWQiLCJjb250ZW50cyIsImZpbHRlciIsImF1ZGlvX3RyYWNrX2luZm8iLCJnZXRVc2VySWRlbnRpdHkiLCJmaW5kVmlkZW9zQnlNdXNpY0lkIiwiZ2V0QWxsVXNlckNvbnRlbnRzIiwiYWxsVmlkZW9zIiwiaGFzTW9yZSIsInB1c2giLCJwYWdpbmF0aW9uIiwiaGFzX21vcmUiLCJ3YXJuIiwiaW5zaWdodElRQ2xpZW50IiwicHJvY2VzcyIsImVudiIsIklOU0lHSFRJUV9DTElFTlRfSUQiLCJJTlNJR0hUSVFfQ0xJRU5UX1NFQ1JFVCIsIklOU0lHSFRJUV9CQVNFX1VSTCIsInJlZGlyZWN0VXJpIiwiSU5TSUdIVElRX1JFRElSRUNUX1VSSSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/insightiq/client.ts\n");

/***/ }),

/***/ "(rsc)/./lib/insightiq/url-utils.ts":
/*!************************************!*\
  !*** ./lib/insightiq/url-utils.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   extractMusicId: () => (/* binding */ extractMusicId),\n/* harmony export */   extractUsername: () => (/* binding */ extractUsername),\n/* harmony export */   extractVideoId: () => (/* binding */ extractVideoId),\n/* harmony export */   isTikTokMusicUrl: () => (/* binding */ isTikTokMusicUrl),\n/* harmony export */   isTikTokVideoUrl: () => (/* binding */ isTikTokVideoUrl),\n/* harmony export */   normalizeTikTokUrl: () => (/* binding */ normalizeTikTokUrl)\n/* harmony export */ });\n/**\r\n * TikTok URL Utilities\r\n * Helper functions to parse TikTok URLs and extract IDs\r\n */ /**\r\n * Extract music ID from TikTok music URL\r\n * Example: https://www.tiktok.com/music/Song-Name-7123456789012345678\r\n * Returns: 7123456789012345678\r\n */ function extractMusicId(url) {\n    try {\n        // Pattern: /music/[song-name]-[music_id]\n        const match = url.match(/\\/music\\/[^/]+-(\\d+)/);\n        return match ? match[1] : null;\n    } catch (error) {\n        console.error(\"Error extracting music ID:\", error);\n        return null;\n    }\n}\n/**\r\n * Extract video ID from TikTok video URL\r\n * Example: https://www.tiktok.com/@username/video/7350123456789012345\r\n * Returns: 7350123456789012345\r\n */ function extractVideoId(url) {\n    try {\n        // Pattern: /video/[video_id]\n        const match = url.match(/\\/video\\/(\\d+)/);\n        return match ? match[1] : null;\n    } catch (error) {\n        console.error(\"Error extracting video ID:\", error);\n        return null;\n    }\n}\n/**\r\n * Extract username from TikTok profile or video URL\r\n * Example 1: https://www.tiktok.com/@username\r\n * Example 2: https://www.tiktok.com/@username/video/123\r\n * Returns: username\r\n */ function extractUsername(url) {\n    try {\n        // Pattern: /@[username]\n        const match = url.match(/@([^/]+)/);\n        return match ? match[1] : null;\n    } catch (error) {\n        console.error(\"Error extracting username:\", error);\n        return null;\n    }\n}\n/**\r\n * Validate if URL is a valid TikTok music URL\r\n */ function isTikTokMusicUrl(url) {\n    return url.includes(\"tiktok.com/music/\");\n}\n/**\r\n * Validate if URL is a valid TikTok video URL\r\n */ function isTikTokVideoUrl(url) {\n    return url.includes(\"tiktok.com/@\") && url.includes(\"/video/\");\n}\n/**\r\n * Normalize TikTok URL (handle mobile/desktop variants)\r\n * Converts vm.tiktok.com or m.tiktok.com to www.tiktok.com\r\n */ function normalizeTikTokUrl(url) {\n    return url.replace(\"vm.tiktok.com\", \"www.tiktok.com\").replace(\"m.tiktok.com\", \"www.tiktok.com\");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvaW5zaWdodGlxL3VybC11dGlscy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTs7O0NBR0MsR0FFRDs7OztDQUlDLEdBQ00sU0FBU0EsZUFBZUMsR0FBVztJQUN0QyxJQUFJO1FBQ0EseUNBQXlDO1FBQ3pDLE1BQU1DLFFBQVFELElBQUlDLEtBQUssQ0FBQztRQUN4QixPQUFPQSxRQUFRQSxLQUFLLENBQUMsRUFBRSxHQUFHO0lBQzlCLEVBQUUsT0FBT0MsT0FBTztRQUNaQyxRQUFRRCxLQUFLLENBQUMsOEJBQThCQTtRQUM1QyxPQUFPO0lBQ1g7QUFDSjtBQUVBOzs7O0NBSUMsR0FDTSxTQUFTRSxlQUFlSixHQUFXO0lBQ3RDLElBQUk7UUFDQSw2QkFBNkI7UUFDN0IsTUFBTUMsUUFBUUQsSUFBSUMsS0FBSyxDQUFDO1FBQ3hCLE9BQU9BLFFBQVFBLEtBQUssQ0FBQyxFQUFFLEdBQUc7SUFDOUIsRUFBRSxPQUFPQyxPQUFPO1FBQ1pDLFFBQVFELEtBQUssQ0FBQyw4QkFBOEJBO1FBQzVDLE9BQU87SUFDWDtBQUNKO0FBRUE7Ozs7O0NBS0MsR0FDTSxTQUFTRyxnQkFBZ0JMLEdBQVc7SUFDdkMsSUFBSTtRQUNBLHdCQUF3QjtRQUN4QixNQUFNQyxRQUFRRCxJQUFJQyxLQUFLLENBQUM7UUFDeEIsT0FBT0EsUUFBUUEsS0FBSyxDQUFDLEVBQUUsR0FBRztJQUM5QixFQUFFLE9BQU9DLE9BQU87UUFDWkMsUUFBUUQsS0FBSyxDQUFDLDhCQUE4QkE7UUFDNUMsT0FBTztJQUNYO0FBQ0o7QUFFQTs7Q0FFQyxHQUNNLFNBQVNJLGlCQUFpQk4sR0FBVztJQUN4QyxPQUFPQSxJQUFJTyxRQUFRLENBQUM7QUFDeEI7QUFFQTs7Q0FFQyxHQUNNLFNBQVNDLGlCQUFpQlIsR0FBVztJQUN4QyxPQUFPQSxJQUFJTyxRQUFRLENBQUMsbUJBQW1CUCxJQUFJTyxRQUFRLENBQUM7QUFDeEQ7QUFFQTs7O0NBR0MsR0FDTSxTQUFTRSxtQkFBbUJULEdBQVc7SUFDMUMsT0FBT0EsSUFDRlUsT0FBTyxDQUFDLGlCQUFpQixrQkFDekJBLE9BQU8sQ0FBQyxnQkFBZ0I7QUFDakMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZXNhci13ZWIvLi9saWIvaW5zaWdodGlxL3VybC11dGlscy50cz9hM2ZiIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBUaWtUb2sgVVJMIFV0aWxpdGllc1xyXG4gKiBIZWxwZXIgZnVuY3Rpb25zIHRvIHBhcnNlIFRpa1RvayBVUkxzIGFuZCBleHRyYWN0IElEc1xyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBFeHRyYWN0IG11c2ljIElEIGZyb20gVGlrVG9rIG11c2ljIFVSTFxyXG4gKiBFeGFtcGxlOiBodHRwczovL3d3dy50aWt0b2suY29tL211c2ljL1NvbmctTmFtZS03MTIzNDU2Nzg5MDEyMzQ1Njc4XHJcbiAqIFJldHVybnM6IDcxMjM0NTY3ODkwMTIzNDU2NzhcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBleHRyYWN0TXVzaWNJZCh1cmw6IHN0cmluZyk6IHN0cmluZyB8IG51bGwge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICAvLyBQYXR0ZXJuOiAvbXVzaWMvW3NvbmctbmFtZV0tW211c2ljX2lkXVxyXG4gICAgICAgIGNvbnN0IG1hdGNoID0gdXJsLm1hdGNoKC9cXC9tdXNpY1xcL1teL10rLShcXGQrKS8pO1xyXG4gICAgICAgIHJldHVybiBtYXRjaCA/IG1hdGNoWzFdIDogbnVsbDtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZXh0cmFjdGluZyBtdXNpYyBJRDonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBFeHRyYWN0IHZpZGVvIElEIGZyb20gVGlrVG9rIHZpZGVvIFVSTFxyXG4gKiBFeGFtcGxlOiBodHRwczovL3d3dy50aWt0b2suY29tL0B1c2VybmFtZS92aWRlby83MzUwMTIzNDU2Nzg5MDEyMzQ1XHJcbiAqIFJldHVybnM6IDczNTAxMjM0NTY3ODkwMTIzNDVcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBleHRyYWN0VmlkZW9JZCh1cmw6IHN0cmluZyk6IHN0cmluZyB8IG51bGwge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICAvLyBQYXR0ZXJuOiAvdmlkZW8vW3ZpZGVvX2lkXVxyXG4gICAgICAgIGNvbnN0IG1hdGNoID0gdXJsLm1hdGNoKC9cXC92aWRlb1xcLyhcXGQrKS8pO1xyXG4gICAgICAgIHJldHVybiBtYXRjaCA/IG1hdGNoWzFdIDogbnVsbDtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZXh0cmFjdGluZyB2aWRlbyBJRDonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBFeHRyYWN0IHVzZXJuYW1lIGZyb20gVGlrVG9rIHByb2ZpbGUgb3IgdmlkZW8gVVJMXHJcbiAqIEV4YW1wbGUgMTogaHR0cHM6Ly93d3cudGlrdG9rLmNvbS9AdXNlcm5hbWVcclxuICogRXhhbXBsZSAyOiBodHRwczovL3d3dy50aWt0b2suY29tL0B1c2VybmFtZS92aWRlby8xMjNcclxuICogUmV0dXJuczogdXNlcm5hbWVcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBleHRyYWN0VXNlcm5hbWUodXJsOiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgLy8gUGF0dGVybjogL0BbdXNlcm5hbWVdXHJcbiAgICAgICAgY29uc3QgbWF0Y2ggPSB1cmwubWF0Y2goL0AoW14vXSspLyk7XHJcbiAgICAgICAgcmV0dXJuIG1hdGNoID8gbWF0Y2hbMV0gOiBudWxsO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBleHRyYWN0aW5nIHVzZXJuYW1lOicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFZhbGlkYXRlIGlmIFVSTCBpcyBhIHZhbGlkIFRpa1RvayBtdXNpYyBVUkxcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBpc1Rpa1Rva011c2ljVXJsKHVybDogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdXJsLmluY2x1ZGVzKCd0aWt0b2suY29tL211c2ljLycpO1xyXG59XHJcblxyXG4vKipcclxuICogVmFsaWRhdGUgaWYgVVJMIGlzIGEgdmFsaWQgVGlrVG9rIHZpZGVvIFVSTFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGlzVGlrVG9rVmlkZW9VcmwodXJsOiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB1cmwuaW5jbHVkZXMoJ3Rpa3Rvay5jb20vQCcpICYmIHVybC5pbmNsdWRlcygnL3ZpZGVvLycpO1xyXG59XHJcblxyXG4vKipcclxuICogTm9ybWFsaXplIFRpa1RvayBVUkwgKGhhbmRsZSBtb2JpbGUvZGVza3RvcCB2YXJpYW50cylcclxuICogQ29udmVydHMgdm0udGlrdG9rLmNvbSBvciBtLnRpa3Rvay5jb20gdG8gd3d3LnRpa3Rvay5jb21cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemVUaWtUb2tVcmwodXJsOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIHVybFxyXG4gICAgICAgIC5yZXBsYWNlKCd2bS50aWt0b2suY29tJywgJ3d3dy50aWt0b2suY29tJylcclxuICAgICAgICAucmVwbGFjZSgnbS50aWt0b2suY29tJywgJ3d3dy50aWt0b2suY29tJyk7XHJcbn1cclxuIl0sIm5hbWVzIjpbImV4dHJhY3RNdXNpY0lkIiwidXJsIiwibWF0Y2giLCJlcnJvciIsImNvbnNvbGUiLCJleHRyYWN0VmlkZW9JZCIsImV4dHJhY3RVc2VybmFtZSIsImlzVGlrVG9rTXVzaWNVcmwiLCJpbmNsdWRlcyIsImlzVGlrVG9rVmlkZW9VcmwiLCJub3JtYWxpemVUaWtUb2tVcmwiLCJyZXBsYWNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/insightiq/url-utils.ts\n");

/***/ }),

/***/ "(rsc)/./lib/prisma.ts":
/*!***********************!*\
  !*** ./lib/prisma.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma),\n/* harmony export */   withRetry: () => (/* binding */ withRetry)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst globalForPrisma = globalThis;\nconst prisma = globalForPrisma.prisma ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient({\n    log:  true ? [\n        \"query\",\n        \"error\",\n        \"warn\"\n    ] : 0\n});\nif (true) {\n    globalForPrisma.prisma = prisma;\n}\nasync function withRetry(query, maxRetries = 2, delay = 500) {\n    for(let i = 0; i < maxRetries; i++){\n        try {\n            return await query();\n        } catch (error) {\n            if (i < maxRetries - 1) {\n                console.warn(`Database retry ${i + 1}/${maxRetries} due to: ${error.message}`);\n                await new Promise((resolve)=>setTimeout(resolve, delay * (i + 1)));\n                continue;\n            }\n            throw error;\n        }\n    }\n    throw new Error(\"Query failed after retries\");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvcHJpc21hLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBOEM7QUFFOUMsTUFBTUMsa0JBQWtCQztBQUlqQixNQUFNQyxTQUFTRixnQkFBZ0JFLE1BQU0sSUFBSSxJQUFJSCx3REFBWUEsQ0FBQztJQUMvREksS0FBS0MsS0FBc0MsR0FBRztRQUFDO1FBQVM7UUFBUztLQUFPLEdBQUcsQ0FBUztBQUN0RixHQUFHO0FBRUgsSUFBSUEsSUFBcUMsRUFBRTtJQUN6Q0osZ0JBQWdCRSxNQUFNLEdBQUdBO0FBQzNCO0FBRU8sZUFBZUcsVUFDcEJDLEtBQXVCLEVBQ3ZCQyxhQUFhLENBQUMsRUFDZEMsUUFBUSxHQUFHO0lBRVgsSUFBSyxJQUFJQyxJQUFJLEdBQUdBLElBQUlGLFlBQVlFLElBQUs7UUFDbkMsSUFBSTtZQUNGLE9BQU8sTUFBTUg7UUFDZixFQUFFLE9BQU9JLE9BQVk7WUFDbkIsSUFBSUQsSUFBSUYsYUFBYSxHQUFHO2dCQUN0QkksUUFBUUMsSUFBSSxDQUFDLENBQUMsZUFBZSxFQUFFSCxJQUFJLEVBQUUsQ0FBQyxFQUFFRixXQUFXLFNBQVMsRUFBRUcsTUFBTUcsT0FBTyxDQUFDLENBQUM7Z0JBQzdFLE1BQU0sSUFBSUMsUUFBUSxDQUFDQyxVQUFZQyxXQUFXRCxTQUFTUCxRQUFTQyxDQUFBQSxJQUFJO2dCQUNoRTtZQUNGO1lBQ0EsTUFBTUM7UUFDUjtJQUNGO0lBQ0EsTUFBTSxJQUFJTyxNQUFNO0FBQ2xCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2VzYXItd2ViLy4vbGliL3ByaXNtYS50cz85ODIyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gXCJAcHJpc21hL2NsaWVudFwiO1xyXG5cclxuY29uc3QgZ2xvYmFsRm9yUHJpc21hID0gZ2xvYmFsVGhpcyBhcyB1bmtub3duIGFzIHtcclxuICBwcmlzbWE6IFByaXNtYUNsaWVudCB8IHVuZGVmaW5lZDtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBwcmlzbWEgPSBnbG9iYWxGb3JQcmlzbWEucHJpc21hID8/IG5ldyBQcmlzbWFDbGllbnQoe1xyXG4gIGxvZzogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwiZGV2ZWxvcG1lbnRcIiA/IFtcInF1ZXJ5XCIsIFwiZXJyb3JcIiwgXCJ3YXJuXCJdIDogW1wiZXJyb3JcIl0sXHJcbn0pO1xyXG5cclxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikge1xyXG4gIGdsb2JhbEZvclByaXNtYS5wcmlzbWEgPSBwcmlzbWE7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB3aXRoUmV0cnk8VD4oXHJcbiAgcXVlcnk6ICgpID0+IFByb21pc2U8VD4sXHJcbiAgbWF4UmV0cmllcyA9IDIsXHJcbiAgZGVsYXkgPSA1MDBcclxuKTogUHJvbWlzZTxUPiB7XHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYXhSZXRyaWVzOyBpKyspIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIHJldHVybiBhd2FpdCBxdWVyeSgpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICBpZiAoaSA8IG1heFJldHJpZXMgLSAxKSB7XHJcbiAgICAgICAgY29uc29sZS53YXJuKGBEYXRhYmFzZSByZXRyeSAke2kgKyAxfS8ke21heFJldHJpZXN9IGR1ZSB0bzogJHtlcnJvci5tZXNzYWdlfWApO1xyXG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIGRlbGF5ICogKGkgKyAxKSkpO1xyXG4gICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICB9XHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG4gIH1cclxuICB0aHJvdyBuZXcgRXJyb3IoXCJRdWVyeSBmYWlsZWQgYWZ0ZXIgcmV0cmllc1wiKTtcclxufSJdLCJuYW1lcyI6WyJQcmlzbWFDbGllbnQiLCJnbG9iYWxGb3JQcmlzbWEiLCJnbG9iYWxUaGlzIiwicHJpc21hIiwibG9nIiwicHJvY2VzcyIsIndpdGhSZXRyeSIsInF1ZXJ5IiwibWF4UmV0cmllcyIsImRlbGF5IiwiaSIsImVycm9yIiwiY29uc29sZSIsIndhcm4iLCJtZXNzYWdlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwiRXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/prisma.ts\n");

/***/ }),

/***/ "(rsc)/./lib/supabase/server.ts":
/*!********************************!*\
  !*** ./lib/supabase/server.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createClient: () => (/* binding */ createClient)\n/* harmony export */ });\n/* harmony import */ var _supabase_auth_helpers_nextjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/auth-helpers-nextjs */ \"(rsc)/./node_modules/@supabase/auth-helpers-nextjs/dist/index.js\");\n/* harmony import */ var _supabase_auth_helpers_nextjs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_supabase_auth_helpers_nextjs__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\");\n\n\nconst createClient = ()=>(0,_supabase_auth_helpers_nextjs__WEBPACK_IMPORTED_MODULE_0__.createServerComponentClient)({\n        cookies: next_headers__WEBPACK_IMPORTED_MODULE_1__.cookies\n    });\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc3VwYWJhc2Uvc2VydmVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBNEU7QUFDckM7QUFFaEMsTUFBTUUsZUFBZSxJQUMxQkYsMEZBQTJCQSxDQUFDO1FBQzFCQyxPQUFPQSxtREFBQUE7SUFDVCxHQUFHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2VzYXItd2ViLy4vbGliL3N1cGFiYXNlL3NlcnZlci50cz82NjI1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZVNlcnZlckNvbXBvbmVudENsaWVudCB9IGZyb20gXCJAc3VwYWJhc2UvYXV0aC1oZWxwZXJzLW5leHRqc1wiO1xyXG5pbXBvcnQgeyBjb29raWVzIH0gZnJvbSBcIm5leHQvaGVhZGVyc1wiO1xyXG5cclxuZXhwb3J0IGNvbnN0IGNyZWF0ZUNsaWVudCA9ICgpID0+XHJcbiAgY3JlYXRlU2VydmVyQ29tcG9uZW50Q2xpZW50KHtcclxuICAgIGNvb2tpZXMsXHJcbiAgfSk7XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4iXSwibmFtZXMiOlsiY3JlYXRlU2VydmVyQ29tcG9uZW50Q2xpZW50IiwiY29va2llcyIsImNyZWF0ZUNsaWVudCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/supabase/server.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tslib","vendor-chunks/iceberg-js","vendor-chunks/set-cookie-parser"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsongs%2Fupload%2Froute&page=%2Fapi%2Fsongs%2Fupload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsongs%2Fupload%2Froute.ts&appDir=C%3A%5CUsers%5Cilker%5CDesktop%5Csesar-web%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cilker%5CDesktop%5Csesar-web&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();