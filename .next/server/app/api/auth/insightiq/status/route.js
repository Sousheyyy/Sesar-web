"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/auth/insightiq/status/route";
exports.ids = ["app/api/auth/insightiq/status/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Finsightiq%2Fstatus%2Froute&page=%2Fapi%2Fauth%2Finsightiq%2Fstatus%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Finsightiq%2Fstatus%2Froute.ts&appDir=C%3A%5CUsers%5Cilker%5CDesktop%5Csesar-web%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cilker%5CDesktop%5Csesar-web&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Finsightiq%2Fstatus%2Froute&page=%2Fapi%2Fauth%2Finsightiq%2Fstatus%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Finsightiq%2Fstatus%2Froute.ts&appDir=C%3A%5CUsers%5Cilker%5CDesktop%5Csesar-web%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cilker%5CDesktop%5Csesar-web&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_ilker_Desktop_sesar_web_app_api_auth_insightiq_status_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/auth/insightiq/status/route.ts */ \"(rsc)/./app/api/auth/insightiq/status/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"standalone\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/auth/insightiq/status/route\",\n        pathname: \"/api/auth/insightiq/status\",\n        filename: \"route\",\n        bundlePath: \"app/api/auth/insightiq/status/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\ilker\\\\Desktop\\\\sesar-web\\\\app\\\\api\\\\auth\\\\insightiq\\\\status\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_ilker_Desktop_sesar_web_app_api_auth_insightiq_status_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/auth/insightiq/status/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhdXRoJTJGaW5zaWdodGlxJTJGc3RhdHVzJTJGcm91dGUmcGFnZT0lMkZhcGklMkZhdXRoJTJGaW5zaWdodGlxJTJGc3RhdHVzJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGYXV0aCUyRmluc2lnaHRpcSUyRnN0YXR1cyUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNpbGtlciU1Q0Rlc2t0b3AlNUNzZXNhci13ZWIlNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUMlM0ElNUNVc2VycyU1Q2lsa2VyJTVDRGVza3RvcCU1Q3Nlc2FyLXdlYiZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD1zdGFuZGFsb25lJnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ2lDO0FBQzlHO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2VzYXItd2ViLz8yNGVjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFVzZXJzXFxcXGlsa2VyXFxcXERlc2t0b3BcXFxcc2VzYXItd2ViXFxcXGFwcFxcXFxhcGlcXFxcYXV0aFxcXFxpbnNpZ2h0aXFcXFxcc3RhdHVzXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcInN0YW5kYWxvbmVcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvYXV0aC9pbnNpZ2h0aXEvc3RhdHVzL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYXV0aC9pbnNpZ2h0aXEvc3RhdHVzXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9hdXRoL2luc2lnaHRpcS9zdGF0dXMvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxVc2Vyc1xcXFxpbGtlclxcXFxEZXNrdG9wXFxcXHNlc2FyLXdlYlxcXFxhcHBcXFxcYXBpXFxcXGF1dGhcXFxcaW5zaWdodGlxXFxcXHN0YXR1c1xcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvYXV0aC9pbnNpZ2h0aXEvc3RhdHVzL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Finsightiq%2Fstatus%2Froute&page=%2Fapi%2Fauth%2Finsightiq%2Fstatus%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Finsightiq%2Fstatus%2Froute.ts&appDir=C%3A%5CUsers%5Cilker%5CDesktop%5Csesar-web%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cilker%5CDesktop%5Csesar-web&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/auth/insightiq/status/route.ts":
/*!************************************************!*\
  !*** ./app/api/auth/insightiq/status/route.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/auth */ \"(rsc)/./lib/auth.ts\");\n/* harmony import */ var _lib_insightiq_token_manager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/insightiq/token-manager */ \"(rsc)/./lib/insightiq/token-manager.ts\");\n/**\r\n * TikTok Connection Status\r\n * GET /api/auth/insightiq/status\r\n * \r\n * Check if user has connected their TikTok account\r\n */ \n\n\nasync function GET(req) {\n    try {\n        const session = await (0,_lib_auth__WEBPACK_IMPORTED_MODULE_1__.auth)();\n        if (!session?.user?.id) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        const status = await (0,_lib_insightiq_token_manager__WEBPACK_IMPORTED_MODULE_2__.getTikTokConnectionStatus)(session.user.id);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            ...status\n        });\n    } catch (error) {\n        console.error(\"[InsightIQ] Error getting connection status:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to get connection status\",\n            message: error instanceof Error ? error.message : \"Unknown error\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2F1dGgvaW5zaWdodGlxL3N0YXR1cy9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7Ozs7O0NBS0MsR0FFdUQ7QUFDdEI7QUFDd0M7QUFFbkUsZUFBZUcsSUFBSUMsR0FBZ0I7SUFDdEMsSUFBSTtRQUNBLE1BQU1DLFVBQVUsTUFBTUosK0NBQUlBO1FBRTFCLElBQUksQ0FBQ0ksU0FBU0MsTUFBTUMsSUFBSTtZQUNwQixPQUFPUCxxREFBWUEsQ0FBQ1EsSUFBSSxDQUNwQjtnQkFBRUMsT0FBTztZQUFlLEdBQ3hCO2dCQUFFQyxRQUFRO1lBQUk7UUFFdEI7UUFFQSxNQUFNQSxTQUFTLE1BQU1SLHVGQUF5QkEsQ0FBQ0csUUFBUUMsSUFBSSxDQUFDQyxFQUFFO1FBRTlELE9BQU9QLHFEQUFZQSxDQUFDUSxJQUFJLENBQUM7WUFDckJHLFNBQVM7WUFDVCxHQUFHRCxNQUFNO1FBQ2I7SUFDSixFQUFFLE9BQU9ELE9BQU87UUFDWkcsUUFBUUgsS0FBSyxDQUFDLGdEQUFnREE7UUFFOUQsT0FBT1QscURBQVlBLENBQUNRLElBQUksQ0FDcEI7WUFDSUMsT0FBTztZQUNQSSxTQUFTSixpQkFBaUJLLFFBQVFMLE1BQU1JLE9BQU8sR0FBRztRQUN0RCxHQUNBO1lBQUVILFFBQVE7UUFBSTtJQUV0QjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2VzYXItd2ViLy4vYXBwL2FwaS9hdXRoL2luc2lnaHRpcS9zdGF0dXMvcm91dGUudHM/MzE1OSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogVGlrVG9rIENvbm5lY3Rpb24gU3RhdHVzXHJcbiAqIEdFVCAvYXBpL2F1dGgvaW5zaWdodGlxL3N0YXR1c1xyXG4gKiBcclxuICogQ2hlY2sgaWYgdXNlciBoYXMgY29ubmVjdGVkIHRoZWlyIFRpa1RvayBhY2NvdW50XHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcclxuaW1wb3J0IHsgYXV0aCB9IGZyb20gJ0AvbGliL2F1dGgnO1xyXG5pbXBvcnQgeyBnZXRUaWtUb2tDb25uZWN0aW9uU3RhdHVzIH0gZnJvbSAnQC9saWIvaW5zaWdodGlxL3Rva2VuLW1hbmFnZXInO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXE6IE5leHRSZXF1ZXN0KSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBhdXRoKCk7XHJcblxyXG4gICAgICAgIGlmICghc2Vzc2lvbj8udXNlcj8uaWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgICAgICAgICAgeyBlcnJvcjogJ1VuYXV0aG9yaXplZCcgfSxcclxuICAgICAgICAgICAgICAgIHsgc3RhdHVzOiA0MDEgfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3Qgc3RhdHVzID0gYXdhaXQgZ2V0VGlrVG9rQ29ubmVjdGlvblN0YXR1cyhzZXNzaW9uLnVzZXIuaWQpO1xyXG5cclxuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgICAgICAuLi5zdGF0dXMsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tJbnNpZ2h0SVFdIEVycm9yIGdldHRpbmcgY29ubmVjdGlvbiBzdGF0dXM6JywgZXJyb3IpO1xyXG5cclxuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGVycm9yOiAnRmFpbGVkIHRvIGdldCBjb25uZWN0aW9uIHN0YXR1cycsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiYXV0aCIsImdldFRpa1Rva0Nvbm5lY3Rpb25TdGF0dXMiLCJHRVQiLCJyZXEiLCJzZXNzaW9uIiwidXNlciIsImlkIiwianNvbiIsImVycm9yIiwic3RhdHVzIiwic3VjY2VzcyIsImNvbnNvbGUiLCJtZXNzYWdlIiwiRXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/auth/insightiq/status/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/auth.ts":
/*!*********************!*\
  !*** ./lib/auth.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   auth: () => (/* binding */ auth)\n/* harmony export */ });\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./lib/prisma.ts\");\n/* harmony import */ var _lib_supabase_server__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/supabase/server */ \"(rsc)/./lib/supabase/server.ts\");\n\n\n/**\n * Unified auth function that works in Server Components and Route Handlers.\n * Bridges the gap between Supabase Auth and our Prisma User profiles.\n */ async function auth() {\n    const supabase = (0,_lib_supabase_server__WEBPACK_IMPORTED_MODULE_1__.createClient)();\n    try {\n        // Use getUser() to validate the auth token on the server\n        const { data: { user }, error } = await supabase.auth.getUser();\n        if (error || !user) {\n            return null;\n        }\n        const dbUser = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.user.findUnique({\n            where: {\n                id: user.id\n            }\n        });\n        if (!dbUser) {\n            // If user exists in Auth but not in Prisma, they might be being created by the trigger\n            // but we return null here to be safe, or we could return partial data.\n            return null;\n        }\n        return {\n            user: {\n                id: dbUser.id,\n                email: dbUser.email,\n                name: dbUser.name,\n                role: dbUser.role,\n                plan: dbUser.plan,\n                balance: Number(dbUser.balance),\n                tiktokHandle: dbUser.tiktokHandle\n            },\n            // Check session expiry if needed, or null if we rely on the token validity check we just did\n            expires: null\n        };\n    } catch (err) {\n        console.error(\"Auth helper error:\", err);\n        return null;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvYXV0aC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBc0M7QUFDZTtBQUdyRDs7O0NBR0MsR0FDTSxlQUFlRTtJQUNwQixNQUFNQyxXQUFXRixrRUFBWUE7SUFFN0IsSUFBSTtRQUNGLHlEQUF5RDtRQUN6RCxNQUFNLEVBQUVHLE1BQU0sRUFBRUMsSUFBSSxFQUFFLEVBQUVDLEtBQUssRUFBRSxHQUFHLE1BQU1ILFNBQVNELElBQUksQ0FBQ0ssT0FBTztRQUU3RCxJQUFJRCxTQUFTLENBQUNELE1BQU07WUFDbEIsT0FBTztRQUNUO1FBRUEsTUFBTUcsU0FBUyxNQUFNUiwrQ0FBTUEsQ0FBQ0ssSUFBSSxDQUFDSSxVQUFVLENBQUM7WUFDMUNDLE9BQU87Z0JBQUVDLElBQUlOLEtBQUtNLEVBQUU7WUFBQztRQUN2QjtRQUVBLElBQUksQ0FBQ0gsUUFBUTtZQUNYLHVGQUF1RjtZQUN2Rix1RUFBdUU7WUFDdkUsT0FBTztRQUNUO1FBRUEsT0FBTztZQUNMSCxNQUFNO2dCQUNKTSxJQUFJSCxPQUFPRyxFQUFFO2dCQUNiQyxPQUFPSixPQUFPSSxLQUFLO2dCQUNuQkMsTUFBTUwsT0FBT0ssSUFBSTtnQkFDakJDLE1BQU1OLE9BQU9NLElBQUk7Z0JBQ2pCQyxNQUFNUCxPQUFPTyxJQUFJO2dCQUNqQkMsU0FBU0MsT0FBT1QsT0FBT1EsT0FBTztnQkFDOUJFLGNBQWNWLE9BQU9VLFlBQVk7WUFDbkM7WUFDQSw2RkFBNkY7WUFDN0ZDLFNBQVM7UUFDWDtJQUNGLEVBQUUsT0FBT0MsS0FBSztRQUNaQyxRQUFRZixLQUFLLENBQUMsc0JBQXNCYztRQUNwQyxPQUFPO0lBQ1Q7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3Nlc2FyLXdlYi8uL2xpYi9hdXRoLnRzP2JmN2UiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcHJpc21hIH0gZnJvbSBcIkAvbGliL3ByaXNtYVwiO1xuaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSBcIkAvbGliL3N1cGFiYXNlL3NlcnZlclwiO1xuaW1wb3J0IHsgVXNlclJvbGUgfSBmcm9tIFwiQHByaXNtYS9jbGllbnRcIjtcblxuLyoqXG4gKiBVbmlmaWVkIGF1dGggZnVuY3Rpb24gdGhhdCB3b3JrcyBpbiBTZXJ2ZXIgQ29tcG9uZW50cyBhbmQgUm91dGUgSGFuZGxlcnMuXG4gKiBCcmlkZ2VzIHRoZSBnYXAgYmV0d2VlbiBTdXBhYmFzZSBBdXRoIGFuZCBvdXIgUHJpc21hIFVzZXIgcHJvZmlsZXMuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhdXRoKCkge1xuICBjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudCgpO1xuXG4gIHRyeSB7XG4gICAgLy8gVXNlIGdldFVzZXIoKSB0byB2YWxpZGF0ZSB0aGUgYXV0aCB0b2tlbiBvbiB0aGUgc2VydmVyXG4gICAgY29uc3QgeyBkYXRhOiB7IHVzZXIgfSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLmF1dGguZ2V0VXNlcigpO1xuXG4gICAgaWYgKGVycm9yIHx8ICF1c2VyKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCBkYlVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcbiAgICAgIHdoZXJlOiB7IGlkOiB1c2VyLmlkIH0sXG4gICAgfSk7XG5cbiAgICBpZiAoIWRiVXNlcikge1xuICAgICAgLy8gSWYgdXNlciBleGlzdHMgaW4gQXV0aCBidXQgbm90IGluIFByaXNtYSwgdGhleSBtaWdodCBiZSBiZWluZyBjcmVhdGVkIGJ5IHRoZSB0cmlnZ2VyXG4gICAgICAvLyBidXQgd2UgcmV0dXJuIG51bGwgaGVyZSB0byBiZSBzYWZlLCBvciB3ZSBjb3VsZCByZXR1cm4gcGFydGlhbCBkYXRhLlxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHVzZXI6IHtcbiAgICAgICAgaWQ6IGRiVXNlci5pZCxcbiAgICAgICAgZW1haWw6IGRiVXNlci5lbWFpbCxcbiAgICAgICAgbmFtZTogZGJVc2VyLm5hbWUsXG4gICAgICAgIHJvbGU6IGRiVXNlci5yb2xlIGFzIFVzZXJSb2xlLFxuICAgICAgICBwbGFuOiBkYlVzZXIucGxhbixcbiAgICAgICAgYmFsYW5jZTogTnVtYmVyKGRiVXNlci5iYWxhbmNlKSxcbiAgICAgICAgdGlrdG9rSGFuZGxlOiBkYlVzZXIudGlrdG9rSGFuZGxlLFxuICAgICAgfSxcbiAgICAgIC8vIENoZWNrIHNlc3Npb24gZXhwaXJ5IGlmIG5lZWRlZCwgb3IgbnVsbCBpZiB3ZSByZWx5IG9uIHRoZSB0b2tlbiB2YWxpZGl0eSBjaGVjayB3ZSBqdXN0IGRpZFxuICAgICAgZXhwaXJlczogbnVsbCxcbiAgICB9O1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiQXV0aCBoZWxwZXIgZXJyb3I6XCIsIGVycik7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuXG5cblxuIl0sIm5hbWVzIjpbInByaXNtYSIsImNyZWF0ZUNsaWVudCIsImF1dGgiLCJzdXBhYmFzZSIsImRhdGEiLCJ1c2VyIiwiZXJyb3IiLCJnZXRVc2VyIiwiZGJVc2VyIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwiaWQiLCJlbWFpbCIsIm5hbWUiLCJyb2xlIiwicGxhbiIsImJhbGFuY2UiLCJOdW1iZXIiLCJ0aWt0b2tIYW5kbGUiLCJleHBpcmVzIiwiZXJyIiwiY29uc29sZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/auth.ts\n");

/***/ }),

/***/ "(rsc)/./lib/crypto.ts":
/*!***********************!*\
  !*** ./lib/crypto.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   decryptToken: () => (/* binding */ decryptToken),\n/* harmony export */   encryptToken: () => (/* binding */ encryptToken),\n/* harmony export */   isEncryptionConfigured: () => (/* binding */ isEncryptionConfigured),\n/* harmony export */   testEncryption: () => (/* binding */ testEncryption)\n/* harmony export */ });\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_0__);\n/**\r\n * Token Encryption Utilities\r\n * For secure storage of InsightIQ access/refresh tokens\r\n */ \nconst ENCRYPTION_KEY = process.env.ENCRYPTION_KEY || \"\";\nconst IV_LENGTH = 16;\nconst ALGORITHM = \"aes-256-cbc\";\n/**\r\n * Validate that the encryption key is properly configured\r\n * Call this before any encryption/decryption operations\r\n */ function validateEncryptionKey() {\n    if (!ENCRYPTION_KEY || ENCRYPTION_KEY.length !== 64) {\n        throw new Error(\"ENCRYPTION_KEY must be a 64-character hex string (32 bytes). \" + \"Generate with: node -e \\\"console.log(require('crypto').randomBytes(32).toString('hex'))\\\"\");\n    }\n}\n/**\r\n * Check if encryption is properly configured (without throwing)\r\n */ function isEncryptionConfigured() {\n    return ENCRYPTION_KEY.length === 64;\n}\n/**\r\n * Encrypt a token for secure database storage\r\n */ function encryptToken(token) {\n    validateEncryptionKey();\n    const iv = crypto__WEBPACK_IMPORTED_MODULE_0___default().randomBytes(IV_LENGTH);\n    const cipher = crypto__WEBPACK_IMPORTED_MODULE_0___default().createCipheriv(ALGORITHM, Buffer.from(ENCRYPTION_KEY, \"hex\"), iv);\n    let encrypted = cipher.update(token, \"utf8\", \"hex\");\n    encrypted += cipher.final(\"hex\");\n    // Return IV + encrypted data (separated by colon)\n    return iv.toString(\"hex\") + \":\" + encrypted;\n}\n/**\r\n * Decrypt a token from database storage\r\n */ function decryptToken(encryptedToken) {\n    validateEncryptionKey();\n    const parts = encryptedToken.split(\":\");\n    if (parts.length !== 2) {\n        throw new Error(\"Invalid encrypted token format\");\n    }\n    const iv = Buffer.from(parts[0], \"hex\");\n    const encrypted = parts[1];\n    const decipher = crypto__WEBPACK_IMPORTED_MODULE_0___default().createDecipheriv(ALGORITHM, Buffer.from(ENCRYPTION_KEY, \"hex\"), iv);\n    let decrypted = decipher.update(encrypted, \"hex\", \"utf8\");\n    decrypted += decipher.final(\"utf8\");\n    return decrypted;\n}\n/**\r\n * Verify encryption is working correctly\r\n * Use in tests or on startup\r\n */ function testEncryption() {\n    try {\n        if (!isEncryptionConfigured()) {\n            console.warn(\"Encryption not configured - ENCRYPTION_KEY is missing or invalid\");\n            return false;\n        }\n        const testToken = \"test-token-\" + Date.now();\n        const encrypted = encryptToken(testToken);\n        const decrypted = decryptToken(encrypted);\n        return testToken === decrypted;\n    } catch (error) {\n        console.error(\"Encryption test failed:\", error);\n        return false;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvY3J5cHRvLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBOzs7Q0FHQyxHQUUyQjtBQUU1QixNQUFNQyxpQkFBaUJDLFFBQVFDLEdBQUcsQ0FBQ0YsY0FBYyxJQUFJO0FBQ3JELE1BQU1HLFlBQVk7QUFDbEIsTUFBTUMsWUFBWTtBQUVsQjs7O0NBR0MsR0FDRCxTQUFTQztJQUNMLElBQUksQ0FBQ0wsa0JBQWtCQSxlQUFlTSxNQUFNLEtBQUssSUFBSTtRQUNqRCxNQUFNLElBQUlDLE1BQ04sa0VBQ0E7SUFFUjtBQUNKO0FBRUE7O0NBRUMsR0FDTSxTQUFTQztJQUNaLE9BQU9SLGVBQWVNLE1BQU0sS0FBSztBQUNyQztBQUVBOztDQUVDLEdBQ00sU0FBU0csYUFBYUMsS0FBYTtJQUN0Q0w7SUFFQSxNQUFNTSxLQUFLWix5REFBa0IsQ0FBQ0k7SUFDOUIsTUFBTVUsU0FBU2QsNERBQXFCLENBQ2hDSyxXQUNBVyxPQUFPQyxJQUFJLENBQUNoQixnQkFBZ0IsUUFDNUJXO0lBR0osSUFBSU0sWUFBWUosT0FBT0ssTUFBTSxDQUFDUixPQUFPLFFBQVE7SUFDN0NPLGFBQWFKLE9BQU9NLEtBQUssQ0FBQztJQUUxQixrREFBa0Q7SUFDbEQsT0FBT1IsR0FBR1MsUUFBUSxDQUFDLFNBQVMsTUFBTUg7QUFDdEM7QUFFQTs7Q0FFQyxHQUNNLFNBQVNJLGFBQWFDLGNBQXNCO0lBQy9DakI7SUFFQSxNQUFNa0IsUUFBUUQsZUFBZUUsS0FBSyxDQUFDO0lBRW5DLElBQUlELE1BQU1qQixNQUFNLEtBQUssR0FBRztRQUNwQixNQUFNLElBQUlDLE1BQU07SUFDcEI7SUFFQSxNQUFNSSxLQUFLSSxPQUFPQyxJQUFJLENBQUNPLEtBQUssQ0FBQyxFQUFFLEVBQUU7SUFDakMsTUFBTU4sWUFBWU0sS0FBSyxDQUFDLEVBQUU7SUFFMUIsTUFBTUUsV0FBVzFCLDhEQUF1QixDQUNwQ0ssV0FDQVcsT0FBT0MsSUFBSSxDQUFDaEIsZ0JBQWdCLFFBQzVCVztJQUdKLElBQUlnQixZQUFZRixTQUFTUCxNQUFNLENBQUNELFdBQVcsT0FBTztJQUNsRFUsYUFBYUYsU0FBU04sS0FBSyxDQUFDO0lBRTVCLE9BQU9RO0FBQ1g7QUFFQTs7O0NBR0MsR0FDTSxTQUFTQztJQUNaLElBQUk7UUFDQSxJQUFJLENBQUNwQiwwQkFBMEI7WUFDM0JxQixRQUFRQyxJQUFJLENBQUM7WUFDYixPQUFPO1FBQ1g7UUFFQSxNQUFNQyxZQUFZLGdCQUFnQkMsS0FBS0MsR0FBRztRQUMxQyxNQUFNaEIsWUFBWVIsYUFBYXNCO1FBQy9CLE1BQU1KLFlBQVlOLGFBQWFKO1FBQy9CLE9BQU9jLGNBQWNKO0lBQ3pCLEVBQUUsT0FBT08sT0FBTztRQUNaTCxRQUFRSyxLQUFLLENBQUMsMkJBQTJCQTtRQUN6QyxPQUFPO0lBQ1g7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL3Nlc2FyLXdlYi8uL2xpYi9jcnlwdG8udHM/OTI1YSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogVG9rZW4gRW5jcnlwdGlvbiBVdGlsaXRpZXNcclxuICogRm9yIHNlY3VyZSBzdG9yYWdlIG9mIEluc2lnaHRJUSBhY2Nlc3MvcmVmcmVzaCB0b2tlbnNcclxuICovXHJcblxyXG5pbXBvcnQgY3J5cHRvIGZyb20gJ2NyeXB0byc7XHJcblxyXG5jb25zdCBFTkNSWVBUSU9OX0tFWSA9IHByb2Nlc3MuZW52LkVOQ1JZUFRJT05fS0VZIHx8ICcnO1xyXG5jb25zdCBJVl9MRU5HVEggPSAxNjtcclxuY29uc3QgQUxHT1JJVEhNID0gJ2Flcy0yNTYtY2JjJztcclxuXHJcbi8qKlxyXG4gKiBWYWxpZGF0ZSB0aGF0IHRoZSBlbmNyeXB0aW9uIGtleSBpcyBwcm9wZXJseSBjb25maWd1cmVkXHJcbiAqIENhbGwgdGhpcyBiZWZvcmUgYW55IGVuY3J5cHRpb24vZGVjcnlwdGlvbiBvcGVyYXRpb25zXHJcbiAqL1xyXG5mdW5jdGlvbiB2YWxpZGF0ZUVuY3J5cHRpb25LZXkoKTogdm9pZCB7XHJcbiAgICBpZiAoIUVOQ1JZUFRJT05fS0VZIHx8IEVOQ1JZUFRJT05fS0VZLmxlbmd0aCAhPT0gNjQpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXHJcbiAgICAgICAgICAgICdFTkNSWVBUSU9OX0tFWSBtdXN0IGJlIGEgNjQtY2hhcmFjdGVyIGhleCBzdHJpbmcgKDMyIGJ5dGVzKS4gJyArXHJcbiAgICAgICAgICAgICdHZW5lcmF0ZSB3aXRoOiBub2RlIC1lIFwiY29uc29sZS5sb2cocmVxdWlyZShcXCdjcnlwdG9cXCcpLnJhbmRvbUJ5dGVzKDMyKS50b1N0cmluZyhcXCdoZXhcXCcpKVwiJ1xyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDaGVjayBpZiBlbmNyeXB0aW9uIGlzIHByb3Blcmx5IGNvbmZpZ3VyZWQgKHdpdGhvdXQgdGhyb3dpbmcpXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gaXNFbmNyeXB0aW9uQ29uZmlndXJlZCgpOiBib29sZWFuIHtcclxuICAgIHJldHVybiBFTkNSWVBUSU9OX0tFWS5sZW5ndGggPT09IDY0O1xyXG59XHJcblxyXG4vKipcclxuICogRW5jcnlwdCBhIHRva2VuIGZvciBzZWN1cmUgZGF0YWJhc2Ugc3RvcmFnZVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGVuY3J5cHRUb2tlbih0b2tlbjogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgIHZhbGlkYXRlRW5jcnlwdGlvbktleSgpO1xyXG4gICAgXHJcbiAgICBjb25zdCBpdiA9IGNyeXB0by5yYW5kb21CeXRlcyhJVl9MRU5HVEgpO1xyXG4gICAgY29uc3QgY2lwaGVyID0gY3J5cHRvLmNyZWF0ZUNpcGhlcml2KFxyXG4gICAgICAgIEFMR09SSVRITSxcclxuICAgICAgICBCdWZmZXIuZnJvbShFTkNSWVBUSU9OX0tFWSwgJ2hleCcpLFxyXG4gICAgICAgIGl2XHJcbiAgICApO1xyXG5cclxuICAgIGxldCBlbmNyeXB0ZWQgPSBjaXBoZXIudXBkYXRlKHRva2VuLCAndXRmOCcsICdoZXgnKTtcclxuICAgIGVuY3J5cHRlZCArPSBjaXBoZXIuZmluYWwoJ2hleCcpO1xyXG5cclxuICAgIC8vIFJldHVybiBJViArIGVuY3J5cHRlZCBkYXRhIChzZXBhcmF0ZWQgYnkgY29sb24pXHJcbiAgICByZXR1cm4gaXYudG9TdHJpbmcoJ2hleCcpICsgJzonICsgZW5jcnlwdGVkO1xyXG59XHJcblxyXG4vKipcclxuICogRGVjcnlwdCBhIHRva2VuIGZyb20gZGF0YWJhc2Ugc3RvcmFnZVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGRlY3J5cHRUb2tlbihlbmNyeXB0ZWRUb2tlbjogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgIHZhbGlkYXRlRW5jcnlwdGlvbktleSgpO1xyXG4gICAgXHJcbiAgICBjb25zdCBwYXJ0cyA9IGVuY3J5cHRlZFRva2VuLnNwbGl0KCc6Jyk7XHJcblxyXG4gICAgaWYgKHBhcnRzLmxlbmd0aCAhPT0gMikge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBlbmNyeXB0ZWQgdG9rZW4gZm9ybWF0Jyk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgaXYgPSBCdWZmZXIuZnJvbShwYXJ0c1swXSwgJ2hleCcpO1xyXG4gICAgY29uc3QgZW5jcnlwdGVkID0gcGFydHNbMV07XHJcblxyXG4gICAgY29uc3QgZGVjaXBoZXIgPSBjcnlwdG8uY3JlYXRlRGVjaXBoZXJpdihcclxuICAgICAgICBBTEdPUklUSE0sXHJcbiAgICAgICAgQnVmZmVyLmZyb20oRU5DUllQVElPTl9LRVksICdoZXgnKSxcclxuICAgICAgICBpdlxyXG4gICAgKTtcclxuXHJcbiAgICBsZXQgZGVjcnlwdGVkID0gZGVjaXBoZXIudXBkYXRlKGVuY3J5cHRlZCwgJ2hleCcsICd1dGY4Jyk7XHJcbiAgICBkZWNyeXB0ZWQgKz0gZGVjaXBoZXIuZmluYWwoJ3V0ZjgnKTtcclxuXHJcbiAgICByZXR1cm4gZGVjcnlwdGVkO1xyXG59XHJcblxyXG4vKipcclxuICogVmVyaWZ5IGVuY3J5cHRpb24gaXMgd29ya2luZyBjb3JyZWN0bHlcclxuICogVXNlIGluIHRlc3RzIG9yIG9uIHN0YXJ0dXBcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiB0ZXN0RW5jcnlwdGlvbigpOiBib29sZWFuIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgaWYgKCFpc0VuY3J5cHRpb25Db25maWd1cmVkKCkpIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKCdFbmNyeXB0aW9uIG5vdCBjb25maWd1cmVkIC0gRU5DUllQVElPTl9LRVkgaXMgbWlzc2luZyBvciBpbnZhbGlkJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgdGVzdFRva2VuID0gJ3Rlc3QtdG9rZW4tJyArIERhdGUubm93KCk7XHJcbiAgICAgICAgY29uc3QgZW5jcnlwdGVkID0gZW5jcnlwdFRva2VuKHRlc3RUb2tlbik7XHJcbiAgICAgICAgY29uc3QgZGVjcnlwdGVkID0gZGVjcnlwdFRva2VuKGVuY3J5cHRlZCk7XHJcbiAgICAgICAgcmV0dXJuIHRlc3RUb2tlbiA9PT0gZGVjcnlwdGVkO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFbmNyeXB0aW9uIHRlc3QgZmFpbGVkOicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbImNyeXB0byIsIkVOQ1JZUFRJT05fS0VZIiwicHJvY2VzcyIsImVudiIsIklWX0xFTkdUSCIsIkFMR09SSVRITSIsInZhbGlkYXRlRW5jcnlwdGlvbktleSIsImxlbmd0aCIsIkVycm9yIiwiaXNFbmNyeXB0aW9uQ29uZmlndXJlZCIsImVuY3J5cHRUb2tlbiIsInRva2VuIiwiaXYiLCJyYW5kb21CeXRlcyIsImNpcGhlciIsImNyZWF0ZUNpcGhlcml2IiwiQnVmZmVyIiwiZnJvbSIsImVuY3J5cHRlZCIsInVwZGF0ZSIsImZpbmFsIiwidG9TdHJpbmciLCJkZWNyeXB0VG9rZW4iLCJlbmNyeXB0ZWRUb2tlbiIsInBhcnRzIiwic3BsaXQiLCJkZWNpcGhlciIsImNyZWF0ZURlY2lwaGVyaXYiLCJkZWNyeXB0ZWQiLCJ0ZXN0RW5jcnlwdGlvbiIsImNvbnNvbGUiLCJ3YXJuIiwidGVzdFRva2VuIiwiRGF0ZSIsIm5vdyIsImVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/crypto.ts\n");

/***/ }),

/***/ "(rsc)/./lib/insightiq/client.ts":
/*!*********************************!*\
  !*** ./lib/insightiq/client.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   InsightIQClient: () => (/* binding */ InsightIQClient),\n/* harmony export */   insightIQClient: () => (/* binding */ insightIQClient)\n/* harmony export */ });\n/**\r\n * InsightIQ API Client\r\n * Handles all interactions with InsightIQ API for TikTok creator data\r\n * \r\n * Authentication: Basic Auth with Base64(Client_ID:Secret)\r\n * Documentation: https://docs.insightiq.ai\r\n * \r\n * IMPORTANT: All API calls must be made from server-side only (never from frontend)\r\n * \r\n * Environments:\r\n * - Sandbox: https://api.sandbox.insightiq.ai (mock data)\r\n * - Staging: https://api.staging.insightiq.ai (testing with limitations)\r\n * - Production: https://api.insightiq.ai (live data)\r\n */ // Maximum retry attempts for transient errors\nconst MAX_RETRIES = 3;\nconst RETRY_DELAY_MS = 1000;\nclass InsightIQClient {\n    constructor(config){\n        this.config = config;\n        this.isConfigured = !!(config.clientId && config.clientSecret && config.baseUrl);\n        // Pre-compute Basic Auth header\n        if (config.clientId && config.clientSecret) {\n            const credentials = `${config.clientId}:${config.clientSecret}`;\n            this.basicAuthHeader = `Basic ${Buffer.from(credentials).toString(\"base64\")}`;\n        } else {\n            this.basicAuthHeader = \"\";\n        }\n    }\n    /**\r\n     * Check if the client is properly configured\r\n     */ checkConfiguration() {\n        if (!this.isConfigured) {\n            throw new Error(\"InsightIQ is not configured. Please set INSIGHTIQ_CLIENT_ID, \" + \"INSIGHTIQ_CLIENT_SECRET, and INSIGHTIQ_BASE_URL environment variables.\");\n        }\n    }\n    /**\r\n     * Check if InsightIQ is configured (without throwing)\r\n     */ isInsightIQConfigured() {\n        return this.isConfigured;\n    }\n    /**\r\n     * Helper: Sleep for a given duration\r\n     */ sleep(ms) {\n        return new Promise((resolve)=>setTimeout(resolve, ms));\n    }\n    /**\r\n     * Helper: Make authenticated API request with retry logic\r\n     * \r\n     * Authentication: Basic Auth with Client_ID:Secret\r\n     * Rate Limit: Max 2 requests per second\r\n     * On 429 error, respects Retry-After header\r\n     */ async request(endpoint, options = {}, useUserToken = false, userToken, retryCount = 0) {\n        this.checkConfiguration();\n        const url = `${this.config.baseUrl}${endpoint}`;\n        const method = options.method || \"GET\";\n        const body = options.body;\n        // Build headers with Basic Auth\n        const headers = {\n            \"Content-Type\": \"application/json\",\n            \"Authorization\": this.basicAuthHeader\n        };\n        // For user-authenticated requests, also include Bearer token\n        if (useUserToken && userToken) {\n            headers[\"X-User-Token\"] = userToken;\n            console.log(\"[InsightIQ] Auth: Basic + User Token\");\n        } else {\n            console.log(\"[InsightIQ] Auth: Basic Auth\");\n        }\n        console.log(\"[InsightIQ] Request URL:\", url);\n        console.log(\"[InsightIQ] Method:\", method);\n        try {\n            const response = await fetch(url, {\n                method,\n                headers,\n                body: body || undefined\n            });\n            if (!response.ok) {\n                const errorText = await response.text();\n                let errorMessage = errorText;\n                let errorCode = `HTTP_${response.status}`;\n                try {\n                    // Try parsing JSON error\n                    const errorJson = JSON.parse(errorText);\n                    errorMessage = errorJson.error?.message || errorJson.message || errorJson.error || errorText;\n                    errorCode = errorJson.error?.code || errorJson.code || errorCode;\n                } catch (e) {\n                // Not JSON, use text\n                }\n                console.error(\"[InsightIQ] API Error:\", response.status, errorMessage);\n                // Handle rate limiting (429)\n                if (response.status === 429) {\n                    const retryAfter = response.headers.get(\"Retry-After\");\n                    const delay = retryAfter ? parseInt(retryAfter, 10) * 1000 : RETRY_DELAY_MS * Math.pow(2, retryCount);\n                    if (retryCount < MAX_RETRIES) {\n                        console.log(`[InsightIQ] Rate limited. Retrying in ${delay}ms (attempt ${retryCount + 1}/${MAX_RETRIES})`);\n                        await this.sleep(delay);\n                        return this.request(endpoint, options, useUserToken, userToken, retryCount + 1);\n                    }\n                }\n                // Retry on server errors (5xx)\n                if (retryCount < MAX_RETRIES && response.status >= 500) {\n                    const delay = RETRY_DELAY_MS * Math.pow(2, retryCount);\n                    console.log(`[InsightIQ] Server error. Retrying in ${delay}ms (attempt ${retryCount + 1}/${MAX_RETRIES})`);\n                    await this.sleep(delay);\n                    return this.request(endpoint, options, useUserToken, userToken, retryCount + 1);\n                }\n                throw new Error(`InsightIQ API Error (${response.status}): ${errorMessage}`);\n            }\n            return response.json();\n        } catch (error) {\n            // Handle network errors with retry\n            if (retryCount < MAX_RETRIES && error instanceof TypeError // Network errors\n            ) {\n                const delay = RETRY_DELAY_MS * Math.pow(2, retryCount);\n                console.log(`[InsightIQ] Network error, retrying in ${delay}ms (attempt ${retryCount + 1}/${MAX_RETRIES})`);\n                await this.sleep(delay);\n                return this.request(endpoint, options, useUserToken, userToken, retryCount + 1);\n            }\n            throw error;\n        }\n    }\n    /**\r\n     * USER API: Create a user in InsightIQ\r\n     * \r\n     * Must be called before creating SDK tokens.\r\n     * The external_id is your internal user ID that maps to InsightIQ's user.\r\n     * \r\n     * @param externalId - Your internal user ID\r\n     * @param name - Optional display name\r\n     */ async createUser(externalId, name) {\n        return this.request(\"/v1/users\", {\n            method: \"POST\",\n            body: JSON.stringify({\n                external_id: externalId,\n                name: name || externalId\n            })\n        });\n    }\n    /**\r\n     * USER API: Get or create a user in InsightIQ\r\n     * \r\n     * Tries to get existing user first, creates if not found.\r\n     * \r\n     * @param externalId - Your internal user ID\r\n     * @param name - Optional display name\r\n     */ async getOrCreateUser(externalId, name) {\n        try {\n            // Try to get existing user\n            const user = await this.request(`/v1/users/external_id/${externalId}`, {\n                method: \"GET\"\n            });\n            console.log(\"[InsightIQ] Found existing user:\", user.id);\n            return user;\n        } catch (error) {\n            // If user doesn't exist (404), create them\n            if (error.message?.includes(\"404\") || error.message?.includes(\"not found\")) {\n                console.log(\"[InsightIQ] User not found, creating new user...\");\n                const newUser = await this.createUser(externalId, name);\n                console.log(\"[InsightIQ] Created new user:\", newUser.id);\n                return newUser;\n            }\n            throw error;\n        }\n    }\n    /**\r\n     * SDK TOKEN API: Create a short-lived SDK token for Connect SDK\r\n     * \r\n     * This token is used to initialize the frontend Connect SDK or redirect flow.\r\n     * Valid for 1 week but should be refreshed before expiry.\r\n     * \r\n     * Note: User must exist in InsightIQ first (use getOrCreateUser)\r\n     * \r\n     * @param insightiqUserId - InsightIQ's user ID (not your internal ID)\r\n     * @param products - Array of products to request access to\r\n     * @param redirectUrl - Optional redirect URL for redirect flow (no SDK needed)\r\n     */ async createSdkToken(insightiqUserId, products = [\n        \"IDENTITY\",\n        \"ENGAGEMENT\"\n    ], redirectUrl) {\n        const body = {\n            user_id: insightiqUserId,\n            products\n        };\n        // Add redirect URL for redirect flow (no frontend SDK needed)\n        if (redirectUrl) {\n            body.redirect_url = redirectUrl;\n        }\n        const response = await this.request(\"/v1/sdk-tokens\", {\n            method: \"POST\",\n            body: JSON.stringify(body)\n        });\n        console.log(\"[InsightIQ] SDK Token Response:\", JSON.stringify(response, null, 2));\n        // Handle different response formats\n        return {\n            sdk_token: response.sdk_token || response.token,\n            sdk_token_id: response.sdk_token_id || response.id,\n            expires_at: response.expires_at,\n            user_id: response.user_id,\n            connect_url: response.connect_url || response.url\n        };\n    }\n    /**\r\n     * Get the Connect URL for redirect flow\r\n     * \r\n     * Use InsightIQ's hosted connect page.\r\n     * \r\n     * @param sdkToken - The SDK token from createSdkToken\r\n     * @param workPlatformId - Optional: skip platform selection (e.g., TikTok ID)\r\n     * @param environment - sandbox, staging, or production\r\n     */ getConnectUrl(sdkToken, workPlatformId, environment) {\n        // InsightIQ/Phyllo Connect URL format\n        // Based on environment\n        let baseConnectUrl;\n        if (environment === \"sandbox\" || this.config.baseUrl.includes(\"sandbox\")) {\n            baseConnectUrl = \"https://connect.sandbox.insightiq.ai\";\n        } else if (environment === \"staging\" || this.config.baseUrl.includes(\"staging\")) {\n            baseConnectUrl = \"https://connect.staging.insightiq.ai\";\n        } else {\n            baseConnectUrl = \"https://connect.insightiq.ai\";\n        }\n        // Build URL with required parameters\n        const params = new URLSearchParams();\n        params.set(\"sdk_token\", sdkToken);\n        if (workPlatformId) {\n            params.set(\"work_platform_id\", workPlatformId);\n        }\n        const url = `${baseConnectUrl}?${params.toString()}`;\n        console.log(\"[InsightIQ] Connect URL:\", url);\n        return url;\n    }\n    /**\r\n     * ACCOUNTS API: Get account details by account ID\r\n     * \r\n     * Returns account information including username, profile picture, etc.\r\n     * \r\n     * @param accountId - The Phyllo/InsightIQ account ID\r\n     */ async getAccount(accountId) {\n        const response = await this.request(`/v1/accounts/${accountId}`, {\n            method: \"GET\"\n        });\n        console.log(\"[InsightIQ] Account details:\", JSON.stringify(response, null, 2));\n        return {\n            id: response.id,\n            user_id: response.user_id,\n            work_platform_id: response.work_platform_id,\n            username: response.username || response.platform_username,\n            platform_username: response.platform_username,\n            platform_profile_name: response.platform_profile_name,\n            platform_profile_picture_url: response.platform_profile_picture_url,\n            status: response.status,\n            created_at: response.created_at,\n            updated_at: response.updated_at\n        };\n    }\n    /**\r\n     * WORK PLATFORMS API: Get all available work platforms\r\n     * \r\n     * Use this to find the correct work_platform_id for TikTok or other platforms.\r\n     */ async getWorkPlatforms() {\n        const response = await this.request(\"/v1/work-platforms\", {\n            method: \"GET\"\n        });\n        console.log(\"[InsightIQ] Work platforms:\", JSON.stringify(response, null, 2));\n        return response;\n    }\n    /**\r\n     * Find TikTok work platform ID\r\n     */ async getTikTokPlatformId() {\n        try {\n            const platforms = await this.getWorkPlatforms();\n            const tiktok = platforms.data?.find((p)=>p.name.toLowerCase().includes(\"tiktok\"));\n            if (tiktok) {\n                console.log(\"[InsightIQ] Found TikTok platform:\", tiktok);\n                return tiktok.id;\n            }\n            return null;\n        } catch (error) {\n            console.error(\"[InsightIQ] Failed to get TikTok platform ID:\", error);\n            return null;\n        }\n    }\n    /**\r\n     * @deprecated Use createSdkToken() instead - this endpoint doesn't exist\r\n     * The Connect SDK handles the OAuth flow on the frontend\r\n     */ async initiateConnection(userId) {\n        // Redirect to using SDK token flow\n        throw new Error(\"initiateConnection is deprecated. Use createSdkToken() to get an SDK token, \" + \"then initialize the Connect SDK on the frontend.\");\n    }\n    /**\r\n     * CONNECT API: Exchange user_token for access_token\r\n     */ async exchangeToken(userToken) {\n        return this.request(\"/v1/connect/token\", {\n            method: \"POST\",\n            body: JSON.stringify({\n                user_token: userToken\n            })\n        });\n    }\n    /**\r\n     * CONNECT API: Refresh access token\r\n     */ async refreshToken(refreshToken) {\n        return this.request(\"/v1/connect/refresh\", {\n            method: \"POST\",\n            body: JSON.stringify({\n                refresh_token: refreshToken\n            })\n        });\n    }\n    /**\r\n     * SOCIAL CONTENT API: Get user's TikTok videos\r\n     */ async getUserContents(accessToken, params) {\n        const queryParams = new URLSearchParams({\n            platform: \"tiktok\",\n            limit: String(params?.limit || 50),\n            offset: String(params?.offset || 0)\n        });\n        if (params?.from_date) {\n            queryParams.set(\"from_date\", params.from_date);\n        }\n        if (params?.to_date) {\n            queryParams.set(\"to_date\", params.to_date);\n        }\n        return this.request(`/v1/social/contents?${queryParams}`, {}, true, accessToken);\n    }\n    /**\r\n     * SOCIAL CONTENT API: Fetch specific content by URL\r\n     */ async fetchContentByUrl(url) {\n        const response = await this.request(\"/v1/social/creators/contents/fetch\", {\n            method: \"POST\",\n            body: JSON.stringify({\n                platform: \"tiktok\",\n                url\n            })\n        });\n        return response.data;\n    }\n    /**\r\n     * IDENTITY API: Get user's TikTok profile\r\n     */ async getUserIdentity(accessToken) {\n        return this.request(\"/v1/social/identity?platform=tiktok\", {}, true, accessToken);\n    }\n    /**\r\n     * HELPER: Find videos using a specific music track\r\n     */ async findVideosByMusicId(accessToken, musicId, limit = 100) {\n        const contents = await this.getUserContents(accessToken, {\n            limit\n        });\n        return contents.data.filter((content)=>content.audio_track_info?.id === musicId);\n    }\n    /**\r\n     * HELPER: Get all videos (paginated)\r\n     */ async getAllUserContents(accessToken) {\n        const allVideos = [];\n        let offset = 0;\n        const limit = 100;\n        let hasMore = true;\n        while(hasMore){\n            const response = await this.getUserContents(accessToken, {\n                limit,\n                offset\n            });\n            allVideos.push(...response.data);\n            hasMore = response.pagination.has_more;\n            offset += limit;\n            // Safety limit to prevent infinite loops\n            if (offset > 1000) {\n                console.warn(\"Reached safety limit of 1000 videos\");\n                break;\n            }\n        }\n        return allVideos;\n    }\n}\n/**\r\n * Singleton instance for use throughout the application\r\n * Note: Configuration is validated at runtime, not at import time\r\n */ const insightIQClient = new InsightIQClient({\n    clientId: process.env.INSIGHTIQ_CLIENT_ID || \"\",\n    clientSecret: process.env.INSIGHTIQ_CLIENT_SECRET || \"\",\n    baseUrl: process.env.INSIGHTIQ_BASE_URL || \"\",\n    redirectUri: process.env.INSIGHTIQ_REDIRECT_URI || \"\"\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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R0FDRCxNQUFNSyxtQkFBbUJoQixXQUFtQixFQUE0QjtRQUNwRSxNQUFNaUIsWUFBNkIsRUFBRTtRQUNyQyxJQUFJWixTQUFTO1FBQ2IsTUFBTUYsUUFBUTtRQUNkLElBQUllLFVBQVU7UUFFZCxNQUFPQSxRQUFTO1lBQ1osTUFBTS9GLFdBQVcsTUFBTSxJQUFJLENBQUM0RSxlQUFlLENBQUNDLGFBQWE7Z0JBQ3JERztnQkFDQUU7WUFDSjtZQUVBWSxVQUFVRSxJQUFJLElBQUloRyxTQUFTa0UsSUFBSTtZQUMvQjZCLFVBQVUvRixTQUFTaUcsVUFBVSxDQUFDQyxRQUFRO1lBQ3RDaEIsVUFBVUY7WUFFVix5Q0FBeUM7WUFDekMsSUFBSUUsU0FBUyxNQUFNO2dCQUNmcEYsUUFBUXFHLElBQUksQ0FBQztnQkFDYjtZQUNKO1FBQ0o7UUFFQSxPQUFPTDtJQUNYO0FBQ0o7QUFFQTs7O0NBR0MsR0FDTSxNQUFNTSxrQkFBa0IsSUFBSXBJLGdCQUFnQjtJQUMvQ0ksVUFBVWlJLFFBQVFDLEdBQUcsQ0FBQ0MsbUJBQW1CLElBQUk7SUFDN0NsSSxjQUFjZ0ksUUFBUUMsR0FBRyxDQUFDRSx1QkFBdUIsSUFBSTtJQUNyRGxJLFNBQVMrSCxRQUFRQyxHQUFHLENBQUNHLGtCQUFrQixJQUFJO0lBQzNDQyxhQUFhTCxRQUFRQyxHQUFHLENBQUNLLHNCQUFzQixJQUFJO0FBQ3ZELEdBQUciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZXNhci13ZWIvLi9saWIvaW5zaWdodGlxL2NsaWVudC50cz9lMzFiIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBJbnNpZ2h0SVEgQVBJIENsaWVudFxyXG4gKiBIYW5kbGVzIGFsbCBpbnRlcmFjdGlvbnMgd2l0aCBJbnNpZ2h0SVEgQVBJIGZvciBUaWtUb2sgY3JlYXRvciBkYXRhXHJcbiAqIFxyXG4gKiBBdXRoZW50aWNhdGlvbjogQmFzaWMgQXV0aCB3aXRoIEJhc2U2NChDbGllbnRfSUQ6U2VjcmV0KVxyXG4gKiBEb2N1bWVudGF0aW9uOiBodHRwczovL2RvY3MuaW5zaWdodGlxLmFpXHJcbiAqIFxyXG4gKiBJTVBPUlRBTlQ6IEFsbCBBUEkgY2FsbHMgbXVzdCBiZSBtYWRlIGZyb20gc2VydmVyLXNpZGUgb25seSAobmV2ZXIgZnJvbSBmcm9udGVuZClcclxuICogXHJcbiAqIEVudmlyb25tZW50czpcclxuICogLSBTYW5kYm94OiBodHRwczovL2FwaS5zYW5kYm94Lmluc2lnaHRpcS5haSAobW9jayBkYXRhKVxyXG4gKiAtIFN0YWdpbmc6IGh0dHBzOi8vYXBpLnN0YWdpbmcuaW5zaWdodGlxLmFpICh0ZXN0aW5nIHdpdGggbGltaXRhdGlvbnMpXHJcbiAqIC0gUHJvZHVjdGlvbjogaHR0cHM6Ly9hcGkuaW5zaWdodGlxLmFpIChsaXZlIGRhdGEpXHJcbiAqL1xyXG5cclxuaW1wb3J0IHtcclxuICAgIEluc2lnaHRJUUNvbmZpZyxcclxuICAgIENvbm5lY3RJbml0aWF0ZVJlc3BvbnNlLFxyXG4gICAgVG9rZW5FeGNoYW5nZVJlc3BvbnNlLFxyXG4gICAgQ29udGVudHNSZXNwb25zZSxcclxuICAgIFRpa1Rva0NvbnRlbnQsXHJcbiAgICBHZXRDb250ZW50c1BhcmFtcyxcclxuICAgIEZldGNoQ29udGVudFJlc3BvbnNlLFxyXG4gICAgVXNlcklkZW50aXR5LFxyXG4gICAgSW5zaWdodElRRXJyb3IsXHJcbn0gZnJvbSAnLi90eXBlcyc7XHJcblxyXG4vLyBNYXhpbXVtIHJldHJ5IGF0dGVtcHRzIGZvciB0cmFuc2llbnQgZXJyb3JzXHJcbmNvbnN0IE1BWF9SRVRSSUVTID0gMztcclxuY29uc3QgUkVUUllfREVMQVlfTVMgPSAxMDAwO1xyXG5cclxuZXhwb3J0IGNsYXNzIEluc2lnaHRJUUNsaWVudCB7XHJcbiAgICBwcml2YXRlIGNvbmZpZzogSW5zaWdodElRQ29uZmlnO1xyXG4gICAgcHJpdmF0ZSBpc0NvbmZpZ3VyZWQ6IGJvb2xlYW47XHJcbiAgICBwcml2YXRlIGJhc2ljQXV0aEhlYWRlcjogc3RyaW5nO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGNvbmZpZzogSW5zaWdodElRQ29uZmlnKSB7XHJcbiAgICAgICAgdGhpcy5jb25maWcgPSBjb25maWc7XHJcbiAgICAgICAgdGhpcy5pc0NvbmZpZ3VyZWQgPSAhIShcclxuICAgICAgICAgICAgY29uZmlnLmNsaWVudElkICYmXHJcbiAgICAgICAgICAgIGNvbmZpZy5jbGllbnRTZWNyZXQgJiZcclxuICAgICAgICAgICAgY29uZmlnLmJhc2VVcmxcclxuICAgICAgICApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFByZS1jb21wdXRlIEJhc2ljIEF1dGggaGVhZGVyXHJcbiAgICAgICAgaWYgKGNvbmZpZy5jbGllbnRJZCAmJiBjb25maWcuY2xpZW50U2VjcmV0KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNyZWRlbnRpYWxzID0gYCR7Y29uZmlnLmNsaWVudElkfToke2NvbmZpZy5jbGllbnRTZWNyZXR9YDtcclxuICAgICAgICAgICAgdGhpcy5iYXNpY0F1dGhIZWFkZXIgPSBgQmFzaWMgJHtCdWZmZXIuZnJvbShjcmVkZW50aWFscykudG9TdHJpbmcoJ2Jhc2U2NCcpfWA7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5iYXNpY0F1dGhIZWFkZXIgPSAnJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDaGVjayBpZiB0aGUgY2xpZW50IGlzIHByb3Blcmx5IGNvbmZpZ3VyZWRcclxuICAgICAqL1xyXG4gICAgcHVibGljIGNoZWNrQ29uZmlndXJhdGlvbigpOiB2b2lkIHtcclxuICAgICAgICBpZiAoIXRoaXMuaXNDb25maWd1cmVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcclxuICAgICAgICAgICAgICAgICdJbnNpZ2h0SVEgaXMgbm90IGNvbmZpZ3VyZWQuIFBsZWFzZSBzZXQgSU5TSUdIVElRX0NMSUVOVF9JRCwgJyArXHJcbiAgICAgICAgICAgICAgICAnSU5TSUdIVElRX0NMSUVOVF9TRUNSRVQsIGFuZCBJTlNJR0hUSVFfQkFTRV9VUkwgZW52aXJvbm1lbnQgdmFyaWFibGVzLidcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDaGVjayBpZiBJbnNpZ2h0SVEgaXMgY29uZmlndXJlZCAod2l0aG91dCB0aHJvd2luZylcclxuICAgICAqL1xyXG4gICAgcHVibGljIGlzSW5zaWdodElRQ29uZmlndXJlZCgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pc0NvbmZpZ3VyZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIZWxwZXI6IFNsZWVwIGZvciBhIGdpdmVuIGR1cmF0aW9uXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgc2xlZXAobXM6IG51bWJlcik6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEhlbHBlcjogTWFrZSBhdXRoZW50aWNhdGVkIEFQSSByZXF1ZXN0IHdpdGggcmV0cnkgbG9naWNcclxuICAgICAqIFxyXG4gICAgICogQXV0aGVudGljYXRpb246IEJhc2ljIEF1dGggd2l0aCBDbGllbnRfSUQ6U2VjcmV0XHJcbiAgICAgKiBSYXRlIExpbWl0OiBNYXggMiByZXF1ZXN0cyBwZXIgc2Vjb25kXHJcbiAgICAgKiBPbiA0MjkgZXJyb3IsIHJlc3BlY3RzIFJldHJ5LUFmdGVyIGhlYWRlclxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGFzeW5jIHJlcXVlc3Q8VD4oXHJcbiAgICAgICAgZW5kcG9pbnQ6IHN0cmluZyxcclxuICAgICAgICBvcHRpb25zOiBSZXF1ZXN0SW5pdCA9IHt9LFxyXG4gICAgICAgIHVzZVVzZXJUb2tlbiA9IGZhbHNlLFxyXG4gICAgICAgIHVzZXJUb2tlbj86IHN0cmluZyxcclxuICAgICAgICByZXRyeUNvdW50ID0gMFxyXG4gICAgKTogUHJvbWlzZTxUPiB7XHJcbiAgICAgICAgdGhpcy5jaGVja0NvbmZpZ3VyYXRpb24oKTtcclxuXHJcbiAgICAgICAgY29uc3QgdXJsID0gYCR7dGhpcy5jb25maWcuYmFzZVVybH0ke2VuZHBvaW50fWA7XHJcbiAgICAgICAgY29uc3QgbWV0aG9kID0gb3B0aW9ucy5tZXRob2QgfHwgJ0dFVCc7XHJcbiAgICAgICAgY29uc3QgYm9keSA9IG9wdGlvbnMuYm9keSBhcyBzdHJpbmcgfCB1bmRlZmluZWQ7XHJcblxyXG4gICAgICAgIC8vIEJ1aWxkIGhlYWRlcnMgd2l0aCBCYXNpYyBBdXRoXHJcbiAgICAgICAgY29uc3QgaGVhZGVyczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcclxuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiB0aGlzLmJhc2ljQXV0aEhlYWRlcixcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBGb3IgdXNlci1hdXRoZW50aWNhdGVkIHJlcXVlc3RzLCBhbHNvIGluY2x1ZGUgQmVhcmVyIHRva2VuXHJcbiAgICAgICAgaWYgKHVzZVVzZXJUb2tlbiAmJiB1c2VyVG9rZW4pIHtcclxuICAgICAgICAgICAgaGVhZGVyc1snWC1Vc2VyLVRva2VuJ10gPSB1c2VyVG9rZW47XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbSW5zaWdodElRXSBBdXRoOiBCYXNpYyArIFVzZXIgVG9rZW4nKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnW0luc2lnaHRJUV0gQXV0aDogQmFzaWMgQXV0aCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc29sZS5sb2coJ1tJbnNpZ2h0SVFdIFJlcXVlc3QgVVJMOicsIHVybCk7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1tJbnNpZ2h0SVFdIE1ldGhvZDonLCBtZXRob2QpO1xyXG5cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwge1xyXG4gICAgICAgICAgICAgICAgbWV0aG9kLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVycyxcclxuICAgICAgICAgICAgICAgIGJvZHk6IGJvZHkgfHwgdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yVGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcclxuICAgICAgICAgICAgICAgIGxldCBlcnJvck1lc3NhZ2UgPSBlcnJvclRleHQ7XHJcbiAgICAgICAgICAgICAgICBsZXQgZXJyb3JDb2RlID0gYEhUVFBfJHtyZXNwb25zZS5zdGF0dXN9YDtcclxuXHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFRyeSBwYXJzaW5nIEpTT04gZXJyb3JcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBlcnJvckpzb24gPSBKU09OLnBhcnNlKGVycm9yVGV4dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlID0gZXJyb3JKc29uLmVycm9yPy5tZXNzYWdlIHx8IGVycm9ySnNvbi5tZXNzYWdlIHx8IGVycm9ySnNvbi5lcnJvciB8fCBlcnJvclRleHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JDb2RlID0gZXJyb3JKc29uLmVycm9yPy5jb2RlIHx8IGVycm9ySnNvbi5jb2RlIHx8IGVycm9yQ29kZTtcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBOb3QgSlNPTiwgdXNlIHRleHRcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbSW5zaWdodElRXSBBUEkgRXJyb3I6JywgcmVzcG9uc2Uuc3RhdHVzLCBlcnJvck1lc3NhZ2UpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIEhhbmRsZSByYXRlIGxpbWl0aW5nICg0MjkpXHJcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MjkpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXRyeUFmdGVyID0gcmVzcG9uc2UuaGVhZGVycy5nZXQoJ1JldHJ5LUFmdGVyJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGVsYXkgPSByZXRyeUFmdGVyID8gcGFyc2VJbnQocmV0cnlBZnRlciwgMTApICogMTAwMCA6IFJFVFJZX0RFTEFZX01TICogTWF0aC5wb3coMiwgcmV0cnlDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJldHJ5Q291bnQgPCBNQVhfUkVUUklFUykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgW0luc2lnaHRJUV0gUmF0ZSBsaW1pdGVkLiBSZXRyeWluZyBpbiAke2RlbGF5fW1zIChhdHRlbXB0ICR7cmV0cnlDb3VudCArIDF9LyR7TUFYX1JFVFJJRVN9KWApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNsZWVwKGRlbGF5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdDxUPihlbmRwb2ludCwgb3B0aW9ucywgdXNlVXNlclRva2VuLCB1c2VyVG9rZW4sIHJldHJ5Q291bnQgKyAxKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gUmV0cnkgb24gc2VydmVyIGVycm9ycyAoNXh4KVxyXG4gICAgICAgICAgICAgICAgaWYgKHJldHJ5Q291bnQgPCBNQVhfUkVUUklFUyAmJiByZXNwb25zZS5zdGF0dXMgPj0gNTAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGVsYXkgPSBSRVRSWV9ERUxBWV9NUyAqIE1hdGgucG93KDIsIHJldHJ5Q291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbSW5zaWdodElRXSBTZXJ2ZXIgZXJyb3IuIFJldHJ5aW5nIGluICR7ZGVsYXl9bXMgKGF0dGVtcHQgJHtyZXRyeUNvdW50ICsgMX0vJHtNQVhfUkVUUklFU30pYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zbGVlcChkZWxheSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdDxUPihlbmRwb2ludCwgb3B0aW9ucywgdXNlVXNlclRva2VuLCB1c2VyVG9rZW4sIHJldHJ5Q291bnQgKyAxKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEluc2lnaHRJUSBBUEkgRXJyb3IgKCR7cmVzcG9uc2Uuc3RhdHVzfSk6ICR7ZXJyb3JNZXNzYWdlfWApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIC8vIEhhbmRsZSBuZXR3b3JrIGVycm9ycyB3aXRoIHJldHJ5XHJcbiAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgIHJldHJ5Q291bnQgPCBNQVhfUkVUUklFUyAmJlxyXG4gICAgICAgICAgICAgICAgZXJyb3IgaW5zdGFuY2VvZiBUeXBlRXJyb3IgLy8gTmV0d29yayBlcnJvcnNcclxuICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkZWxheSA9IFJFVFJZX0RFTEFZX01TICogTWF0aC5wb3coMiwgcmV0cnlDb3VudCk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgW0luc2lnaHRJUV0gTmV0d29yayBlcnJvciwgcmV0cnlpbmcgaW4gJHtkZWxheX1tcyAoYXR0ZW1wdCAke3JldHJ5Q291bnQgKyAxfS8ke01BWF9SRVRSSUVTfSlgKTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2xlZXAoZGVsYXkpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdDxUPihlbmRwb2ludCwgb3B0aW9ucywgdXNlVXNlclRva2VuLCB1c2VyVG9rZW4sIHJldHJ5Q291bnQgKyAxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVU0VSIEFQSTogQ3JlYXRlIGEgdXNlciBpbiBJbnNpZ2h0SVFcclxuICAgICAqIFxyXG4gICAgICogTXVzdCBiZSBjYWxsZWQgYmVmb3JlIGNyZWF0aW5nIFNESyB0b2tlbnMuXHJcbiAgICAgKiBUaGUgZXh0ZXJuYWxfaWQgaXMgeW91ciBpbnRlcm5hbCB1c2VyIElEIHRoYXQgbWFwcyB0byBJbnNpZ2h0SVEncyB1c2VyLlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0gZXh0ZXJuYWxJZCAtIFlvdXIgaW50ZXJuYWwgdXNlciBJRFxyXG4gICAgICogQHBhcmFtIG5hbWUgLSBPcHRpb25hbCBkaXNwbGF5IG5hbWVcclxuICAgICAqL1xyXG4gICAgYXN5bmMgY3JlYXRlVXNlcihcclxuICAgICAgICBleHRlcm5hbElkOiBzdHJpbmcsXHJcbiAgICAgICAgbmFtZT86IHN0cmluZ1xyXG4gICAgKTogUHJvbWlzZTx7IGlkOiBzdHJpbmc7IGV4dGVybmFsX2lkOiBzdHJpbmc7IGNyZWF0ZWRfYXQ6IHN0cmluZyB9PiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdDx7IGlkOiBzdHJpbmc7IGV4dGVybmFsX2lkOiBzdHJpbmc7IGNyZWF0ZWRfYXQ6IHN0cmluZyB9PihcclxuICAgICAgICAgICAgJy92MS91c2VycycsXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgICAgICAgICAgIGV4dGVybmFsX2lkOiBleHRlcm5hbElkLFxyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IG5hbWUgfHwgZXh0ZXJuYWxJZCxcclxuICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFVTRVIgQVBJOiBHZXQgb3IgY3JlYXRlIGEgdXNlciBpbiBJbnNpZ2h0SVFcclxuICAgICAqIFxyXG4gICAgICogVHJpZXMgdG8gZ2V0IGV4aXN0aW5nIHVzZXIgZmlyc3QsIGNyZWF0ZXMgaWYgbm90IGZvdW5kLlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0gZXh0ZXJuYWxJZCAtIFlvdXIgaW50ZXJuYWwgdXNlciBJRFxyXG4gICAgICogQHBhcmFtIG5hbWUgLSBPcHRpb25hbCBkaXNwbGF5IG5hbWVcclxuICAgICAqL1xyXG4gICAgYXN5bmMgZ2V0T3JDcmVhdGVVc2VyKFxyXG4gICAgICAgIGV4dGVybmFsSWQ6IHN0cmluZyxcclxuICAgICAgICBuYW1lPzogc3RyaW5nXHJcbiAgICApOiBQcm9taXNlPHsgaWQ6IHN0cmluZzsgZXh0ZXJuYWxfaWQ6IHN0cmluZyB9PiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gVHJ5IHRvIGdldCBleGlzdGluZyB1c2VyXHJcbiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8eyBpZDogc3RyaW5nOyBleHRlcm5hbF9pZDogc3RyaW5nIH0+KFxyXG4gICAgICAgICAgICAgICAgYC92MS91c2Vycy9leHRlcm5hbF9pZC8ke2V4dGVybmFsSWR9YCxcclxuICAgICAgICAgICAgICAgIHsgbWV0aG9kOiAnR0VUJyB9XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbSW5zaWdodElRXSBGb3VuZCBleGlzdGluZyB1c2VyOicsIHVzZXIuaWQpO1xyXG4gICAgICAgICAgICByZXR1cm4gdXNlcjtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgICAgICAgIC8vIElmIHVzZXIgZG9lc24ndCBleGlzdCAoNDA0KSwgY3JlYXRlIHRoZW1cclxuICAgICAgICAgICAgaWYgKGVycm9yLm1lc3NhZ2U/LmluY2x1ZGVzKCc0MDQnKSB8fCBlcnJvci5tZXNzYWdlPy5pbmNsdWRlcygnbm90IGZvdW5kJykpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbSW5zaWdodElRXSBVc2VyIG5vdCBmb3VuZCwgY3JlYXRpbmcgbmV3IHVzZXIuLi4nKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1VzZXIgPSBhd2FpdCB0aGlzLmNyZWF0ZVVzZXIoZXh0ZXJuYWxJZCwgbmFtZSk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW0luc2lnaHRJUV0gQ3JlYXRlZCBuZXcgdXNlcjonLCBuZXdVc2VyLmlkKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXdVc2VyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNESyBUT0tFTiBBUEk6IENyZWF0ZSBhIHNob3J0LWxpdmVkIFNESyB0b2tlbiBmb3IgQ29ubmVjdCBTREtcclxuICAgICAqIFxyXG4gICAgICogVGhpcyB0b2tlbiBpcyB1c2VkIHRvIGluaXRpYWxpemUgdGhlIGZyb250ZW5kIENvbm5lY3QgU0RLIG9yIHJlZGlyZWN0IGZsb3cuXHJcbiAgICAgKiBWYWxpZCBmb3IgMSB3ZWVrIGJ1dCBzaG91bGQgYmUgcmVmcmVzaGVkIGJlZm9yZSBleHBpcnkuXHJcbiAgICAgKiBcclxuICAgICAqIE5vdGU6IFVzZXIgbXVzdCBleGlzdCBpbiBJbnNpZ2h0SVEgZmlyc3QgKHVzZSBnZXRPckNyZWF0ZVVzZXIpXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSBpbnNpZ2h0aXFVc2VySWQgLSBJbnNpZ2h0SVEncyB1c2VyIElEIChub3QgeW91ciBpbnRlcm5hbCBJRClcclxuICAgICAqIEBwYXJhbSBwcm9kdWN0cyAtIEFycmF5IG9mIHByb2R1Y3RzIHRvIHJlcXVlc3QgYWNjZXNzIHRvXHJcbiAgICAgKiBAcGFyYW0gcmVkaXJlY3RVcmwgLSBPcHRpb25hbCByZWRpcmVjdCBVUkwgZm9yIHJlZGlyZWN0IGZsb3cgKG5vIFNESyBuZWVkZWQpXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGNyZWF0ZVNka1Rva2VuKFxyXG4gICAgICAgIGluc2lnaHRpcVVzZXJJZDogc3RyaW5nLFxyXG4gICAgICAgIHByb2R1Y3RzOiBzdHJpbmdbXSA9IFsnSURFTlRJVFknLCAnRU5HQUdFTUVOVCddLFxyXG4gICAgICAgIHJlZGlyZWN0VXJsPzogc3RyaW5nXHJcbiAgICApOiBQcm9taXNlPHsgXHJcbiAgICAgICAgc2RrX3Rva2VuOiBzdHJpbmc7IFxyXG4gICAgICAgIHNka190b2tlbl9pZDogc3RyaW5nO1xyXG4gICAgICAgIGV4cGlyZXNfYXQ6IHN0cmluZzsgXHJcbiAgICAgICAgdXNlcl9pZDogc3RyaW5nO1xyXG4gICAgICAgIGNvbm5lY3RfdXJsPzogc3RyaW5nOyAgLy8gU29tZSBBUElzIHJldHVybiB0aGlzXHJcbiAgICB9PiB7XHJcbiAgICAgICAgY29uc3QgYm9keTogUmVjb3JkPHN0cmluZywgYW55PiA9IHtcclxuICAgICAgICAgICAgdXNlcl9pZDogaW5zaWdodGlxVXNlcklkLFxyXG4gICAgICAgICAgICBwcm9kdWN0cyxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBBZGQgcmVkaXJlY3QgVVJMIGZvciByZWRpcmVjdCBmbG93IChubyBmcm9udGVuZCBTREsgbmVlZGVkKVxyXG4gICAgICAgIGlmIChyZWRpcmVjdFVybCkge1xyXG4gICAgICAgICAgICBib2R5LnJlZGlyZWN0X3VybCA9IHJlZGlyZWN0VXJsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3Q8YW55PihcclxuICAgICAgICAgICAgJy92MS9zZGstdG9rZW5zJyxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KSxcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGNvbnNvbGUubG9nKCdbSW5zaWdodElRXSBTREsgVG9rZW4gUmVzcG9uc2U6JywgSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UsIG51bGwsIDIpKTtcclxuXHJcbiAgICAgICAgLy8gSGFuZGxlIGRpZmZlcmVudCByZXNwb25zZSBmb3JtYXRzXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgc2RrX3Rva2VuOiByZXNwb25zZS5zZGtfdG9rZW4gfHwgcmVzcG9uc2UudG9rZW4sXHJcbiAgICAgICAgICAgIHNka190b2tlbl9pZDogcmVzcG9uc2Uuc2RrX3Rva2VuX2lkIHx8IHJlc3BvbnNlLmlkLFxyXG4gICAgICAgICAgICBleHBpcmVzX2F0OiByZXNwb25zZS5leHBpcmVzX2F0LFxyXG4gICAgICAgICAgICB1c2VyX2lkOiByZXNwb25zZS51c2VyX2lkLFxyXG4gICAgICAgICAgICBjb25uZWN0X3VybDogcmVzcG9uc2UuY29ubmVjdF91cmwgfHwgcmVzcG9uc2UudXJsLFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgdGhlIENvbm5lY3QgVVJMIGZvciByZWRpcmVjdCBmbG93XHJcbiAgICAgKiBcclxuICAgICAqIFVzZSBJbnNpZ2h0SVEncyBob3N0ZWQgY29ubmVjdCBwYWdlLlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0gc2RrVG9rZW4gLSBUaGUgU0RLIHRva2VuIGZyb20gY3JlYXRlU2RrVG9rZW5cclxuICAgICAqIEBwYXJhbSB3b3JrUGxhdGZvcm1JZCAtIE9wdGlvbmFsOiBza2lwIHBsYXRmb3JtIHNlbGVjdGlvbiAoZS5nLiwgVGlrVG9rIElEKVxyXG4gICAgICogQHBhcmFtIGVudmlyb25tZW50IC0gc2FuZGJveCwgc3RhZ2luZywgb3IgcHJvZHVjdGlvblxyXG4gICAgICovXHJcbiAgICBnZXRDb25uZWN0VXJsKHNka1Rva2VuOiBzdHJpbmcsIHdvcmtQbGF0Zm9ybUlkPzogc3RyaW5nLCBlbnZpcm9ubWVudD86IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgLy8gSW5zaWdodElRL1BoeWxsbyBDb25uZWN0IFVSTCBmb3JtYXRcclxuICAgICAgICAvLyBCYXNlZCBvbiBlbnZpcm9ubWVudFxyXG4gICAgICAgIGxldCBiYXNlQ29ubmVjdFVybDogc3RyaW5nO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChlbnZpcm9ubWVudCA9PT0gJ3NhbmRib3gnIHx8IHRoaXMuY29uZmlnLmJhc2VVcmwuaW5jbHVkZXMoJ3NhbmRib3gnKSkge1xyXG4gICAgICAgICAgICBiYXNlQ29ubmVjdFVybCA9ICdodHRwczovL2Nvbm5lY3Quc2FuZGJveC5pbnNpZ2h0aXEuYWknO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZW52aXJvbm1lbnQgPT09ICdzdGFnaW5nJyB8fCB0aGlzLmNvbmZpZy5iYXNlVXJsLmluY2x1ZGVzKCdzdGFnaW5nJykpIHtcclxuICAgICAgICAgICAgYmFzZUNvbm5lY3RVcmwgPSAnaHR0cHM6Ly9jb25uZWN0LnN0YWdpbmcuaW5zaWdodGlxLmFpJztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBiYXNlQ29ubmVjdFVybCA9ICdodHRwczovL2Nvbm5lY3QuaW5zaWdodGlxLmFpJztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEJ1aWxkIFVSTCB3aXRoIHJlcXVpcmVkIHBhcmFtZXRlcnNcclxuICAgICAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7XHJcbiAgICAgICAgcGFyYW1zLnNldCgnc2RrX3Rva2VuJywgc2RrVG9rZW4pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICh3b3JrUGxhdGZvcm1JZCkge1xyXG4gICAgICAgICAgICBwYXJhbXMuc2V0KCd3b3JrX3BsYXRmb3JtX2lkJywgd29ya1BsYXRmb3JtSWQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgdXJsID0gYCR7YmFzZUNvbm5lY3RVcmx9PyR7cGFyYW1zLnRvU3RyaW5nKCl9YDtcclxuICAgICAgICBjb25zb2xlLmxvZygnW0luc2lnaHRJUV0gQ29ubmVjdCBVUkw6JywgdXJsKTtcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gdXJsO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQUNDT1VOVFMgQVBJOiBHZXQgYWNjb3VudCBkZXRhaWxzIGJ5IGFjY291bnQgSURcclxuICAgICAqIFxyXG4gICAgICogUmV0dXJucyBhY2NvdW50IGluZm9ybWF0aW9uIGluY2x1ZGluZyB1c2VybmFtZSwgcHJvZmlsZSBwaWN0dXJlLCBldGMuXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSBhY2NvdW50SWQgLSBUaGUgUGh5bGxvL0luc2lnaHRJUSBhY2NvdW50IElEXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGdldEFjY291bnQoYWNjb3VudElkOiBzdHJpbmcpOiBQcm9taXNlPHtcclxuICAgICAgICBpZDogc3RyaW5nO1xyXG4gICAgICAgIHVzZXJfaWQ6IHN0cmluZztcclxuICAgICAgICB3b3JrX3BsYXRmb3JtX2lkOiBzdHJpbmc7XHJcbiAgICAgICAgdXNlcm5hbWU/OiBzdHJpbmc7XHJcbiAgICAgICAgcGxhdGZvcm1fdXNlcm5hbWU/OiBzdHJpbmc7XHJcbiAgICAgICAgcGxhdGZvcm1fcHJvZmlsZV9uYW1lPzogc3RyaW5nO1xyXG4gICAgICAgIHBsYXRmb3JtX3Byb2ZpbGVfcGljdHVyZV91cmw/OiBzdHJpbmc7XHJcbiAgICAgICAgc3RhdHVzOiBzdHJpbmc7XHJcbiAgICAgICAgY3JlYXRlZF9hdDogc3RyaW5nO1xyXG4gICAgICAgIHVwZGF0ZWRfYXQ6IHN0cmluZztcclxuICAgIH0+IHtcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDxhbnk+KFxyXG4gICAgICAgICAgICBgL3YxL2FjY291bnRzLyR7YWNjb3VudElkfWAsXHJcbiAgICAgICAgICAgIHsgbWV0aG9kOiAnR0VUJyB9XHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgY29uc29sZS5sb2coJ1tJbnNpZ2h0SVFdIEFjY291bnQgZGV0YWlsczonLCBKU09OLnN0cmluZ2lmeShyZXNwb25zZSwgbnVsbCwgMikpO1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBpZDogcmVzcG9uc2UuaWQsXHJcbiAgICAgICAgICAgIHVzZXJfaWQ6IHJlc3BvbnNlLnVzZXJfaWQsXHJcbiAgICAgICAgICAgIHdvcmtfcGxhdGZvcm1faWQ6IHJlc3BvbnNlLndvcmtfcGxhdGZvcm1faWQsXHJcbiAgICAgICAgICAgIHVzZXJuYW1lOiByZXNwb25zZS51c2VybmFtZSB8fCByZXNwb25zZS5wbGF0Zm9ybV91c2VybmFtZSxcclxuICAgICAgICAgICAgcGxhdGZvcm1fdXNlcm5hbWU6IHJlc3BvbnNlLnBsYXRmb3JtX3VzZXJuYW1lLFxyXG4gICAgICAgICAgICBwbGF0Zm9ybV9wcm9maWxlX25hbWU6IHJlc3BvbnNlLnBsYXRmb3JtX3Byb2ZpbGVfbmFtZSxcclxuICAgICAgICAgICAgcGxhdGZvcm1fcHJvZmlsZV9waWN0dXJlX3VybDogcmVzcG9uc2UucGxhdGZvcm1fcHJvZmlsZV9waWN0dXJlX3VybCxcclxuICAgICAgICAgICAgc3RhdHVzOiByZXNwb25zZS5zdGF0dXMsXHJcbiAgICAgICAgICAgIGNyZWF0ZWRfYXQ6IHJlc3BvbnNlLmNyZWF0ZWRfYXQsXHJcbiAgICAgICAgICAgIHVwZGF0ZWRfYXQ6IHJlc3BvbnNlLnVwZGF0ZWRfYXQsXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFdPUksgUExBVEZPUk1TIEFQSTogR2V0IGFsbCBhdmFpbGFibGUgd29yayBwbGF0Zm9ybXNcclxuICAgICAqIFxyXG4gICAgICogVXNlIHRoaXMgdG8gZmluZCB0aGUgY29ycmVjdCB3b3JrX3BsYXRmb3JtX2lkIGZvciBUaWtUb2sgb3Igb3RoZXIgcGxhdGZvcm1zLlxyXG4gICAgICovXHJcbiAgICBhc3luYyBnZXRXb3JrUGxhdGZvcm1zKCk6IFByb21pc2U8e1xyXG4gICAgICAgIGRhdGE6IEFycmF5PHtcclxuICAgICAgICAgICAgaWQ6IHN0cmluZztcclxuICAgICAgICAgICAgbmFtZTogc3RyaW5nO1xyXG4gICAgICAgICAgICB1cmw6IHN0cmluZztcclxuICAgICAgICAgICAgbG9nb191cmw6IHN0cmluZztcclxuICAgICAgICAgICAgY2F0ZWdvcnk6IHN0cmluZztcclxuICAgICAgICB9PjtcclxuICAgIH0+IHtcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDxhbnk+KFxyXG4gICAgICAgICAgICAnL3YxL3dvcmstcGxhdGZvcm1zJyxcclxuICAgICAgICAgICAgeyBtZXRob2Q6ICdHRVQnIH1cclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBjb25zb2xlLmxvZygnW0luc2lnaHRJUV0gV29yayBwbGF0Zm9ybXM6JywgSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UsIG51bGwsIDIpKTtcclxuICAgICAgICByZXR1cm4gcmVzcG9uc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBGaW5kIFRpa1RvayB3b3JrIHBsYXRmb3JtIElEXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGdldFRpa1Rva1BsYXRmb3JtSWQoKTogUHJvbWlzZTxzdHJpbmcgfCBudWxsPiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgcGxhdGZvcm1zID0gYXdhaXQgdGhpcy5nZXRXb3JrUGxhdGZvcm1zKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRpa3RvayA9IHBsYXRmb3Jtcy5kYXRhPy5maW5kKFxyXG4gICAgICAgICAgICAgICAgKHApID0+IHAubmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCd0aWt0b2snKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBpZiAodGlrdG9rKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW0luc2lnaHRJUV0gRm91bmQgVGlrVG9rIHBsYXRmb3JtOicsIHRpa3Rvayk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGlrdG9rLmlkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tJbnNpZ2h0SVFdIEZhaWxlZCB0byBnZXQgVGlrVG9rIHBsYXRmb3JtIElEOicsIGVycm9yKTtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIGNyZWF0ZVNka1Rva2VuKCkgaW5zdGVhZCAtIHRoaXMgZW5kcG9pbnQgZG9lc24ndCBleGlzdFxyXG4gICAgICogVGhlIENvbm5lY3QgU0RLIGhhbmRsZXMgdGhlIE9BdXRoIGZsb3cgb24gdGhlIGZyb250ZW5kXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGluaXRpYXRlQ29ubmVjdGlvbih1c2VySWQ/OiBzdHJpbmcpOiBQcm9taXNlPENvbm5lY3RJbml0aWF0ZVJlc3BvbnNlPiB7XHJcbiAgICAgICAgLy8gUmVkaXJlY3QgdG8gdXNpbmcgU0RLIHRva2VuIGZsb3dcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXHJcbiAgICAgICAgICAgICdpbml0aWF0ZUNvbm5lY3Rpb24gaXMgZGVwcmVjYXRlZC4gVXNlIGNyZWF0ZVNka1Rva2VuKCkgdG8gZ2V0IGFuIFNESyB0b2tlbiwgJyArXHJcbiAgICAgICAgICAgICd0aGVuIGluaXRpYWxpemUgdGhlIENvbm5lY3QgU0RLIG9uIHRoZSBmcm9udGVuZC4nXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENPTk5FQ1QgQVBJOiBFeGNoYW5nZSB1c2VyX3Rva2VuIGZvciBhY2Nlc3NfdG9rZW5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgZXhjaGFuZ2VUb2tlbih1c2VyVG9rZW46IHN0cmluZyk6IFByb21pc2U8VG9rZW5FeGNoYW5nZVJlc3BvbnNlPiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdDxUb2tlbkV4Y2hhbmdlUmVzcG9uc2U+KFxyXG4gICAgICAgICAgICAnL3YxL2Nvbm5lY3QvdG9rZW4nLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgICAgICAgICB1c2VyX3Rva2VuOiB1c2VyVG9rZW4sXHJcbiAgICAgICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDT05ORUNUIEFQSTogUmVmcmVzaCBhY2Nlc3MgdG9rZW5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgcmVmcmVzaFRva2VuKHJlZnJlc2hUb2tlbjogc3RyaW5nKTogUHJvbWlzZTxUb2tlbkV4Y2hhbmdlUmVzcG9uc2U+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0PFRva2VuRXhjaGFuZ2VSZXNwb25zZT4oXHJcbiAgICAgICAgICAgICcvdjEvY29ubmVjdC9yZWZyZXNoJyxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVmcmVzaF90b2tlbjogcmVmcmVzaFRva2VuLFxyXG4gICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU09DSUFMIENPTlRFTlQgQVBJOiBHZXQgdXNlcidzIFRpa1RvayB2aWRlb3NcclxuICAgICAqL1xyXG4gICAgYXN5bmMgZ2V0VXNlckNvbnRlbnRzKFxyXG4gICAgICAgIGFjY2Vzc1Rva2VuOiBzdHJpbmcsXHJcbiAgICAgICAgcGFyYW1zPzogUGFydGlhbDxHZXRDb250ZW50c1BhcmFtcz5cclxuICAgICk6IFByb21pc2U8Q29udGVudHNSZXNwb25zZT4ge1xyXG4gICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh7XHJcbiAgICAgICAgICAgIHBsYXRmb3JtOiAndGlrdG9rJyxcclxuICAgICAgICAgICAgbGltaXQ6IFN0cmluZyhwYXJhbXM/LmxpbWl0IHx8IDUwKSxcclxuICAgICAgICAgICAgb2Zmc2V0OiBTdHJpbmcocGFyYW1zPy5vZmZzZXQgfHwgMCksXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmIChwYXJhbXM/LmZyb21fZGF0ZSkge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtcy5zZXQoJ2Zyb21fZGF0ZScsIHBhcmFtcy5mcm9tX2RhdGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocGFyYW1zPy50b19kYXRlKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1zLnNldCgndG9fZGF0ZScsIHBhcmFtcy50b19kYXRlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3Q8Q29udGVudHNSZXNwb25zZT4oXHJcbiAgICAgICAgICAgIGAvdjEvc29jaWFsL2NvbnRlbnRzPyR7cXVlcnlQYXJhbXN9YCxcclxuICAgICAgICAgICAge30sXHJcbiAgICAgICAgICAgIHRydWUsXHJcbiAgICAgICAgICAgIGFjY2Vzc1Rva2VuXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNPQ0lBTCBDT05URU5UIEFQSTogRmV0Y2ggc3BlY2lmaWMgY29udGVudCBieSBVUkxcclxuICAgICAqL1xyXG4gICAgYXN5bmMgZmV0Y2hDb250ZW50QnlVcmwodXJsOiBzdHJpbmcpOiBQcm9taXNlPFRpa1Rva0NvbnRlbnQ+IHtcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdDxGZXRjaENvbnRlbnRSZXNwb25zZT4oXHJcbiAgICAgICAgICAgICcvdjEvc29jaWFsL2NyZWF0b3JzL2NvbnRlbnRzL2ZldGNoJyxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgICAgICAgICAgcGxhdGZvcm06ICd0aWt0b2snLFxyXG4gICAgICAgICAgICAgICAgICAgIHVybCxcclxuICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIElERU5USVRZIEFQSTogR2V0IHVzZXIncyBUaWtUb2sgcHJvZmlsZVxyXG4gICAgICovXHJcbiAgICBhc3luYyBnZXRVc2VySWRlbnRpdHkoYWNjZXNzVG9rZW46IHN0cmluZyk6IFByb21pc2U8VXNlcklkZW50aXR5PiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdDxVc2VySWRlbnRpdHk+KFxyXG4gICAgICAgICAgICAnL3YxL3NvY2lhbC9pZGVudGl0eT9wbGF0Zm9ybT10aWt0b2snLFxyXG4gICAgICAgICAgICB7fSxcclxuICAgICAgICAgICAgdHJ1ZSxcclxuICAgICAgICAgICAgYWNjZXNzVG9rZW5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSEVMUEVSOiBGaW5kIHZpZGVvcyB1c2luZyBhIHNwZWNpZmljIG11c2ljIHRyYWNrXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGZpbmRWaWRlb3NCeU11c2ljSWQoXHJcbiAgICAgICAgYWNjZXNzVG9rZW46IHN0cmluZyxcclxuICAgICAgICBtdXNpY0lkOiBzdHJpbmcsXHJcbiAgICAgICAgbGltaXQgPSAxMDBcclxuICAgICk6IFByb21pc2U8VGlrVG9rQ29udGVudFtdPiB7XHJcbiAgICAgICAgY29uc3QgY29udGVudHMgPSBhd2FpdCB0aGlzLmdldFVzZXJDb250ZW50cyhhY2Nlc3NUb2tlbiwgeyBsaW1pdCB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGNvbnRlbnRzLmRhdGEuZmlsdGVyKFxyXG4gICAgICAgICAgICAoY29udGVudCkgPT4gY29udGVudC5hdWRpb190cmFja19pbmZvPy5pZCA9PT0gbXVzaWNJZFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIRUxQRVI6IEdldCBhbGwgdmlkZW9zIChwYWdpbmF0ZWQpXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGdldEFsbFVzZXJDb250ZW50cyhhY2Nlc3NUb2tlbjogc3RyaW5nKTogUHJvbWlzZTxUaWtUb2tDb250ZW50W10+IHtcclxuICAgICAgICBjb25zdCBhbGxWaWRlb3M6IFRpa1Rva0NvbnRlbnRbXSA9IFtdO1xyXG4gICAgICAgIGxldCBvZmZzZXQgPSAwO1xyXG4gICAgICAgIGNvbnN0IGxpbWl0ID0gMTAwO1xyXG4gICAgICAgIGxldCBoYXNNb3JlID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgd2hpbGUgKGhhc01vcmUpIHtcclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmdldFVzZXJDb250ZW50cyhhY2Nlc3NUb2tlbiwge1xyXG4gICAgICAgICAgICAgICAgbGltaXQsXHJcbiAgICAgICAgICAgICAgICBvZmZzZXQsXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgYWxsVmlkZW9zLnB1c2goLi4ucmVzcG9uc2UuZGF0YSk7XHJcbiAgICAgICAgICAgIGhhc01vcmUgPSByZXNwb25zZS5wYWdpbmF0aW9uLmhhc19tb3JlO1xyXG4gICAgICAgICAgICBvZmZzZXQgKz0gbGltaXQ7XHJcblxyXG4gICAgICAgICAgICAvLyBTYWZldHkgbGltaXQgdG8gcHJldmVudCBpbmZpbml0ZSBsb29wc1xyXG4gICAgICAgICAgICBpZiAob2Zmc2V0ID4gMTAwMCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdSZWFjaGVkIHNhZmV0eSBsaW1pdCBvZiAxMDAwIHZpZGVvcycpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBhbGxWaWRlb3M7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTaW5nbGV0b24gaW5zdGFuY2UgZm9yIHVzZSB0aHJvdWdob3V0IHRoZSBhcHBsaWNhdGlvblxyXG4gKiBOb3RlOiBDb25maWd1cmF0aW9uIGlzIHZhbGlkYXRlZCBhdCBydW50aW1lLCBub3QgYXQgaW1wb3J0IHRpbWVcclxuICovXHJcbmV4cG9ydCBjb25zdCBpbnNpZ2h0SVFDbGllbnQgPSBuZXcgSW5zaWdodElRQ2xpZW50KHtcclxuICAgIGNsaWVudElkOiBwcm9jZXNzLmVudi5JTlNJR0hUSVFfQ0xJRU5UX0lEIHx8ICcnLFxyXG4gICAgY2xpZW50U2VjcmV0OiBwcm9jZXNzLmVudi5JTlNJR0hUSVFfQ0xJRU5UX1NFQ1JFVCB8fCAnJyxcclxuICAgIGJhc2VVcmw6IHByb2Nlc3MuZW52LklOU0lHSFRJUV9CQVNFX1VSTCB8fCAnJyxcclxuICAgIHJlZGlyZWN0VXJpOiBwcm9jZXNzLmVudi5JTlNJR0hUSVFfUkVESVJFQ1RfVVJJIHx8ICcnLFxyXG59KTtcclxuIl0sIm5hbWVzIjpbIk1BWF9SRVRSSUVTIiwiUkVUUllfREVMQVlfTVMiLCJJbnNpZ2h0SVFDbGllbnQiLCJjb25zdHJ1Y3RvciIsImNvbmZpZyIsImlzQ29uZmlndXJlZCIsImNsaWVudElkIiwiY2xpZW50U2VjcmV0IiwiYmFzZVVybCIsImNyZWRlbnRpYWxzIiwiYmFzaWNBdXRoSGVhZGVyIiwiQnVmZmVyIiwiZnJvbSIsInRvU3RyaW5nIiwiY2hlY2tDb25maWd1cmF0aW9uIiwiRXJyb3IiLCJpc0luc2lnaHRJUUNvbmZpZ3VyZWQiLCJzbGVlcCIsIm1zIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwicmVxdWVzdCIsImVuZHBvaW50Iiwib3B0aW9ucyIsInVzZVVzZXJUb2tlbiIsInVzZXJUb2tlbiIsInJldHJ5Q291bnQiLCJ1cmwiLCJtZXRob2QiLCJib2R5IiwiaGVhZGVycyIsImNvbnNvbGUiLCJsb2ciLCJyZXNwb25zZSIsImZldGNoIiwidW5kZWZpbmVkIiwib2siLCJlcnJvclRleHQiLCJ0ZXh0IiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JDb2RlIiwic3RhdHVzIiwiZXJyb3JKc29uIiwiSlNPTiIsInBhcnNlIiwiZXJyb3IiLCJtZXNzYWdlIiwiY29kZSIsImUiLCJyZXRyeUFmdGVyIiwiZ2V0IiwiZGVsYXkiLCJwYXJzZUludCIsIk1hdGgiLCJwb3ciLCJqc29uIiwiVHlwZUVycm9yIiwiY3JlYXRlVXNlciIsImV4dGVybmFsSWQiLCJuYW1lIiwic3RyaW5naWZ5IiwiZXh0ZXJuYWxfaWQiLCJnZXRPckNyZWF0ZVVzZXIiLCJ1c2VyIiwiaWQiLCJpbmNsdWRlcyIsIm5ld1VzZXIiLCJjcmVhdGVTZGtUb2tlbiIsImluc2lnaHRpcVVzZXJJZCIsInByb2R1Y3RzIiwicmVkaXJlY3RVcmwiLCJ1c2VyX2lkIiwicmVkaXJlY3RfdXJsIiwic2RrX3Rva2VuIiwidG9rZW4iLCJzZGtfdG9rZW5faWQiLCJleHBpcmVzX2F0IiwiY29ubmVjdF91cmwiLCJnZXRDb25uZWN0VXJsIiwic2RrVG9rZW4iLCJ3b3JrUGxhdGZvcm1JZCIsImVudmlyb25tZW50IiwiYmFzZUNvbm5lY3RVcmwiLCJwYXJhbXMiLCJVUkxTZWFyY2hQYXJhbXMiLCJzZXQiLCJnZXRBY2NvdW50IiwiYWNjb3VudElkIiwid29ya19wbGF0Zm9ybV9pZCIsInVzZXJuYW1lIiwicGxhdGZvcm1fdXNlcm5hbWUiLCJwbGF0Zm9ybV9wcm9maWxlX25hbWUiLCJwbGF0Zm9ybV9wcm9maWxlX3BpY3R1cmVfdXJsIiwiY3JlYXRlZF9hdCIsInVwZGF0ZWRfYXQiLCJnZXRXb3JrUGxhdGZvcm1zIiwiZ2V0VGlrVG9rUGxhdGZvcm1JZCIsInBsYXRmb3JtcyIsInRpa3RvayIsImRhdGEiLCJmaW5kIiwicCIsInRvTG93ZXJDYXNlIiwiaW5pdGlhdGVDb25uZWN0aW9uIiwidXNlcklkIiwiZXhjaGFuZ2VUb2tlbiIsInVzZXJfdG9rZW4iLCJyZWZyZXNoVG9rZW4iLCJyZWZyZXNoX3Rva2VuIiwiZ2V0VXNlckNvbnRlbnRzIiwiYWNjZXNzVG9rZW4iLCJxdWVyeVBhcmFtcyIsInBsYXRmb3JtIiwibGltaXQiLCJTdHJpbmciLCJvZmZzZXQiLCJmcm9tX2RhdGUiLCJ0b19kYXRlIiwiZmV0Y2hDb250ZW50QnlVcmwiLCJnZXRVc2VySWRlbnRpdHkiLCJmaW5kVmlkZW9zQnlNdXNpY0lkIiwibXVzaWNJZCIsImNvbnRlbnRzIiwiZmlsdGVyIiwiY29udGVudCIsImF1ZGlvX3RyYWNrX2luZm8iLCJnZXRBbGxVc2VyQ29udGVudHMiLCJhbGxWaWRlb3MiLCJoYXNNb3JlIiwicHVzaCIsInBhZ2luYXRpb24iLCJoYXNfbW9yZSIsIndhcm4iLCJpbnNpZ2h0SVFDbGllbnQiLCJwcm9jZXNzIiwiZW52IiwiSU5TSUdIVElRX0NMSUVOVF9JRCIsIklOU0lHSFRJUV9DTElFTlRfU0VDUkVUIiwiSU5TSUdIVElRX0JBU0VfVVJMIiwicmVkaXJlY3RVcmkiLCJJTlNJR0hUSVFfUkVESVJFQ1RfVVJJIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/insightiq/client.ts\n");

/***/ }),

/***/ "(rsc)/./lib/insightiq/token-manager.ts":
/*!****************************************!*\
  !*** ./lib/insightiq/token-manager.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   disconnectTikTok: () => (/* binding */ disconnectTikTok),\n/* harmony export */   getTikTokConnectionStatus: () => (/* binding */ getTikTokConnectionStatus),\n/* harmony export */   getValidAccessToken: () => (/* binding */ getValidAccessToken),\n/* harmony export */   isUserConnected: () => (/* binding */ isUserConnected)\n/* harmony export */ });\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./lib/prisma.ts\");\n/* harmony import */ var _client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./client */ \"(rsc)/./lib/insightiq/client.ts\");\n/* harmony import */ var _lib_crypto__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/crypto */ \"(rsc)/./lib/crypto.ts\");\n/**\r\n * Token Manager\r\n * Handles automatic token refresh for InsightIQ access tokens\r\n */ \n\n\n/**\r\n * Get a valid access token for a user\r\n * Automatically refreshes if expired or expiring soon\r\n */ async function getValidAccessToken(userId) {\n    const user = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.user.findUnique({\n        where: {\n            id: userId\n        },\n        select: {\n            insightiqAccessToken: true,\n            insightiqRefreshToken: true,\n            insightiqTokenExpiry: true\n        }\n    });\n    if (!user?.insightiqAccessToken || !user?.insightiqRefreshToken) {\n        throw new Error(\"User has not connected their TikTok account via InsightIQ. \" + \"Please complete OAuth flow first.\");\n    }\n    const now = new Date();\n    const expiry = user.insightiqTokenExpiry;\n    // If token expires in less than 5 minutes, refresh it\n    const shouldRefresh = !expiry || expiry.getTime() - now.getTime() < 5 * 60 * 1000;\n    if (shouldRefresh) {\n        console.log(`Refreshing access token for user ${userId}`);\n        const refreshToken = (0,_lib_crypto__WEBPACK_IMPORTED_MODULE_2__.decryptToken)(user.insightiqRefreshToken);\n        const newTokens = await _client__WEBPACK_IMPORTED_MODULE_1__.insightIQClient.refreshToken(refreshToken);\n        const newExpiry = new Date();\n        newExpiry.setSeconds(newExpiry.getSeconds() + newTokens.expires_in);\n        // Update tokens in database\n        await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.user.update({\n            where: {\n                id: userId\n            },\n            data: {\n                insightiqAccessToken: (0,_lib_crypto__WEBPACK_IMPORTED_MODULE_2__.encryptToken)(newTokens.access_token),\n                insightiqRefreshToken: (0,_lib_crypto__WEBPACK_IMPORTED_MODULE_2__.encryptToken)(newTokens.refresh_token),\n                insightiqTokenExpiry: newExpiry\n            }\n        });\n        return newTokens.access_token;\n    }\n    // Token is still valid, decrypt and return\n    return (0,_lib_crypto__WEBPACK_IMPORTED_MODULE_2__.decryptToken)(user.insightiqAccessToken);\n}\n/**\r\n * Check if a user has connected their TikTok account\r\n */ async function isUserConnected(userId) {\n    const user = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.user.findUnique({\n        where: {\n            id: userId\n        },\n        select: {\n            insightiqAccessToken: true,\n            tiktokUserId: true\n        }\n    });\n    return !!(user?.insightiqAccessToken && user?.tiktokUserId);\n}\n/**\r\n * Disconnect user's TikTok account\r\n * Removes all InsightIQ tokens\r\n */ async function disconnectTikTok(userId) {\n    await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.user.update({\n        where: {\n            id: userId\n        },\n        data: {\n            insightiqAccessToken: null,\n            insightiqRefreshToken: null,\n            insightiqTokenExpiry: null,\n            tiktokUserId: null,\n            tiktokUsername: null,\n            tiktokDisplayName: null,\n            tiktokAvatarUrl: null,\n            tiktokConnectedAt: null\n        }\n    });\n}\n/**\r\n * Get user's TikTok connection status\r\n */ async function getTikTokConnectionStatus(userId) {\n    const user = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.user.findUnique({\n        where: {\n            id: userId\n        },\n        select: {\n            tiktokUserId: true,\n            tiktokUsername: true,\n            tiktokDisplayName: true,\n            tiktokAvatarUrl: true,\n            tiktokConnectedAt: true,\n            insightiqTokenExpiry: true\n        }\n    });\n    if (!user?.tiktokUserId) {\n        return {\n            connected: false,\n            user: null\n        };\n    }\n    const now = new Date();\n    const expiresIn = user.insightiqTokenExpiry ? Math.floor((user.insightiqTokenExpiry.getTime() - now.getTime()) / 1000) : 0;\n    return {\n        connected: true,\n        user: {\n            userId: user.tiktokUserId,\n            username: user.tiktokUsername,\n            displayName: user.tiktokDisplayName,\n            avatarUrl: user.tiktokAvatarUrl,\n            connectedAt: user.tiktokConnectedAt,\n            tokenExpiresIn: expiresIn\n        }\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ckIsT0FBTztZQUNITyxXQUFXO1lBQ1hsQyxNQUFNO1FBQ1Y7SUFDSjtJQUVBLE1BQU1TLE1BQU0sSUFBSUM7SUFDaEIsTUFBTXlCLFlBQVluQyxLQUFLTyxvQkFBb0IsR0FDckM2QixLQUFLQyxLQUFLLENBQUMsQ0FBQ3JDLEtBQUtPLG9CQUFvQixDQUFDTSxPQUFPLEtBQUtKLElBQUlJLE9BQU8sRUFBQyxJQUFLLFFBQ25FO0lBRU4sT0FBTztRQUNIcUIsV0FBVztRQUNYbEMsTUFBTTtZQUNGRCxRQUFRQyxLQUFLMkIsWUFBWTtZQUN6QlcsVUFBVXRDLEtBQUs2QixjQUFjO1lBQzdCVSxhQUFhdkMsS0FBSzhCLGlCQUFpQjtZQUNuQ1UsV0FBV3hDLEtBQUsrQixlQUFlO1lBQy9CVSxhQUFhekMsS0FBS2dDLGlCQUFpQjtZQUNuQ1UsZ0JBQWdCUDtRQUNwQjtJQUNKO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZXNhci13ZWIvLi9saWIvaW5zaWdodGlxL3Rva2VuLW1hbmFnZXIudHM/ZjA2NiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogVG9rZW4gTWFuYWdlclxyXG4gKiBIYW5kbGVzIGF1dG9tYXRpYyB0b2tlbiByZWZyZXNoIGZvciBJbnNpZ2h0SVEgYWNjZXNzIHRva2Vuc1xyXG4gKi9cclxuXHJcbmltcG9ydCB7IHByaXNtYSB9IGZyb20gJ0AvbGliL3ByaXNtYSc7XHJcbmltcG9ydCB7IGluc2lnaHRJUUNsaWVudCB9IGZyb20gJy4vY2xpZW50JztcclxuaW1wb3J0IHsgZW5jcnlwdFRva2VuLCBkZWNyeXB0VG9rZW4gfSBmcm9tICdAL2xpYi9jcnlwdG8nO1xyXG5cclxuLyoqXHJcbiAqIEdldCBhIHZhbGlkIGFjY2VzcyB0b2tlbiBmb3IgYSB1c2VyXHJcbiAqIEF1dG9tYXRpY2FsbHkgcmVmcmVzaGVzIGlmIGV4cGlyZWQgb3IgZXhwaXJpbmcgc29vblxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFZhbGlkQWNjZXNzVG9rZW4odXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoe1xyXG4gICAgICAgIHdoZXJlOiB7IGlkOiB1c2VySWQgfSxcclxuICAgICAgICBzZWxlY3Q6IHtcclxuICAgICAgICAgICAgaW5zaWdodGlxQWNjZXNzVG9rZW46IHRydWUsXHJcbiAgICAgICAgICAgIGluc2lnaHRpcVJlZnJlc2hUb2tlbjogdHJ1ZSxcclxuICAgICAgICAgICAgaW5zaWdodGlxVG9rZW5FeHBpcnk6IHRydWUsXHJcbiAgICAgICAgfSxcclxuICAgIH0pO1xyXG5cclxuICAgIGlmICghdXNlcj8uaW5zaWdodGlxQWNjZXNzVG9rZW4gfHwgIXVzZXI/Lmluc2lnaHRpcVJlZnJlc2hUb2tlbikge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcclxuICAgICAgICAgICAgJ1VzZXIgaGFzIG5vdCBjb25uZWN0ZWQgdGhlaXIgVGlrVG9rIGFjY291bnQgdmlhIEluc2lnaHRJUS4gJyArXHJcbiAgICAgICAgICAgICdQbGVhc2UgY29tcGxldGUgT0F1dGggZmxvdyBmaXJzdC4nXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xyXG4gICAgY29uc3QgZXhwaXJ5ID0gdXNlci5pbnNpZ2h0aXFUb2tlbkV4cGlyeTtcclxuXHJcbiAgICAvLyBJZiB0b2tlbiBleHBpcmVzIGluIGxlc3MgdGhhbiA1IG1pbnV0ZXMsIHJlZnJlc2ggaXRcclxuICAgIGNvbnN0IHNob3VsZFJlZnJlc2ggPVxyXG4gICAgICAgICFleHBpcnkgfHwgZXhwaXJ5LmdldFRpbWUoKSAtIG5vdy5nZXRUaW1lKCkgPCA1ICogNjAgKiAxMDAwO1xyXG5cclxuICAgIGlmIChzaG91bGRSZWZyZXNoKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coYFJlZnJlc2hpbmcgYWNjZXNzIHRva2VuIGZvciB1c2VyICR7dXNlcklkfWApO1xyXG5cclxuICAgICAgICBjb25zdCByZWZyZXNoVG9rZW4gPSBkZWNyeXB0VG9rZW4odXNlci5pbnNpZ2h0aXFSZWZyZXNoVG9rZW4pO1xyXG4gICAgICAgIGNvbnN0IG5ld1Rva2VucyA9IGF3YWl0IGluc2lnaHRJUUNsaWVudC5yZWZyZXNoVG9rZW4ocmVmcmVzaFRva2VuKTtcclxuXHJcbiAgICAgICAgY29uc3QgbmV3RXhwaXJ5ID0gbmV3IERhdGUoKTtcclxuICAgICAgICBuZXdFeHBpcnkuc2V0U2Vjb25kcyhuZXdFeHBpcnkuZ2V0U2Vjb25kcygpICsgbmV3VG9rZW5zLmV4cGlyZXNfaW4pO1xyXG5cclxuICAgICAgICAvLyBVcGRhdGUgdG9rZW5zIGluIGRhdGFiYXNlXHJcbiAgICAgICAgYXdhaXQgcHJpc21hLnVzZXIudXBkYXRlKHtcclxuICAgICAgICAgICAgd2hlcmU6IHsgaWQ6IHVzZXJJZCB9LFxyXG4gICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICBpbnNpZ2h0aXFBY2Nlc3NUb2tlbjogZW5jcnlwdFRva2VuKG5ld1Rva2Vucy5hY2Nlc3NfdG9rZW4pLFxyXG4gICAgICAgICAgICAgICAgaW5zaWdodGlxUmVmcmVzaFRva2VuOiBlbmNyeXB0VG9rZW4obmV3VG9rZW5zLnJlZnJlc2hfdG9rZW4pLFxyXG4gICAgICAgICAgICAgICAgaW5zaWdodGlxVG9rZW5FeHBpcnk6IG5ld0V4cGlyeSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG5ld1Rva2Vucy5hY2Nlc3NfdG9rZW47XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVG9rZW4gaXMgc3RpbGwgdmFsaWQsIGRlY3J5cHQgYW5kIHJldHVyblxyXG4gICAgcmV0dXJuIGRlY3J5cHRUb2tlbih1c2VyLmluc2lnaHRpcUFjY2Vzc1Rva2VuKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENoZWNrIGlmIGEgdXNlciBoYXMgY29ubmVjdGVkIHRoZWlyIFRpa1RvayBhY2NvdW50XHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaXNVc2VyQ29ubmVjdGVkKHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7XHJcbiAgICAgICAgd2hlcmU6IHsgaWQ6IHVzZXJJZCB9LFxyXG4gICAgICAgIHNlbGVjdDoge1xyXG4gICAgICAgICAgICBpbnNpZ2h0aXFBY2Nlc3NUb2tlbjogdHJ1ZSxcclxuICAgICAgICAgICAgdGlrdG9rVXNlcklkOiB0cnVlLFxyXG4gICAgICAgIH0sXHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gISEodXNlcj8uaW5zaWdodGlxQWNjZXNzVG9rZW4gJiYgdXNlcj8udGlrdG9rVXNlcklkKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIERpc2Nvbm5lY3QgdXNlcidzIFRpa1RvayBhY2NvdW50XHJcbiAqIFJlbW92ZXMgYWxsIEluc2lnaHRJUSB0b2tlbnNcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkaXNjb25uZWN0VGlrVG9rKHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICBhd2FpdCBwcmlzbWEudXNlci51cGRhdGUoe1xyXG4gICAgICAgIHdoZXJlOiB7IGlkOiB1c2VySWQgfSxcclxuICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgIGluc2lnaHRpcUFjY2Vzc1Rva2VuOiBudWxsLFxyXG4gICAgICAgICAgICBpbnNpZ2h0aXFSZWZyZXNoVG9rZW46IG51bGwsXHJcbiAgICAgICAgICAgIGluc2lnaHRpcVRva2VuRXhwaXJ5OiBudWxsLFxyXG4gICAgICAgICAgICB0aWt0b2tVc2VySWQ6IG51bGwsXHJcbiAgICAgICAgICAgIHRpa3Rva1VzZXJuYW1lOiBudWxsLFxyXG4gICAgICAgICAgICB0aWt0b2tEaXNwbGF5TmFtZTogbnVsbCxcclxuICAgICAgICAgICAgdGlrdG9rQXZhdGFyVXJsOiBudWxsLFxyXG4gICAgICAgICAgICB0aWt0b2tDb25uZWN0ZWRBdDogbnVsbCxcclxuICAgICAgICB9LFxyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgdXNlcidzIFRpa1RvayBjb25uZWN0aW9uIHN0YXR1c1xyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFRpa1Rva0Nvbm5lY3Rpb25TdGF0dXModXNlcklkOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcclxuICAgICAgICB3aGVyZTogeyBpZDogdXNlcklkIH0sXHJcbiAgICAgICAgc2VsZWN0OiB7XHJcbiAgICAgICAgICAgIHRpa3Rva1VzZXJJZDogdHJ1ZSxcclxuICAgICAgICAgICAgdGlrdG9rVXNlcm5hbWU6IHRydWUsXHJcbiAgICAgICAgICAgIHRpa3Rva0Rpc3BsYXlOYW1lOiB0cnVlLFxyXG4gICAgICAgICAgICB0aWt0b2tBdmF0YXJVcmw6IHRydWUsXHJcbiAgICAgICAgICAgIHRpa3Rva0Nvbm5lY3RlZEF0OiB0cnVlLFxyXG4gICAgICAgICAgICBpbnNpZ2h0aXFUb2tlbkV4cGlyeTogdHJ1ZSxcclxuICAgICAgICB9LFxyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKCF1c2VyPy50aWt0b2tVc2VySWQpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBjb25uZWN0ZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICB1c2VyOiBudWxsLFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcclxuICAgIGNvbnN0IGV4cGlyZXNJbiA9IHVzZXIuaW5zaWdodGlxVG9rZW5FeHBpcnlcclxuICAgICAgICA/IE1hdGguZmxvb3IoKHVzZXIuaW5zaWdodGlxVG9rZW5FeHBpcnkuZ2V0VGltZSgpIC0gbm93LmdldFRpbWUoKSkgLyAxMDAwKVxyXG4gICAgICAgIDogMDtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGNvbm5lY3RlZDogdHJ1ZSxcclxuICAgICAgICB1c2VyOiB7XHJcbiAgICAgICAgICAgIHVzZXJJZDogdXNlci50aWt0b2tVc2VySWQsXHJcbiAgICAgICAgICAgIHVzZXJuYW1lOiB1c2VyLnRpa3Rva1VzZXJuYW1lLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZTogdXNlci50aWt0b2tEaXNwbGF5TmFtZSxcclxuICAgICAgICAgICAgYXZhdGFyVXJsOiB1c2VyLnRpa3Rva0F2YXRhclVybCxcclxuICAgICAgICAgICAgY29ubmVjdGVkQXQ6IHVzZXIudGlrdG9rQ29ubmVjdGVkQXQsXHJcbiAgICAgICAgICAgIHRva2VuRXhwaXJlc0luOiBleHBpcmVzSW4sXHJcbiAgICAgICAgfSxcclxuICAgIH07XHJcbn1cclxuIl0sIm5hbWVzIjpbInByaXNtYSIsImluc2lnaHRJUUNsaWVudCIsImVuY3J5cHRUb2tlbiIsImRlY3J5cHRUb2tlbiIsImdldFZhbGlkQWNjZXNzVG9rZW4iLCJ1c2VySWQiLCJ1c2VyIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwiaWQiLCJzZWxlY3QiLCJpbnNpZ2h0aXFBY2Nlc3NUb2tlbiIsImluc2lnaHRpcVJlZnJlc2hUb2tlbiIsImluc2lnaHRpcVRva2VuRXhwaXJ5IiwiRXJyb3IiLCJub3ciLCJEYXRlIiwiZXhwaXJ5Iiwic2hvdWxkUmVmcmVzaCIsImdldFRpbWUiLCJjb25zb2xlIiwibG9nIiwicmVmcmVzaFRva2VuIiwibmV3VG9rZW5zIiwibmV3RXhwaXJ5Iiwic2V0U2Vjb25kcyIsImdldFNlY29uZHMiLCJleHBpcmVzX2luIiwidXBkYXRlIiwiZGF0YSIsImFjY2Vzc190b2tlbiIsInJlZnJlc2hfdG9rZW4iLCJpc1VzZXJDb25uZWN0ZWQiLCJ0aWt0b2tVc2VySWQiLCJkaXNjb25uZWN0VGlrVG9rIiwidGlrdG9rVXNlcm5hbWUiLCJ0aWt0b2tEaXNwbGF5TmFtZSIsInRpa3Rva0F2YXRhclVybCIsInRpa3Rva0Nvbm5lY3RlZEF0IiwiZ2V0VGlrVG9rQ29ubmVjdGlvblN0YXR1cyIsImNvbm5lY3RlZCIsImV4cGlyZXNJbiIsIk1hdGgiLCJmbG9vciIsInVzZXJuYW1lIiwiZGlzcGxheU5hbWUiLCJhdmF0YXJVcmwiLCJjb25uZWN0ZWRBdCIsInRva2VuRXhwaXJlc0luIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/insightiq/token-manager.ts\n");

/***/ }),

/***/ "(rsc)/./lib/prisma.ts":
/*!***********************!*\
  !*** ./lib/prisma.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma),\n/* harmony export */   withRetry: () => (/* binding */ withRetry)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst globalForPrisma = globalThis;\nconst prisma = globalForPrisma.prisma ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient({\n    log:  true ? [\n        \"query\",\n        \"error\",\n        \"warn\"\n    ] : 0\n});\nif (true) {\n    globalForPrisma.prisma = prisma;\n}\nasync function withRetry(query, maxRetries = 2, delay = 500) {\n    for(let i = 0; i < maxRetries; i++){\n        try {\n            return await query();\n        } catch (error) {\n            if (i < maxRetries - 1) {\n                console.warn(`Database retry ${i + 1}/${maxRetries} due to: ${error.message}`);\n                await new Promise((resolve)=>setTimeout(resolve, delay * (i + 1)));\n                continue;\n            }\n            throw error;\n        }\n    }\n    throw new Error(\"Query failed after retries\");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvcHJpc21hLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBOEM7QUFFOUMsTUFBTUMsa0JBQWtCQztBQUlqQixNQUFNQyxTQUFTRixnQkFBZ0JFLE1BQU0sSUFBSSxJQUFJSCx3REFBWUEsQ0FBQztJQUMvREksS0FBS0MsS0FBc0MsR0FBRztRQUFDO1FBQVM7UUFBUztLQUFPLEdBQUcsQ0FBUztBQUN0RixHQUFHO0FBRUgsSUFBSUEsSUFBcUMsRUFBRTtJQUN6Q0osZ0JBQWdCRSxNQUFNLEdBQUdBO0FBQzNCO0FBRU8sZUFBZUcsVUFDcEJDLEtBQXVCLEVBQ3ZCQyxhQUFhLENBQUMsRUFDZEMsUUFBUSxHQUFHO0lBRVgsSUFBSyxJQUFJQyxJQUFJLEdBQUdBLElBQUlGLFlBQVlFLElBQUs7UUFDbkMsSUFBSTtZQUNGLE9BQU8sTUFBTUg7UUFDZixFQUFFLE9BQU9JLE9BQVk7WUFDbkIsSUFBSUQsSUFBSUYsYUFBYSxHQUFHO2dCQUN0QkksUUFBUUMsSUFBSSxDQUFDLENBQUMsZUFBZSxFQUFFSCxJQUFJLEVBQUUsQ0FBQyxFQUFFRixXQUFXLFNBQVMsRUFBRUcsTUFBTUcsT0FBTyxDQUFDLENBQUM7Z0JBQzdFLE1BQU0sSUFBSUMsUUFBUSxDQUFDQyxVQUFZQyxXQUFXRCxTQUFTUCxRQUFTQyxDQUFBQSxJQUFJO2dCQUNoRTtZQUNGO1lBQ0EsTUFBTUM7UUFDUjtJQUNGO0lBQ0EsTUFBTSxJQUFJTyxNQUFNO0FBQ2xCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2VzYXItd2ViLy4vbGliL3ByaXNtYS50cz85ODIyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gXCJAcHJpc21hL2NsaWVudFwiO1xyXG5cclxuY29uc3QgZ2xvYmFsRm9yUHJpc21hID0gZ2xvYmFsVGhpcyBhcyB1bmtub3duIGFzIHtcclxuICBwcmlzbWE6IFByaXNtYUNsaWVudCB8IHVuZGVmaW5lZDtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBwcmlzbWEgPSBnbG9iYWxGb3JQcmlzbWEucHJpc21hID8/IG5ldyBQcmlzbWFDbGllbnQoe1xyXG4gIGxvZzogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwiZGV2ZWxvcG1lbnRcIiA/IFtcInF1ZXJ5XCIsIFwiZXJyb3JcIiwgXCJ3YXJuXCJdIDogW1wiZXJyb3JcIl0sXHJcbn0pO1xyXG5cclxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikge1xyXG4gIGdsb2JhbEZvclByaXNtYS5wcmlzbWEgPSBwcmlzbWE7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB3aXRoUmV0cnk8VD4oXHJcbiAgcXVlcnk6ICgpID0+IFByb21pc2U8VD4sXHJcbiAgbWF4UmV0cmllcyA9IDIsXHJcbiAgZGVsYXkgPSA1MDBcclxuKTogUHJvbWlzZTxUPiB7XHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYXhSZXRyaWVzOyBpKyspIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIHJldHVybiBhd2FpdCBxdWVyeSgpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICBpZiAoaSA8IG1heFJldHJpZXMgLSAxKSB7XHJcbiAgICAgICAgY29uc29sZS53YXJuKGBEYXRhYmFzZSByZXRyeSAke2kgKyAxfS8ke21heFJldHJpZXN9IGR1ZSB0bzogJHtlcnJvci5tZXNzYWdlfWApO1xyXG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIGRlbGF5ICogKGkgKyAxKSkpO1xyXG4gICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICB9XHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG4gIH1cclxuICB0aHJvdyBuZXcgRXJyb3IoXCJRdWVyeSBmYWlsZWQgYWZ0ZXIgcmV0cmllc1wiKTtcclxufSJdLCJuYW1lcyI6WyJQcmlzbWFDbGllbnQiLCJnbG9iYWxGb3JQcmlzbWEiLCJnbG9iYWxUaGlzIiwicHJpc21hIiwibG9nIiwicHJvY2VzcyIsIndpdGhSZXRyeSIsInF1ZXJ5IiwibWF4UmV0cmllcyIsImRlbGF5IiwiaSIsImVycm9yIiwiY29uc29sZSIsIndhcm4iLCJtZXNzYWdlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwiRXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/prisma.ts\n");

/***/ }),

/***/ "(rsc)/./lib/supabase/server.ts":
/*!********************************!*\
  !*** ./lib/supabase/server.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createClient: () => (/* binding */ createClient)\n/* harmony export */ });\n/* harmony import */ var _supabase_auth_helpers_nextjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/auth-helpers-nextjs */ \"(rsc)/./node_modules/@supabase/auth-helpers-nextjs/dist/index.js\");\n/* harmony import */ var _supabase_auth_helpers_nextjs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_supabase_auth_helpers_nextjs__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\");\n\n\nconst createClient = ()=>(0,_supabase_auth_helpers_nextjs__WEBPACK_IMPORTED_MODULE_0__.createServerComponentClient)({\n        cookies: next_headers__WEBPACK_IMPORTED_MODULE_1__.cookies\n    });\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc3VwYWJhc2Uvc2VydmVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBNEU7QUFDckM7QUFFaEMsTUFBTUUsZUFBZSxJQUMxQkYsMEZBQTJCQSxDQUFDO1FBQzFCQyxPQUFPQSxtREFBQUE7SUFDVCxHQUFHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2VzYXItd2ViLy4vbGliL3N1cGFiYXNlL3NlcnZlci50cz82NjI1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZVNlcnZlckNvbXBvbmVudENsaWVudCB9IGZyb20gXCJAc3VwYWJhc2UvYXV0aC1oZWxwZXJzLW5leHRqc1wiO1xyXG5pbXBvcnQgeyBjb29raWVzIH0gZnJvbSBcIm5leHQvaGVhZGVyc1wiO1xyXG5cclxuZXhwb3J0IGNvbnN0IGNyZWF0ZUNsaWVudCA9ICgpID0+XHJcbiAgY3JlYXRlU2VydmVyQ29tcG9uZW50Q2xpZW50KHtcclxuICAgIGNvb2tpZXMsXHJcbiAgfSk7XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4iXSwibmFtZXMiOlsiY3JlYXRlU2VydmVyQ29tcG9uZW50Q2xpZW50IiwiY29va2llcyIsImNyZWF0ZUNsaWVudCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/supabase/server.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tslib","vendor-chunks/iceberg-js","vendor-chunks/set-cookie-parser"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Finsightiq%2Fstatus%2Froute&page=%2Fapi%2Fauth%2Finsightiq%2Fstatus%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Finsightiq%2Fstatus%2Froute.ts&appDir=C%3A%5CUsers%5Cilker%5CDesktop%5Csesar-web%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cilker%5CDesktop%5Csesar-web&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();